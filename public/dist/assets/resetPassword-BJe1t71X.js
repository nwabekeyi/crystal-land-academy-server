import{r as e,w as S,e as F,j as s,f as I}from"./index-pj4csjMx.js";import{H as C,F as W}from"./Header-Cz1ZRtrw.js";import{L as k}from"./loadingButton-CqVpuJvD.js";import{u as E}from"./useApi-CgK0isv2.js";import{M}from"./modal-DLk5G-pL.js";import{B as T}from"./backgroundWithHome-D9rX4oJ3.js";import{v as n,T as f,y as p}from"./TextField-nY0Yhgij.js";import{A}from"./Alert-Cp2vykcH.js";import"./index-CC0jhJuZ.js";import"./index-FNUBvU5N.js";import"./CircularProgress-B7Fe9zn4.js";import"./IconButton-BgFdEAdd.js";import"./index-CIIpu16o.js";import"./Tooltip-C-65a1jX.js";import"./islamic_learning-pANRDR7Y.js";import"./useSlot-C9IJxz6s.js";const B=()=>{const[r,x]=e.useState(""),[i,h]=e.useState(""),[l,o]=e.useState(""),[g,d]=e.useState(!1),[m]=S(),c=m.get("token"),b=m.get("role"),u=F(),{loading:y,error:w,callApi:R}=E(),j=()=>{d(!1),u("/")},v=()=>{u("/signin")},P=async t=>{if(t.preventDefault(),o(""),!c){o("Invalid or missing token.");return}if(!b){o("Invalid or missing role.");return}if(r!==i){o("Passwords do not match.");return}try{const a=await R(`${I.RESET_PASSWORD}?token=${encodeURIComponent(c)}`,"POST",{newPassword:r});a&&a.status==="success"&&d(!0)}catch{o(w||"Failed to reset password. Please try again.")}};return s.jsxs("div",{children:[s.jsx(C,{}),s.jsx(n,{sx:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:"30px",mx:2},children:s.jsxs(n,{sx:{p:3,textAlign:"start",backgroundColor:"rgba(255, 255, 255, 0.8)",boxShadow:10,borderRadius:2,backdropFilter:"blur(10px)",maxWidth:"400px",width:"100%",border:"1px solid rgba(255, 255, 255, 0.18)"},children:[s.jsx(f,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"600",color:"#15131D",fontFamily:"Inter, Roboto, sans-serif"},children:"Reset Password"}),s.jsx(f,{variant:"subtitle1",sx:{mb:3,color:"text.secondary",fontFamily:"Inter, Roboto, sans-serif"},children:"Enter your new password below."}),s.jsxs("form",{onSubmit:P,children:[s.jsx(p,{label:"New Password",type:"password",fullWidth:!0,variant:"outlined",value:r,onChange:t=>x(t.target.value),required:!0,sx:{mb:2,"& label":{fontFamily:"Inter, Roboto, sans-serif"},"& input":{fontFamily:"Inter, Roboto, sans-serif"}}}),s.jsx(p,{label:"Confirm New Password",type:"password",fullWidth:!0,variant:"outlined",value:i,onChange:t=>h(t.target.value),required:!0,sx:{mb:3,"& label":{fontFamily:"Inter, Roboto, sans-serif"},"& input":{fontFamily:"Inter, Roboto, sans-serif"}}}),s.jsx(k,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,size:"large",isLoading:y,sx:{py:1.5,fontSize:"1rem",fontWeight:"600",textTransform:"none",fontFamily:"Inter, Roboto, sans-serif"},children:"Reset Password"})]}),l&&s.jsx(A,{severity:"error",sx:{mt:3,fontFamily:"Inter, Roboto, sans-serif"},children:l})]})}),s.jsx(W,{}),s.jsx(M,{open:g,onClose:j,title:"Password Reset Successful",onConfirm:v,sx:{"& .MuiTypography-root":{fontFamily:"Inter, Roboto, sans-serif"}},children:s.jsx(n,{sx:{fontFamily:"Inter, Roboto, sans-serif"},children:s.jsx("p",{children:"Password reset successful. Do you want to login?"})})})]})},Y=T(B);export{Y as default};
