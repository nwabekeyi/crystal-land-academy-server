import{j as e,a as Ye,r as f,f as V,i as Ue}from"./index-DXxzwwbK.js";import{M as Ce,t as Se,r as bt}from"./modal-Ci5iPumC.js";import{F as Ve,a as Ge,b as ze}from"./main-v_3NwtIH.js";import{H as qe}from"./Header-Dfg-LaqG.js";import{v as H,T as b,j as ye,x as be,q as gt,a1 as ee,a3 as te,a2 as ae,y as ve}from"./TextField-C1UIQ2nv.js";import{u as Q}from"./useApi-DVdT1N_3.js";import{u as Te}from"./useMediaQuery-Dk1-EYYS.js";import{C as Re}from"./confirmationModal-HQTZ8uES.js";import{A as dt}from"./actionButton-DwAij9aY.js";import{M as y}from"./MenuItem-DEndFJiM.js";import{w as jt}from"./dasboardPagesContainer-tlH_EIyF.js";import"./IconButton-DhOWqksS.js";import"./index-F6-XIzxz.js";import"./index-Bd97VqvA.js";import"./loadingButton-B9XNayDD.js";import"./CircularProgress-BGFInVhb.js";import"./crystal-land-log-removebg-DVF-nlbN.js";import"./useSlot-B3K9JRnK.js";const pt=({open:n,onClose:t,timetable:a,classLevelData:l,subjectData:s,teacherData:r,showEditButton:c,showAttendance:o,userId:u})=>{var C;const m=i=>{var d,O;return((O=(d=l==null?void 0:l.data)==null?void 0:d.find(W=>W._id===i))==null?void 0:O.name)||"N/A"},x=i=>{var d,O;return((O=(d=s==null?void 0:s.data)==null?void 0:d.find(W=>W._id===i))==null?void 0:O.name)||"N/A"},g=i=>{var O;const d=(O=r==null?void 0:r.data)==null?void 0:O.find(W=>W._id===i);return d?`${d.firstName} ${d.lastName}`:"N/A"},p=()=>{var d,O;if(!a||!o)return"N/A";const i=(O=(d=a.periodAttendance)==null?void 0:d[0])==null?void 0:O.attendance.find(W=>W.studentId.toString()===u);return(i==null?void 0:i.status)||"N/A"};return e.jsx(Ce,{open:n,onClose:t,title:"Timetable Details",styleProps:{padding:"20px"},noConfirm:!0,children:a?e.jsxs(H,{display:"flex",flexDirection:"column",gap:"16px",mt:"10px",children:[e.jsxs(b,{children:[e.jsx("strong",{children:"Class Level:"})," ",m(a.classLevel)]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Subclass:"})," ",a.subclassLetter]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Subject:"})," ",x(a.subject)]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Teacher:"})," ",g(((C=a.teacher)==null?void 0:C._id)||a.teacher)]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Day of Week:"})," ",a.dayOfWeek]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Start Time:"})," ",a.startTime]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Number of Periods:"})," ",a.numberOfPeriods]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Location:"})," ",a.location]}),o&&e.jsxs(b,{children:[e.jsx("strong",{children:"Attendance Status:"})," ",p()]})]}):e.jsx(b,{children:"No timetable details available"})})},vt=6048e5,ct=6e4,ot=36e5,nt=Symbol.for("constructDateFrom");function Ee(n,t){return typeof n=="function"?n(t):n&&typeof n=="object"&&nt in n?n[nt](t):n instanceof Date?new n.constructor(t):new Date(t)}function We(n,t){return Ee(t||n,n)}let Tt={};function Ze(){return Tt}function ge(n,t){var o,u,m,x;const a=Ze(),l=(t==null?void 0:t.weekStartsOn)??((u=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:u.weekStartsOn)??a.weekStartsOn??((x=(m=a.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??0,s=We(n,t==null?void 0:t.in),r=s.getDay(),c=(r<l?7:0)+r-l;return s.setDate(s.getDate()-c),s.setHours(0,0,0,0),s}function kt(n,t){var x,g,p,C;const a=We(n,t==null?void 0:t.in),l=a.getFullYear(),s=Ze(),r=(t==null?void 0:t.firstWeekContainsDate)??((g=(x=t==null?void 0:t.locale)==null?void 0:x.options)==null?void 0:g.firstWeekContainsDate)??s.firstWeekContainsDate??((C=(p=s.locale)==null?void 0:p.options)==null?void 0:C.firstWeekContainsDate)??1,c=Ee((t==null?void 0:t.in)||n,0);c.setFullYear(l+1,0,r),c.setHours(0,0,0,0);const o=ge(c,t),u=Ee((t==null?void 0:t.in)||n,0);u.setFullYear(l,0,r),u.setHours(0,0,0,0);const m=ge(u,t);return+a>=+o?l+1:+a>=+m?l:l-1}function Ct(n,t){var o,u,m,x;const a=Ze(),l=(t==null?void 0:t.firstWeekContainsDate)??((u=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:u.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(m=a.locale)==null?void 0:m.options)==null?void 0:x.firstWeekContainsDate)??1,s=kt(n,t),r=Ee((t==null?void 0:t.in)||n,0);return r.setFullYear(s,0,l),r.setHours(0,0,0,0),ge(r,t)}function xe(n,t){const a=We(n,t==null?void 0:t.in),l=+ge(a,t)-+Ct(a,t);return Math.round(l/vt)+1}function ke(n,t){const a=()=>Ee(t==null?void 0:t.in,NaN),s=Mt(n);let r;if(s.date){const m=Lt(s.date,2);r=Et(m.restDateString,m.year)}if(!r||isNaN(+r))return a();const c=+r;let o=0,u;if(s.time&&(o=Wt(s.time),isNaN(o)))return a();if(s.timezone){if(u=Nt(s.timezone),isNaN(u))return a()}else{const m=new Date(c+o),x=We(0,t==null?void 0:t.in);return x.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),x.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),x}return We(c+o+u,t==null?void 0:t.in)}const De={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},St=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,yt=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ot=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Mt(n){const t={},a=n.split(De.dateTimeDelimiter);let l;if(a.length>2)return t;if(/:/.test(a[0])?l=a[0]:(t.date=a[0],l=a[1],De.timeZoneDelimiter.test(t.date)&&(t.date=n.split(De.timeZoneDelimiter)[0],l=n.substr(t.date.length,n.length))),l){const s=De.timezone.exec(l);s?(t.time=l.replace(s[1],""),t.timezone=s[1]):t.time=l}return t}function Lt(n,t){const a=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),l=n.match(a);if(!l)return{year:NaN,restDateString:""};const s=l[1]?parseInt(l[1]):null,r=l[2]?parseInt(l[2]):null;return{year:r===null?s:r*100,restDateString:n.slice((l[1]||l[2]).length)}}function Et(n,t){if(t===null)return new Date(NaN);const a=n.match(St);if(!a)return new Date(NaN);const l=!!a[4],s=Le(a[1]),r=Le(a[2])-1,c=Le(a[3]),o=Le(a[4]),u=Le(a[5])-1;if(l)return wt(t,o,u)?At(t,o,u):new Date(NaN);{const m=new Date(0);return!It(t,r,c)||!Pt(t,s)?new Date(NaN):(m.setUTCFullYear(t,r,Math.max(s,c)),m)}}function Le(n){return n?parseInt(n):1}function Wt(n){const t=n.match(yt);if(!t)return NaN;const a=He(t[1]),l=He(t[2]),s=He(t[3]);return Dt(a,l,s)?a*ot+l*ct+s*1e3:NaN}function He(n){return n&&parseFloat(n.replace(",","."))||0}function Nt(n){if(n==="Z")return 0;const t=n.match(Ot);if(!t)return 0;const a=t[1]==="+"?-1:1,l=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return $t(l,s)?a*(l*ot+s*ct):NaN}function At(n,t,a){const l=new Date(0);l.setUTCFullYear(n,0,4);const s=l.getUTCDay()||7,r=(t-1)*7+a+1-s;return l.setUTCDate(l.getUTCDate()+r),l}const _t=[31,null,31,30,31,30,31,31,30,31,30,31];function ut(n){return n%400===0||n%4===0&&n%100!==0}function It(n,t,a){return t>=0&&t<=11&&a>=1&&a<=(_t[t]||(ut(n)?29:28))}function Pt(n,t){return t>=1&&t<=(ut(n)?366:365)}function wt(n,t,a){return t>=1&&t<=53&&a>=0&&a<=6}function Dt(n,t,a){return n===24?t===0&&a===0:a>=0&&a<60&&t>=0&&t<60&&n>=0&&n<25}function $t(n,t){return t>=0&&t<=59}const lt=["Monday","Tuesday","Wednesday","Thursday","Friday"],Ft=({userId:n})=>{var w;const t=ye();Se(t.palette.mode);const a=Ye(v=>v.users.user),[l,s]=f.useState(1),[r,c]=f.useState([]),[o,u]=f.useState(!1),[m,x]=f.useState(!1),[g,p]=f.useState(""),[C,i]=f.useState(null),{loading:d,error:O,callApi:W,data:D}=Q();f.useEffect(()=>{W(`${V.TIMETABLE}/student/${a._id}`,"GET")},[W,n]),f.useEffect(()=>{(D==null?void 0:D.status)==="success"&&c(D.data)},[D]);const N=f.useMemo(()=>{if(!r||r.length===0)return[];const v=new Date,L=v.getDay(),P=L===0?6:L-1,j=new Date(v);return j.setDate(v.getDate()-P),j.setHours(0,0,0,0),r.filter(T=>k(T.date||v.toISOString())===l).map(T=>{var re,ie,J,A,de,ce,he,je;const Z=lt.indexOf(T.dayOfWeek);if(Z===-1)return null;const G=new Date(j);G.setDate(j.getDate()+Z);const[fe,le]=T.startTime.split(":").map(Number);G.setHours(fe,le,0,0);const se=new Date(G);return se.setMinutes(se.getMinutes()+T.numberOfPeriods*45),{id:T._id,title:`${((re=T.subject)==null?void 0:re.name)||"Unknown"} (${T.location})`,start:G,end:se,extendedProps:{classLevel:((ie=T.classLevel)==null?void 0:ie._id)||T.classLevel,classLevelName:((J=T.classLevel)==null?void 0:J.name)||"N/A",subclassLetter:T.subclassLetter,subject:((A=T.subject)==null?void 0:A._id)||T.subject,subjectName:((de=T.subject)==null?void 0:de.name)||"N/A",teacher:T.teacher,dayOfWeek:T.dayOfWeek,startTime:T.startTime,numberOfPeriods:T.numberOfPeriods,location:T.location,attendanceStatus:((je=(he=(ce=T.periodAttendance)==null?void 0:ce[0])==null?void 0:he.attendance.find(me=>me.studentId.toString()===n))==null?void 0:je.status)||"N/A"}}}).filter(T=>T!==null)},[r,l,n]),k=f.useCallback(v=>{const L=ke(v),P=ge(ke("2024-09-01"),{weekStartsOn:1});return xe(L,{weekStartsOn:1})-xe(P,{weekStartsOn:1})+1},[]),q=f.useCallback(v=>{const L=r.find(P=>P._id===v.event.id);L&&(i(L),u(!0))},[r]),M=d,$=(D==null?void 0:D.status)==="failed"?D.message:O,R=f.useMemo(()=>{var v;return{data:[{_id:a.classLevelId,name:((v=a.currentClassLevel)==null?void 0:v.className)||"N/A"}]}},[a.classLevelId,(w=a.currentClassLevel)==null?void 0:w.className]),ne=f.useMemo(()=>({data:r.map(v=>{var L,P;return{_id:((L=v.subject)==null?void 0:L._id)||v.subject,name:((P=v.subject)==null?void 0:P.name)||"N/A"}}).filter((v,L,P)=>P.findIndex(j=>j._id.toString()===v._id.toString())===L)}),[r]),Y=f.useMemo(()=>({data:r.map(v=>{var L,P,j;return{_id:((L=v.teacher)==null?void 0:L._id)||v.teacher,firstName:((P=v.teacher)==null?void 0:P.firstName)||"N/A",lastName:((j=v.teacher)==null?void 0:j.lastName)||""}}).filter((v,L,P)=>P.findIndex(j=>j._id.toString()===v._id.toString())===L)}),[r]);return{calendarEvents:N,selectedWeek:l,setSelectedWeek:s,viewModalOpen:o,setViewModalOpen:u,confirmationModalOpen:m,setConfirmationModalOpen:x,confirmationMessage:g,setConfirmationMessage:p,selectedTimetable:C,setSelectedTimetable:i,handleEventClick:q,classLevelData:R,subjectData:ne,teacherData:Y,loading:M,error:$,daysOfWeek:lt,weeksPerTerm:12}},Bt=({babtechUser:n})=>{const t=ye(),a=Se(t.palette.mode),l=(n==null?void 0:n._id)||"",s=Te("(max-width: 768px)"),r=Te("(max-width: 375px)"),{calendarEvents:c,selectedWeek:o,setSelectedWeek:u,viewModalOpen:m,setViewModalOpen:x,confirmationModalOpen:g,setConfirmationModalOpen:p,confirmationMessage:C,selectedTimetable:i,handleEventClick:d,classLevelData:O,subjectData:W,teacherData:D,loading:N,error:k,weeksPerTerm:q}=Ft({userId:l});return e.jsxs(H,{py:"20px",children:[e.jsx(qe,{title:"STUDENT TIMETABLE",subtitle:"View Your Weekly Schedule",sx:{"& h1":{fontSize:r?"20px":"24px"},"& h2":{fontSize:r?"14px":"16px"}}}),e.jsx(H,{mb:"20px",display:"flex",gap:"20px",alignItems:"center",children:e.jsxs(H,{display:"flex",alignItems:"center",gap:"10px",children:[e.jsx(be,{variant:"contained",onClick:()=>o>1&&u(o-1),disabled:o===1,sx:{backgroundColor:a.blueAccent[700]},children:"Previous Week"}),e.jsxs(b,{variant:"h6",children:["Week ",o]}),e.jsx(be,{variant:"contained",onClick:()=>o<q&&u(o+1),disabled:o===q,sx:{backgroundColor:a.blueAccent[700]},children:"Next Week"})]})}),e.jsx(H,{children:N?e.jsx(Ue,{}):k?e.jsx(b,{color:"error",children:k}):c.length>0?e.jsx(Ve,{height:r?"45vh":s?"50vh":"75vh",plugins:[Ge,ze],headerToolbar:{left:"prev,next today",center:"title",right:""},initialView:"timeGridWeek",editable:!1,selectable:!1,dayMaxEvents:!0,events:c,eventClick:d,slotMinTime:"07:00:00",slotMaxTime:"18:00:00",allDaySlot:!1}):e.jsx(b,{children:"No schedule available for this week."})}),e.jsx(pt,{open:m,onClose:()=>{x(!1),setSelectedTimetable(null)},timetable:i,classLevelData:O,subjectData:W,teacherData:D,showEditButton:!1,showAttendance:!0,userId:l}),e.jsx(Re,{open:g,onClose:()=>p(!1),title:"Timetable Operation",message:C,isLoading:N})]})};var Je={},Ht=gt;Object.defineProperty(Je,"__esModule",{value:!0});var ft=Je.default=void 0,Yt=Ht(bt()),Ut=e;ft=Je.default=(0,Yt.default)((0,Ut.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");const Vt=({open:n,onClose:t,onConfirm:a,attendanceChanges:l,handleAttendanceChange:s,studentData:r,isLoading:c})=>{var o;return e.jsx(Ce,{open:n,onClose:t,title:"Mark Attendance",onConfirm:a,confirmMessage:"Confirm",styleProps:{padding:"20px"},noConfirm:c,children:e.jsx(H,{display:"flex",flexDirection:"column",gap:"16px",mt:"10px",children:((o=r==null?void 0:r.data)==null?void 0:o.length)>0?r.data.map(u=>e.jsxs(H,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(b,{children:[u.firstName," ",u.lastName]}),e.jsx(ee,{sx:{minWidth:100},children:e.jsxs(te,{value:l[u._id]||"Absent",onChange:m=>s(u._id,m.target.value),children:[e.jsx(y,{value:"Present",children:"Present"}),e.jsx(y,{value:"Absent",children:"Absent"}),e.jsx(y,{value:"Late",children:"Late"}),e.jsx(y,{value:"Excused",children:"Excused"})]})})]},u._id)):e.jsx(b,{children:"No students available"})})})},Gt=({open:n,onClose:t,timetable:a,classLevelData:l,subjectData:s,showEditButton:r,onMarkAttendance:c})=>{const o=m=>{var x,g;return((g=(x=l==null?void 0:l.data)==null?void 0:x.find(p=>p._id===m))==null?void 0:g.name)||"N/A"},u=m=>{var x,g;return((g=(x=s==null?void 0:s.data)==null?void 0:x.find(p=>p._id===m))==null?void 0:g.name)||"N/A"};return e.jsx(Ce,{open:n,onClose:t,title:"Timetable Details",onConfirm:c,confirmMessage:"Mark Attendance",styleProps:{padding:"20px"},noConfirm:!c,additionalButton:c&&e.jsx(dt,{content:"Mark Attendance",icon:e.jsx(ft,{}),onClick:c,sx:{mr:2}}),children:a?e.jsxs(H,{display:"flex",flexDirection:"column",gap:"16px",mt:"10px",children:[e.jsxs(b,{children:[e.jsx("strong",{children:"Class Level:"})," ",o(a.classLevel)]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Subclass:"})," ",a.subclassLetter]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Subject:"})," ",u(a.subject)]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Day of Week:"})," ",a.dayOfWeek]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Start Time:"})," ",a.startTime]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Number of Periods:"})," ",a.numberOfPeriods]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Location:"})," ",a.location]})]}):e.jsx(b,{children:"No timetable details available"})})},rt=["Monday","Tuesday","Wednesday","Thursday","Friday"],zt=({userId:n})=>{const t=ye();Se(t.palette.mode);const[a,l]=f.useState(1),[s,r]=f.useState([]),[c,o]=f.useState(!1),[u,m]=f.useState(!1),[x,g]=f.useState(!1),[p,C]=f.useState(""),[i,d]=f.useState(null),[O,W]=f.useState(null),[D,N]=f.useState({}),{loading:k,error:q,callApi:M,data:$}=Q(),{loading:R,error:ne,callApi:Y,data:w}=Q(),{loading:v,error:L,callApi:P}=Q(),{loading:j,error:ue,callApi:T,data:Z}=Q(),{loading:G,error:fe,callApi:le,data:se}=Q();f.useEffect(()=>{M(`${V.TIMETABLE}/teacher/${n}`,"GET"),T(V.CLASS_LEVEL,"GET"),le(V.SUBJECT,"GET")},[M,T,le,n]),f.useEffect(()=>{($==null?void 0:$.status)==="success"&&r($.data)},[$]);const re=f.useMemo(()=>{if(!s||s.length===0)return[];const B=new Date,F=B.getDay(),U=F===0?6:F-1,_=new Date(B);return _.setDate(B.getDate()-U),_.setHours(0,0,0,0),s.filter(E=>ie(E.date||B.toISOString())===a).map(E=>{var Ne,Ae,_e,Ie,h;const oe=rt.indexOf(E.dayOfWeek);if(oe===-1)return null;const X=new Date(_);X.setDate(_.getDate()+oe);const[pe,Oe]=E.startTime.split(":").map(Number);X.setHours(pe,Oe,0,0);const Me=new Date(X);return Me.setMinutes(Me.getMinutes()+E.numberOfPeriods*45),{id:E._id,title:`${((Ne=E.subject)==null?void 0:Ne.name)||"Unknown"} (${E.location})`,start:X,end:Me,extendedProps:{classLevel:((Ae=E.classLevel)==null?void 0:Ae._id)||E.classLevel,classLevelName:((_e=E.classLevel)==null?void 0:_e.name)||"N/A",subclassLetter:E.subclassLetter,subject:((Ie=E.subject)==null?void 0:Ie._id)||E.subject,subjectName:((h=E.subject)==null?void 0:h.name)||"N/A",dayOfWeek:E.dayOfWeek,startTime:E.startTime,numberOfPeriods:E.numberOfPeriods,location:E.location}}}).filter(E=>E!==null)},[s,a]),ie=f.useCallback(B=>{const F=ke(B),U=ge(ke("2024-09-01"),{weekStartsOn:1});return xe(F,{weekStartsOn:1})-xe(U,{weekStartsOn:1})+1},[]),J=f.useCallback(async(B,F)=>{var _;const U=await Y(`${V.CLASS_LEVEL}/${B}/subclasses/${F}/students`,"GET");return((_=U==null?void 0:U.data)==null?void 0:_.students)||[]},[Y]),A=f.useCallback((B,F)=>{N(U=>({...U,[B]:F}))},[]),de=f.useCallback(async()=>{if(!s.find(_=>_._id===i))return;const F=Object.entries(D).map(([_,K])=>({studentId:_,status:K,notes:K==="Absent"||K==="Excused"?"Marked by instructor":""})),U={timetableId:i,periodIndex:0,attendanceData:F};try{const _=await P(`${V.TIMETABLE}/${i}/attendance`,"PUT",U);(_==null?void 0:_.status)==="success"?(r(s.map(K=>K._id===i?{...K,periodAttendance:_.data.periodAttendance}:K)),C("Attendance marked successfully"),o(!1),g(!0),d(null),N({})):(C((_==null?void 0:_.message)||L||"Failed to mark attendance"),g(!0))}catch(_){C(L||_.message||"Failed to mark attendance"),g(!0)}},[s,i,D,P,L]),ce=f.useCallback(async B=>{const F=s.find(U=>U._id===B);if(F){const _=(await J(F.classLevel._id,F.subclassLetter)).reduce((K,E)=>{var X,pe;const oe=(pe=(X=F.periodAttendance)==null?void 0:X[0])==null?void 0:pe.attendance.find(Oe=>Oe.studentId.toString()===E._id.toString());return{...K,[E._id]:(oe==null?void 0:oe.status)||"Absent"}},{});N(_),d(B),o(!0)}},[s,J]),he=f.useCallback(B=>{const F=s.find(U=>U._id===B.event.id);F&&(W(F),m(!0))},[s]),je=k||R||v||j||G,me=($==null?void 0:$.status)==="failed"?$.message:q||ne||L||ue||fe;return{calendarEvents:re,selectedWeek:a,setSelectedWeek:l,attendanceModalOpen:c,setAttendanceModalOpen:o,viewModalOpen:u,setViewModalOpen:m,confirmationModalOpen:x,setConfirmationModalOpen:g,confirmationMessage:p,selectedScheduleId:i,selectedTimetable:O,attendanceChanges:D,setAttendanceChanges:N,handleAttendanceChange:A,handleConfirmAttendance:de,openAttendanceModal:ce,handleEventClick:he,classLevelData:Z,subjectData:se,studentData:w,loading:je,error:me,daysOfWeek:rt,weeksPerTerm:12}},qt=({babtechUser:n})=>{const t=ye(),a=Se(t.palette.mode),l=(n==null?void 0:n._id)||"",s=Te("(max-width: 768px)"),r=Te("(max-width: 375px)"),{calendarEvents:c,selectedWeek:o,setSelectedWeek:u,attendanceModalOpen:m,setAttendanceModalOpen:x,viewModalOpen:g,setViewModalOpen:p,confirmationModalOpen:C,setConfirmationModalOpen:i,confirmationMessage:d,selectedTimetable:O,handleAttendanceChange:W,handleConfirmAttendance:D,openAttendanceModal:N,handleEventClick:k,classLevelData:q,subjectData:M,studentData:$,loading:R,error:ne,weeksPerTerm:Y,attendanceChanges:w}=zt({userId:l});return e.jsxs(H,{py:"20px",children:[e.jsx(qe,{title:"TEACHER TIMETABLE",subtitle:"View Your Weekly Schedule and Mark Attendance",sx:{"& h1":{fontSize:r?"20px":"24px"},"& h2":{fontSize:r?"14px":"16px"}}}),e.jsx(H,{mb:"20px",display:"flex",gap:"20px",alignItems:"center",children:e.jsxs(H,{display:"flex",alignItems:"center",gap:"10px",children:[e.jsx(be,{variant:"contained",onClick:()=>o>1&&u(o-1),disabled:o===1,sx:{backgroundColor:a.blueAccent[700]},children:"Previous Week"}),e.jsxs(b,{variant:"h6",children:["Week ",o]}),e.jsx(be,{variant:"contained",onClick:()=>o<Y&&u(o+1),disabled:o===Y,sx:{backgroundColor:a.blueAccent[700]},children:"Next Week"})]})}),e.jsx(H,{children:R?e.jsx(Ue,{}):ne?e.jsx(b,{color:"error",children:ne}):c.length>0?e.jsx(Ve,{height:r?"45vh":s?"50vh":"75vh",plugins:[Ge,ze],headerToolbar:{left:"prev,next today",center:"title",right:""},initialView:"timeGridWeek",editable:!1,selectable:!1,dayMaxEvents:!0,events:c,eventClick:k,slotMinTime:"07:00:00",slotMaxTime:"18:00:00",allDaySlot:!1}):e.jsx(b,{children:"No schedule available for this week."})}),e.jsx(Vt,{open:m,onClose:()=>{x(!1),setSelectedScheduleId(null)},onConfirm:D,attendanceChanges:w,handleAttendanceChange:W,studentData:$,isLoading:R}),e.jsx(Gt,{open:g,onClose:()=>{p(!1),setSelectedTimetable(null)},timetable:O,classLevelData:q,subjectData:M,showEditButton:!1,onMarkAttendance:()=>N(O==null?void 0:O._id)}),e.jsx(Re,{open:C,onClose:()=>i(!1),title:"Attendance Operation",message:d,isLoading:R})]})},Rt=({open:n,onClose:t,onConfirm:a,newSchedule:l,setNewSchedule:s,classLevelData:r,subjectData:c,isLoading:o,daysOfWeek:u})=>{var m,x,g,p,C;return e.jsx(Ce,{open:n,onClose:t,title:"Add New Timetable",onConfirm:a,confirmMessage:"Add",styleProps:{padding:"20px"},noConfirm:o,children:e.jsxs(H,{display:"flex",flexDirection:"column",gap:"16px",mt:"10px",children:[e.jsxs(ee,{fullWidth:!0,children:[e.jsx(ae,{id:"class-level-modal-label",children:"Class Level"}),e.jsx(te,{labelId:"class-level-modal-label",value:l.classLevel,label:"Class Level",onChange:i=>s({...l,classLevel:i.target.value,subclassLetter:""}),children:((m=r==null?void 0:r.data)==null?void 0:m.length)>0?r.data.map(i=>e.jsx(y,{value:i._id,children:i.name},i._id)):e.jsx(y,{disabled:!0,children:"No class levels available"})})]}),e.jsxs(ee,{fullWidth:!0,children:[e.jsx(ae,{id:"subclass-modal-label",children:"Subclass"}),e.jsx(te,{labelId:"subclass-modal-label",value:l.subclassLetter,label:"Subclass",onChange:i=>s({...l,subclassLetter:i.target.value}),disabled:!l.classLevel,children:((p=(g=(x=r==null?void 0:r.data)==null?void 0:x.find(i=>i._id===l.classLevel))==null?void 0:g.subclasses)==null?void 0:p.length)>0?r.data.find(i=>i._id===l.classLevel).subclasses.map(i=>e.jsx(y,{value:i.letter,children:i.letter},i.letter)):e.jsx(y,{disabled:!0,children:"No subclasses available"})})]}),e.jsxs(ee,{fullWidth:!0,children:[e.jsx(ae,{id:"subject-modal-label",children:"Subject"}),e.jsx(te,{labelId:"subject-modal-label",value:l.subject,label:"Subject",onChange:i=>s({...l,subject:i.target.value}),children:((C=c==null?void 0:c.data)==null?void 0:C.length)>0?c.data.map(i=>e.jsx(y,{value:i._id,children:i.name},i._id)):e.jsx(y,{disabled:!0,children:"No subjects available"})})]}),e.jsxs(ee,{fullWidth:!0,children:[e.jsx(ae,{id:"day-modal-label",children:"Day of Week"}),e.jsx(te,{labelId:"day-modal-label",value:l.dayOfWeek,label:"Day of Week",onChange:i=>s({...l,dayOfWeek:i.target.value}),children:(u==null?void 0:u.length)>0?u.map(i=>e.jsx(y,{value:i,children:i},i)):e.jsx(y,{disabled:!0,children:"No days available"})})]}),e.jsx(ve,{label:"Start Time (HH:MM)",value:l.startTime,onChange:i=>s({...l,startTime:i.target.value}),fullWidth:!0}),e.jsx(ve,{label:"Number of Periods",type:"number",value:l.numberOfPeriods,onChange:i=>s({...l,numberOfPeriods:i.target.value}),fullWidth:!0,inputProps:{min:1}}),e.jsx(ve,{label:"Location",value:l.location,onChange:i=>s({...l,location:i.target.value}),fullWidth:!0})]})})},Zt=({open:n,onClose:t,onConfirm:a,onDelete:l,newSchedule:s,setNewSchedule:r,classLevelData:c,subjectData:o,isLoading:u,daysOfWeek:m})=>{var x,g,p,C,i;return e.jsx(Ce,{open:n,onClose:t,title:"Edit Timetable",onConfirm:a,confirmMessage:"Update",styleProps:{padding:"20px"},noConfirm:u,additionalButton:e.jsx(be,{variant:"contained",color:"error",onClick:l,disabled:u,sx:{mr:2},children:"Delete"}),children:e.jsxs(H,{display:"flex",flexDirection:"column",gap:"16px",mt:"10px",children:[e.jsxs(ee,{fullWidth:!0,children:[e.jsx(ae,{id:"class-level-modal-label",children:"Class Level"}),e.jsx(te,{labelId:"class-level-modal-label",value:s.classLevel,label:"Class Level",onChange:d=>r({...s,classLevel:d.target.value,subclassLetter:""}),children:((x=c==null?void 0:c.data)==null?void 0:x.length)>0?c.data.map(d=>e.jsx(y,{value:d._id,children:d.name},d._id)):e.jsx(y,{disabled:!0,children:"No class levels available"})})]}),e.jsxs(ee,{fullWidth:!0,children:[e.jsx(ae,{id:"subclass-modal-label",children:"Subclass"}),e.jsx(te,{labelId:"subclass-modal-label",value:s.subclassLetter,label:"Subclass",onChange:d=>r({...s,subclassLetter:d.target.value}),disabled:!s.classLevel,children:((C=(p=(g=c==null?void 0:c.data)==null?void 0:g.find(d=>d._id===s.classLevel))==null?void 0:p.subclasses)==null?void 0:C.length)>0?c.data.find(d=>d._id===s.classLevel).subclasses.map(d=>e.jsx(y,{value:d.letter,children:d.letter},d.letter)):e.jsx(y,{disabled:!0,children:"No subclasses available"})})]}),e.jsxs(ee,{fullWidth:!0,children:[e.jsx(ae,{id:"subject-modal-label",children:"Subject"}),e.jsx(te,{labelId:"subject-modal-label",value:s.subject,label:"Subject",onChange:d=>r({...s,subject:d.target.value}),children:((i=o==null?void 0:o.data)==null?void 0:i.length)>0?o.data.map(d=>e.jsx(y,{value:d._id,children:d.name},d._id)):e.jsx(y,{disabled:!0,children:"No subjects available"})})]}),e.jsxs(ee,{fullWidth:!0,children:[e.jsx(ae,{id:"day-modal-label",children:"Day of Week"}),e.jsx(te,{labelId:"day-modal-label",value:s.dayOfWeek,label:"Day of Week",onChange:d=>r({...s,dayOfWeek:d.target.value}),children:(m==null?void 0:m.length)>0?m.map(d=>e.jsx(y,{value:d,children:d},d)):e.jsx(y,{disabled:!0,children:"No days available"})})]}),e.jsx(ve,{label:"Start Time (HH:MM)",value:s.startTime,onChange:d=>r({...s,startTime:d.target.value}),fullWidth:!0}),e.jsx(ve,{label:"Number of Periods",type:"number",value:s.numberOfPeriods,onChange:d=>r({...s,numberOfPeriods:d.target.value}),fullWidth:!0,inputProps:{min:1}}),e.jsx(ve,{label:"Location",value:s.location,onChange:d=>r({...s,location:d.target.value}),fullWidth:!0})]})})},Jt=({open:n,onClose:t,onEdit:a,timetable:l,classLevelData:s,subjectData:r})=>{const c=u=>{var m,x;return((x=(m=s==null?void 0:s.data)==null?void 0:m.find(g=>g._id===u))==null?void 0:x.name)||"N/A"},o=u=>{var m,x;return((x=(m=r==null?void 0:r.data)==null?void 0:m.find(g=>g._id===u))==null?void 0:x.name)||"N/A"};return e.jsx(Ce,{open:n,onClose:t,title:"Timetable Details",confirmMessage:"Edit",onConfirm:a,styleProps:{padding:"20px"},children:l?e.jsxs(H,{display:"flex",flexDirection:"column",gap:"16px",mt:"10px",children:[e.jsxs(b,{children:[e.jsx("strong",{children:"Class Level:"})," ",c(l.classLevel)]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Subclass:"})," ",l.subclassLetter]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Subject:"})," ",o(l.subject)]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Day of Week:"})," ",l.dayOfWeek]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Start Time:"})," ",l.startTime]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Number of Periods:"})," ",l.numberOfPeriods]}),e.jsxs(b,{children:[e.jsx("strong",{children:"Location:"})," ",l.location]})]}):e.jsx(b,{children:"No timetable details available"})})},it=["Monday","Tuesday","Wednesday","Thursday","Friday"],Qt=({userId:n})=>{const t=ye();Se(t.palette.mode);const[a,l]=f.useState(""),[s,r]=f.useState(""),[c,o]=f.useState(""),[u,m]=f.useState(1),[x,g]=f.useState(!1),[p,C]=f.useState(!1),[i,d]=f.useState(!1),[O,W]=f.useState(!1),[D,N]=f.useState(""),[k,q]=f.useState(null),[M,$]=f.useState({classLevel:"",subclassLetter:"",subject:"",teacher:"",dayOfWeek:"",startTime:"",numberOfPeriods:1,location:""}),{loading:R,error:ne,callApi:Y,data:w}=Q(),{loading:v,error:L,callApi:P,data:j}=Q(),{loading:ue,error:T,callApi:Z,data:G}=Q(),{loading:fe,error:le,callApi:se,data:re}=Q(),{loading:ie,error:J,callApi:A}=Q(),{loading:de,error:ce,callApi:he}=Q(),{loading:je,error:me,callApi:B}=Q();f.useEffect(()=>{P(V.CLASS_LEVEL,"GET"),Z(V.SUBJECT,"GET"),se(V.TEACHER,"GET")},[P,Z,se]),f.useEffect(()=>{s&&c&&Y(`${V.TIMETABLE}?classLevel=${s}&subclassLetter=${c}`,"GET")},[s,c,Y]);const F=f.useMemo(()=>j!=null&&j.data?a?{data:j.data.filter(h=>h.section===a)}:j:{data:[]},[j,a]),U=f.useMemo(()=>!(G!=null&&G.data)||!s||!c?{data:[]}:{data:G.data.filter(h=>h.classLevelSubclasses.some(z=>z.classLevel.toString()===s&&z.subclassLetter===c))},[G,s,c]),_=f.useMemo(()=>{if((w==null?void 0:w.status)!=="success")return[];const h=new Date,z=ge(ke("2024-09-01"),{weekStartsOn:1}),I=xe(h,{weekStartsOn:1})-xe(z,{weekStartsOn:1})+1,$e=w.data.filter(S=>(S.date?xe(ke(S.date),{weekStartsOn:1})-xe(z,{weekStartsOn:1})+1:I)===u),Qe=h.getDay(),mt=Qe===0?6:Qe-1,Pe=new Date(h);return Pe.setDate(h.getDate()-mt),Pe.setHours(0,0,0,0),$e.map(S=>{var Ke,Xe,et,tt,st,at;const Fe=it.indexOf(S.dayOfWeek);if(Fe===-1)return null;const we=new Date(Pe);we.setDate(Pe.getDate()+Fe);const[xt,ht]=S.startTime.split(":").map(Number);we.setHours(xt,ht,0,0);const Be=new Date(we);return Be.setMinutes(Be.getMinutes()+S.numberOfPeriods*45),{id:S._id,title:`${((Ke=S.subject)==null?void 0:Ke.name)||"Unknown"} (${S.location})`,start:we,end:Be,extendedProps:{classLevel:((Xe=S.classLevel)==null?void 0:Xe._id)||S.classLevel,classLevelName:((et=S.classLevel)==null?void 0:et.name)||"N/A",subclassLetter:S.subclassLetter,subject:((tt=S.subject)==null?void 0:tt._id)||S.subject,subjectName:((st=S.subject)==null?void 0:st.name)||"N/A",teacher:((at=S.teacher)==null?void 0:at._id)||S.teacher,teacherName:S.teacher?`${S.teacher.firstName} ${S.teacher.lastName}`.trim():"N/A",dayOfWeek:S.dayOfWeek,startTime:S.startTime,numberOfPeriods:S.numberOfPeriods,location:S.location}}}).filter(S=>S!==null)},[w,u]),K=f.useCallback(h=>{l(h),r(""),o("")},[]),E=f.useCallback(h=>{r(h),o("")},[]),oe=f.useCallback(h=>{o(h)},[]),X=f.useCallback(()=>n?M.classLevel?M.subclassLetter?M.subject?M.teacher?M.dayOfWeek?M.startTime?/^\d{2}:\d{2}$/.test(M.startTime)?!M.numberOfPeriods||M.numberOfPeriods<1?"Number of periods must be at least 1":Number.isInteger(Number(M.numberOfPeriods))?M.location?"":"Location is required":"Number of periods must be an integer":"Start time must be in HH:MM format":"Start time is required":"Day of week is required":"Teacher is required":"Subject is required":"Subclass is required":"Class level is required":"User not authenticated. Please log in.",[M,n]),pe=f.useCallback(async()=>{const h=X();if(h){N(h),W(!0);return}const z={...M,numberOfPeriods:parseInt(M.numberOfPeriods,10),createdBy:n};try{const I=await A(V.TIMETABLE,"POST",z);(I==null?void 0:I.status)==="success"?(await Y(`${V.TIMETABLE}?classLevel=${s}&subclassLetter=${c}`,"GET"),N("Timetable added successfully"),g(!1),$({classLevel:"",subclassLetter:"",subject:"",teacher:"",dayOfWeek:"",startTime:"",numberOfPeriods:1,location:""})):N((I==null?void 0:I.message)||J||"Failed to add timetable")}catch(I){N(J||I.message||"Failed to add timetable")}W(!0)},[A,J,X,n,Y,s,c]),Oe=f.useCallback(async()=>{if(!k)return;const h=X();if(h){N(h),W(!0);return}const z={...M,numberOfPeriods:parseInt(M.numberOfPeriods,10),createdBy:n};try{const I=await he(`${V.TIMETABLE}/${k._id}`,"PUT",z);(I==null?void 0:I.status)==="success"?(await Y(`${V.TIMETABLE}?classLevel=${s}&subclassLetter=${c}`,"GET"),N("Timetable updated successfully"),C(!1),d(!1),$({classLevel:"",subclassLetter:"",subject:"",teacher:"",dayOfWeek:"",startTime:"",numberOfPeriods:1,location:""}),q(null)):N((I==null?void 0:I.message)||ce||"Failed to update timetable")}catch(I){N(ce||I.message||"Failed to update timetable")}W(!0)},[he,ce,k,X,n,Y,s,c]),Me=f.useCallback(async()=>{if(k){try{const h=await B(`${V.TIMETABLE}/${k._id}`,"DELETE");(h==null?void 0:h.status)==="success"?(await Y(`${V.TIMETABLE}?classLevel=${s}&subclassLetter=${c}`,"GET"),N((h==null?void 0:h.data)||"Timetable deleted successfully"),C(!1),d(!1),q(null)):N((h==null?void 0:h.message)||me||"Failed to delete timetable")}catch(h){N(me||h.message||"Failed to delete timetable")}W(!0)}},[B,me,k,Y,s,c]),Ne=f.useCallback(h=>{var I;const z=(I=w==null?void 0:w.data)==null?void 0:I.find($e=>$e._id===h.event.id);z&&(q(z),d(!0))},[w]),Ae=f.useCallback(()=>{var h,z,I;k&&($({classLevel:((h=k.classLevel)==null?void 0:h._id)||k.classLevel,subclassLetter:k.subclassLetter,subject:((z=k.subject)==null?void 0:z._id)||k.subject,teacher:((I=k.teacher)==null?void 0:I._id)||k.teacher,dayOfWeek:k.dayOfWeek,startTime:k.startTime,numberOfPeriods:k.numberOfPeriods,location:k.location}),d(!1),C(!0))},[k]),_e=R||v||ue||fe||ie||de||je,Ie=(w==null?void 0:w.status)==="failed"?w.message:ne||L||T||le||J||ce||me;return{calendarEvents:_,selectedSection:a,setSelectedSection:K,selectedClassLevel:s,setSelectedClassLevel:E,selectedSubclass:c,setSelectedSubclass:oe,selectedWeek:u,setSelectedWeek:m,addModalOpen:x,setAddModalOpen:g,editModalOpen:p,setEditModalOpen:C,viewModalOpen:i,setViewModalOpen:d,confirmationModalOpen:O,setConfirmationModalOpen:W,confirmationMessage:D,newSchedule:M,setNewSchedule:$,selectedTimetable:k,handleAddSchedule:pe,handleUpdateSchedule:Oe,handleDeleteSchedule:Me,handleEventClick:Ne,handleOpenEditModal:Ae,classLevelData:F,subjectData:U,teacherData:re,loading:_e,error:Ie,daysOfWeek:it,weeksPerTerm:12}},Kt=()=>{var se,re,ie,J;const n=ye(),t=Se(n.palette.mode),a=Ye(A=>{var de;return(de=A.users.user)==null?void 0:de._id})||"",l=Te("(max-width: 768px)"),s=Te("(max-width: 375px)"),{calendarEvents:r,selectedSection:c,setSelectedSection:o,selectedClassLevel:u,setSelectedClassLevel:m,selectedSubclass:x,setSelectedSubclass:g,selectedWeek:p,setSelectedWeek:C,addModalOpen:i,setAddModalOpen:d,editModalOpen:O,setEditModalOpen:W,viewModalOpen:D,setViewModalOpen:N,confirmationModalOpen:k,setConfirmationModalOpen:q,confirmationMessage:M,newSchedule:$,setNewSchedule:R,selectedTimetable:ne,handleAddSchedule:Y,handleUpdateSchedule:w,handleDeleteSchedule:v,handleEventClick:L,handleOpenEditModal:P,classLevelData:j,subjectData:ue,teacherData:T,loading:Z,error:G,daysOfWeek:fe,weeksPerTerm:le}=Qt({userId:a});return e.jsxs(H,{py:"20px",children:[e.jsx(qe,{title:"ADMIN TIMETABLE",subtitle:"Manage Class and Subclass Timetables",sx:{"& h1":{fontSize:s?"20px":"24px"},"& h2":{fontSize:s?"14px":"16px"}}}),e.jsxs(H,{mb:"20px",display:"flex",gap:"20px",alignItems:"center",flexWrap:"wrap",children:[e.jsxs(ee,{sx:{minWidth:150},children:[e.jsx(ae,{id:"section-select-label",children:"Section"}),e.jsxs(te,{labelId:"section-select-label",value:c,label:"Section",onChange:A=>o(A.target.value),children:[e.jsx(y,{value:"",children:"All"}),e.jsx(y,{value:"Primary",children:"Primary"}),e.jsx(y,{value:"Secondary",children:"Secondary"})]})]}),e.jsxs(ee,{sx:{minWidth:150},children:[e.jsx(ae,{id:"class-level-select-label",children:"Class Level"}),e.jsxs(te,{labelId:"class-level-select-label",value:u,label:"Class Level",onChange:A=>m(A.target.value),disabled:!((se=j==null?void 0:j.data)!=null&&se.length),children:[e.jsx(y,{value:"",children:"Select Class Level"}),(re=j==null?void 0:j.data)==null?void 0:re.map(A=>e.jsx(y,{value:A._id,children:A.name},A._id))]})]}),e.jsxs(ee,{sx:{minWidth:150},children:[e.jsx(ae,{id:"subclass-select-label",children:"Subclass"}),e.jsxs(te,{labelId:"subclass-select-label",value:x,label:"Subclass",onChange:A=>g(A.target.value),disabled:!u,children:[e.jsx(y,{value:"",children:"Select Subclass"}),(J=(ie=j==null?void 0:j.data)==null?void 0:ie.find(A=>A._id===u))==null?void 0:J.subclasses.map(A=>e.jsx(y,{value:A.letter,children:A.letter},A.letter))]})]}),e.jsxs(H,{display:"flex",alignItems:"center",gap:"10px",children:[e.jsx(be,{variant:"contained",onClick:()=>p>1&&C(p-1),disabled:p===1,sx:{backgroundColor:t.blueAccent[700]},children:"Previous Week"}),e.jsxs(b,{variant:"h6",children:["Week ",p]}),e.jsx(be,{variant:"contained",onClick:()=>p<le&&C(p+1),disabled:p===le,sx:{backgroundColor:t.blueAccent[700]},children:"Next Week"})]}),e.jsx(dt,{content:"Add Timetable",onClick:()=>d(!0),disabled:!u||!x,sx:{backgroundColor:t.greenAccent[500]}})]}),e.jsx(H,{children:Z?e.jsx(Ue,{}):G?e.jsx(b,{color:"error",children:G}):r.length>0?e.jsx(Ve,{height:s?"45vh":l?"50vh":"75vh",plugins:[Ge,ze],headerToolbar:{left:"prev,next today",center:"title",right:""},initialView:"timeGridWeek",editable:!1,selectable:!1,dayMaxEvents:!0,events:r,eventClick:L,slotMinTime:"07:00:00",slotMaxTime:"18:00:00",allDaySlot:!1}):e.jsx(b,{children:"No timetable available for selected filters."})}),e.jsx(Rt,{open:i,onClose:()=>{d(!1),R({classLevel:"",subclassLetter:"",subject:"",teacher:"",dayOfWeek:"",startTime:"",numberOfPeriods:1,location:""})},onConfirm:Y,newSchedule:$,setNewSchedule:R,classLevelData:j,subjectData:ue,teacherData:T,isLoading:Z,daysOfWeek:fe}),e.jsx(Zt,{open:O,onClose:()=>{W(!1),setSelectedTimetable(null)},onConfirm:w,onDelete:v,newSchedule:$,setNewSchedule:R,classLevelData:j,subjectData:ue,teacherData:T,isLoading:Z,daysOfWeek:fe}),e.jsx(Jt,{open:D,onClose:()=>{N(!1),setSelectedTimetable(null)},onEdit:P,timetable:ne,classLevelData:j,subjectData:ue,teacherData:T}),e.jsx(Re,{open:k,onClose:()=>q(!1),title:"Timetable Operation",message:M,isLoading:Z})]})},Xt=()=>{const t=Ye(a=>a.users.user).role;return e.jsx("div",{children:t==="student"?e.jsx(Bt,{}):t==="teacher"?e.jsx(qt,{}):e.jsx(Kt,{})})},js=jt(Xt);export{js as default};
