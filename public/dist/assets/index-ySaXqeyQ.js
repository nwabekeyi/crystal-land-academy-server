import{r as l,j as e,a as U,e as w,q as _}from"./index-DcQAmZqM.js";import{t as S,M as L}from"./modal-Bx5E4aGt.js";import{u as D}from"./useApi-B9Yyy0fd.js";import{A as P,a as q,d as H,b as W}from"./ExpandMore-Duo3F7Yk.js";import{g as z,a as B,u as Y,_ as F,b as A,s as G,d as V,e as J,j as R,T as m,y as K,w as g,z as b}from"./TextField-V3aLgS7-.js";import{H as Q}from"./Header-BJm81-b5.js";import{C as X}from"./confirmationModal-CRjUnvzU.js";import{A as Z}from"./index-v5rfuNCQ.js";import{M as ee}from"./MenuItem-CsvhMZkn.js";import"./IconButton-Cj9o54KV.js";import"./useSlot-TRE_1YU3.js";import"./CircularProgress-BpsNKowr.js";import"./index-DMHo4dG6.js";import"./loadingButton-BkNv9NN-.js";function se(t){return z("MuiAccordionActions",t)}B("MuiAccordionActions",["root","spacing"]);const te=["className","disableSpacing"],oe=t=>{const{classes:o,disableSpacing:r}=t;return J({root:["root",!r&&"spacing"]},se,o)},re=G("div",{name:"MuiAccordionActions",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[o.root,!r.disableSpacing&&o.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",variants:[{props:t=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),ne=l.forwardRef(function(o,r){const n=Y({props:o,name:"MuiAccordionActions"}),{className:a,disableSpacing:i=!1}=n,c=F(n,te),d=A({},n,{disableSpacing:i}),x=oe(d);return e.jsx(re,A({className:V(x.root,a),ref:r,ownerState:d},c))}),ae=({title:t,details:o,actions:r=null,defaultExpanded:n=!1})=>{const a=R(),i=S(a.palette.mode);return e.jsxs(P,{defaultExpanded:n,sx:{backgroundColor:a.palette.mode==="light"?i.grey[900]:i.primary[500]},children:[e.jsx(q,{expandIcon:e.jsx(H,{}),"aria-controls":`${t.replace(/\s+/g,"-").toLowerCase()}-content`,id:`${t.replace(/\s+/g,"-").toLowerCase()}-header`,children:e.jsx(m,{variant:"h6",sx:{color:i.blueAccent[200],fontWeight:"bold",fontSize:"1.2rem"},children:t})}),e.jsx(W,{children:typeof o=="string"?e.jsx(m,{children:o}):o}),r&&e.jsx(ne,{sx:{justifyContent:"center",marginTop:2},children:r.map((c,d)=>e.jsx(K,{onClick:c.onClick,variant:"contained",color:"primary",children:c.label},d))})]})};function Ce(){const t=R(),o=S(t.palette.mode),r=U(s=>s.users.user),{loading:n,data:a,error:i,callApi:c}=D(),[d,x]=l.useState([]),[u,T]=l.useState([]),[M,h]=l.useState(!1),[f,v]=l.useState({reviewText:"",rating:""}),[$,y]=l.useState(!1);l.useEffect(()=>{console.log("called"),c(`${w.COHORT}/instructors/${r.cohort}`,"GET")},[]),l.useEffect(()=>{a&&Array.isArray(a.data)&&x(a.data)},[a]);const I=s=>{T(s),h(!0)},N=s=>{y(!1)},j=()=>{h(!1),v({reviewText:"",rating:""})},C=s=>{const{name:p,value:k}=s.target;v(O=>({...O,[p]:k}))},E=async()=>{const s={userId:r._id,reviewText:f.reviewText,rating:Number(f.rating)};try{await c(`${w.REVIEW}/${u._id}`,"POST",s),console.log("Review submitted successfully"),y(!0)}catch(p){console.error("Error submitting review:",p)}finally{j()}};return n?e.jsx(_,{}):e.jsxs(g,{m:"30px",children:[e.jsx(Q,{title:"YOUR INSTRUCTORS",subtitle:""}),i&&e.jsx(m,{children:"Error fetching instructors: This might be due to network issues"}),d.length<1&&e.jsx(m,{children:"You have not been assigned an instrcutor yet"}),d.map((s,p)=>e.jsx(ae,{title:`${s.firstName} ${s.lastName}`,details:e.jsxs(g,{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",children:[e.jsx(Z,{src:s.profilePictureUrl,alt:`${s.firstName} ${s.lastName}`,sx:{width:120,height:120,mb:2}}),e.jsxs(g,{children:[e.jsx(m,{variant:"body2",color:o.grey[100],children:s.role}),e.jsx(m,{variant:"body2",color:o.grey[100],mt:"5px",children:s.program})]})]}),actions:[{label:"Review",onClick:()=>I(s)},{label:"Send Message",onClick:()=>console.log("Send Message clicked")}]},p)),e.jsx(L,{open:M,onClose:j,title:`Review ${u==null?void 0:u.firstName} ${u==null?void 0:u.lastName}`,onConfirm:E,children:e.jsxs(g,{display:"flex",flexDirection:"column",gap:"16px",children:[e.jsx(b,{name:"reviewText",label:"Review",variant:"outlined",multiline:!0,rows:4,value:f.reviewText,onChange:C,required:!0}),e.jsx(b,{name:"rating",label:"Rating",variant:"outlined",select:!0,value:f.rating,onChange:C,required:!0,children:[1,2,3,4,5].map(s=>e.jsx(ee,{value:s,children:s},s))})]})}),e.jsx(X,{open:$,onClose:N,isLoading:n,title:"Instructor review confirmation",message:i?"Error submitting instructor review!":"Instructor review submitted successfully!"})]})}export{Ce as default};
