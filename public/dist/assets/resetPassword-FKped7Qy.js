import{r as t,z as S,f as F,j as s,e as I}from"./index-B2VsWHi0.js";import{H as C,F as W}from"./Header-BrTY2H3T.js";import{L as k}from"./loadingButton-Dl_WVHvC.js";import{u as E}from"./useApi-D0p11L1B.js";import{M}from"./modal-DX3xw_qP.js";import{B as T}from"./backgroundWithHome-DRKUpJfQ.js";import{v as n,T as f,y as p}from"./TextField-D0e7SfFy.js";import{A}from"./Alert-BHeNU0ye.js";import"./index.esm-chYf2jgR.js";import"./CircularProgress-DYARFY18.js";import"./IconButton-C4sp_Nok.js";import"./index-BS_1Un3d.js";import"./Tooltip-DoEd_e_4.js";import"./useSlot-87IwQkO8.js";const B=()=>{const[r,x]=t.useState(""),[i,h]=t.useState(""),[l,o]=t.useState(""),[g,d]=t.useState(!1),[c]=S(),m=c.get("token"),b=c.get("role"),u=F(),{loading:y,error:w,callApi:R}=E(),j=()=>{d(!1),u("/")},v=()=>{u("/signin")},P=async e=>{if(e.preventDefault(),o(""),!m){o("Invalid or missing token.");return}if(!b){o("Invalid or missing role.");return}if(r!==i){o("Passwords do not match.");return}try{const a=await R(`${I.RESET_PASSWORD}?token=${encodeURIComponent(m)}`,"POST",{newPassword:r});a&&a.status==="success"&&d(!0)}catch{o(w||"Failed to reset password. Please try again.")}};return s.jsxs("div",{children:[s.jsx(C,{}),s.jsx(n,{sx:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:"30px",mx:2},children:s.jsxs(n,{sx:{p:3,textAlign:"start",backgroundColor:"rgba(255, 255, 255, 0.8)",boxShadow:10,borderRadius:2,backdropFilter:"blur(10px)",maxWidth:"400px",width:"100%",border:"1px solid rgba(255, 255, 255, 0.18)"},children:[s.jsx(f,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"600",color:"#15131D",fontFamily:"Inter, Roboto, sans-serif"},children:"Reset Password"}),s.jsx(f,{variant:"subtitle1",sx:{mb:3,color:"text.secondary",fontFamily:"Inter, Roboto, sans-serif"},children:"Enter your new password below."}),s.jsxs("form",{onSubmit:P,children:[s.jsx(p,{label:"New Password",type:"password",fullWidth:!0,variant:"outlined",value:r,onChange:e=>x(e.target.value),required:!0,sx:{mb:2,"& label":{fontFamily:"Inter, Roboto, sans-serif"},"& input":{fontFamily:"Inter, Roboto, sans-serif"}}}),s.jsx(p,{label:"Confirm New Password",type:"password",fullWidth:!0,variant:"outlined",value:i,onChange:e=>h(e.target.value),required:!0,sx:{mb:3,"& label":{fontFamily:"Inter, Roboto, sans-serif"},"& input":{fontFamily:"Inter, Roboto, sans-serif"}}}),s.jsx(k,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,size:"large",isLoading:y,sx:{py:1.5,fontSize:"1rem",fontWeight:"600",textTransform:"none",fontFamily:"Inter, Roboto, sans-serif"},children:"Reset Password"})]}),l&&s.jsx(A,{severity:"error",sx:{mt:3,fontFamily:"Inter, Roboto, sans-serif"},children:l})]})}),s.jsx(W,{}),s.jsx(M,{open:g,onClose:j,title:"Password Reset Successful",onConfirm:v,sx:{"& .MuiTypography-root":{fontFamily:"Inter, Roboto, sans-serif"}},children:s.jsx(n,{sx:{fontFamily:"Inter, Roboto, sans-serif"},children:s.jsx("p",{children:"Password reset successful. Do you want to login?"})})})]})},V=T(B);export{V as default};
