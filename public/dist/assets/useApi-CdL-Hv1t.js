import{r as a}from"./index-DJ40OD_I.js";const d=()=>{const[g,i]=a.useState(!1),[u,p]=a.useState(""),[c,o]=a.useState(null),f=a.useCallback(async(m,h="GET",s=null,w={})=>{i(!0),o(null);const l=sessionStorage.getItem("accessToken"),r={...w.headers};l&&(r.Authorization=`Bearer ${l}`),s instanceof FormData||(r["Content-Type"]="application/json");const S={method:h,headers:r,body:s&&!(s instanceof FormData)?JSON.stringify(s):s};try{const e=await fetch(m,S);if(e.ok){const t=e.headers.get("Content-Type");let n;return t&&t.includes("application/json")?n=await e.json():n=await e.text(),p(n),n}else{let t=await e.json();console.log(t),t&&t.message&&(o(t.message||"Something went wrong"),console.log(c))}}catch(e){return o(e.message||"Something went wrong"),null}finally{i(!1)}},[]);return{loading:g,data:u,error:c,callApi:f}};export{d as u};
