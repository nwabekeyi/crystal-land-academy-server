import{r as o,e as k,j as e,f as b}from"./index-BO-TmkzE.js";import{L as A}from"./loadingButton-CiJH9dFC.js";import{u as E}from"./useApi-bPe3HYn1.js";import{H as L,F as P}from"./Header-BL2LeH0q.js";import{B as C}from"./backgroundWithHome-dgdauFgW.js";import{v as c,T as i,y as B}from"./TextField-CigEBK4R.js";import{A as g}from"./Alert-yflAxarF.js";import"./CircularProgress-oo0vmEJK.js";import"./index-BgMV0__q.js";import"./index-DybMr2Pp.js";import"./index-DexhcXPq.js";import"./modal-CG0C6vpP.js";import"./IconButton-DnpiNGo6.js";import"./Tooltip-BcaN_CXa.js";import"./islamic_learning-pANRDR7Y.js";import"./useSlot-DtaxXO1z.js";const F=()=>{const[a,m]=o.useState(""),[u,l]=o.useState(""),[t,d]=o.useState(!1),[f,h]=o.useState(""),[s,p]=o.useState(0),{loading:y,error:j,callApi:w}=E(),v=k();o.useEffect(()=>{let r;return t&&s>0&&(r=setInterval(()=>{p(n=>{const x=n-1;return x<=0&&d(!1),x})},1e3)),()=>clearInterval(r)},[t,s]);const S=async r=>{if(r.preventDefault(),l(""),!a)return l("Please enter your email");const n=await w(b.PASSWORD_LINK,"POST",{email:a});n&&n.status==="success"?(l("Password reset link sent. Kindly check your email!"),m(""),d(!0),p(60)):h("Password link not sent, something went wrong or you can check if your email is correctly inputted")};return e.jsxs(c,{children:[e.jsx(L,{}),e.jsx(c,{sx:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:"30px",mx:{xs:4,sm:4,md:0}},children:e.jsxs(c,{sx:{p:3,textAlign:"start",backgroundColor:"white",boxShadow:10,borderRadius:2},children:[e.jsx(i,{variant:"h5",color:"#000",gutterBottom:!0,children:"Forgot your password?"}),e.jsx(i,{variant:"body2",color:"textSecondary",mb:2,children:"Enter your email and we will send you a password reset link."}),u&&e.jsx(g,{severity:"success",children:u}),j&&e.jsx(g,{severity:"error",children:f}),e.jsxs("form",{onSubmit:S,children:[e.jsx(B,{fullWidth:!0,label:"Email",variant:"outlined",type:"email",margin:"normal",value:a,onChange:r=>m(r.target.value)}),e.jsx(A,{type:"submit",variant:"contained",fullWidth:!0,isLoading:y,disabled:t,sx:{filter:t?"blur(0.1px)":"none",cursor:t?"not-allowed":"pointer"},children:t?"Reset Link Sent":"Request Reset Link"})]}),t&&s>0&&e.jsxs(i,{variant:"body2",color:"textSecondary",sx:{mt:2,textAlign:"center"},children:["You can resend the link in ",s," seconds."]}),e.jsx(i,{variant:"body2",color:"primary",sx:{mt:2,textAlign:"center",cursor:"pointer"},onClick:()=>v("/signin"),children:"Back to Login"})]})}),e.jsx(P,{})]})},R=C(F),U=()=>e.jsx(R,{});export{U as default};
