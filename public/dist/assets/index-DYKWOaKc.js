import{a as v,r as o,j as e}from"./index-CIScX54F.js";import{t as b}from"./modal-Bd79Xm9G.js";import{w as g}from"./dasboardPagesContainer-DdeC4KVC.js";import{H as w}from"./Header-D8IA577C.js";import{u as R}from"./useApi-uVIcg3lr.js";import{j as S,v as n,T as s}from"./TextField-CZuLzl2E.js";import{u as E}from"./useMediaQuery-B6ur4llP.js";import{G as l}from"./index-CxSpOSMj.js";import"./IconButton-Dl6X1a01.js";import"./index-l7GPTq0F.js";import"./loadingButton-BnkWMuOr.js";import"./CircularProgress-DnqEq3f4.js";import"./MenuItem-CNcsPEK9.js";import"./confirmationModal-DzpjYeCc.js";import"./crystal-land-log-removebg-DVF-nlbN.js";import"./useSlot-CpSlXh6x.js";const T=()=>{const m=S(),p=b(m.palette.mode),u=E(m.breakpoints.down("sm")),{callApi:h}=R(),a=v(t=>{var r;return(r=t.users)==null?void 0:r.user}),[d,f]=o.useState([]),[y,x]=o.useState(!0);console.log("ðŸ‘¤ User:",a);const[c,j]=o.useState(null);return o.useEffect(()=>{(async()=>{var r;try{const i=await h("http://localhost:5000/api/v1/academicYears/current","GET");(r=i==null?void 0:i.data)!=null&&r._id&&j(i.data._id)}catch(i){console.error("Failed to fetch academic year:",i)}})()},[]),o.useEffect(()=>{if(!(a!=null&&a._id)||!c){console.log("â›” Skipping fetch because values are missing:",a==null?void 0:a._id,c);return}(async()=>{x(!0);try{const r=await h(`http://localhost:5000/api/v1/reviews/teacher/${a._id}/year/${c}`,"GET");r!=null&&r.data&&f(r.data)}catch(r){console.error("âŒ Error fetching teacher reviews:",r)}finally{x(!1)}})()},[a==null?void 0:a._id,c]),e.jsxs(n,{children:[e.jsx(l,{item:!0,xs:12,children:e.jsx(w,{title:"INSTRUCTOR REVIEWS",subtitle:"Student Reviews for Your Classes"})}),y?e.jsx(s,{children:"Loading reviews..."}):d.length>0?u?e.jsx(n,{children:d.map(t=>e.jsxs(n,{p:2,mb:2,borderRadius:"8px",boxShadow:2,bgcolor:p.primary[400],children:[e.jsxs(s,{variant:"body1",children:["Class: ",t.className]}),e.jsxs(s,{variant:"body1",children:["Rating: ",t.rating," / 5"]}),e.jsx(s,{variant:"body2",children:t.reviewText||"No review provided"})]},t.id))}):e.jsx(l,{container:!0,spacing:2,children:d.map(t=>e.jsx(l,{item:!0,xs:12,sm:6,children:e.jsxs(n,{p:2,borderRadius:"8px",boxShadow:2,bgcolor:p.primary[400],children:[e.jsxs(s,{variant:"body1",children:["Class: ",t.className]}),e.jsxs(s,{variant:"body1",children:["Rating: ",t.rating," / 5"]}),e.jsx(s,{variant:"body2",children:t.reviewText||"No review provided"}),e.jsx(s,{variant:"body2",sx:{color:"text.secondary"},children:new Date(t.createdAt).toLocaleDateString()})]})},t.id))}):e.jsx(s,{children:"No reviews found for this academic year."})]})},M=g(T);export{M as default};
