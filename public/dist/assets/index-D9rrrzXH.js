import{j as e,r as u,a as de,C as qe,i as we,e as X}from"./index-CeJqQt67.js";import{r as ie,t as b,M as re}from"./modal-CWrsGmPw.js";import{c as ue,a as vt,g as bt,u as St,_ as Xe,ab as Ue,ac as Ct,am as At,X as kt,o as wt,b as N,s as me,d as ce,h as Ke,e as Mt,an as Dt,ao as Et,q as oe,j as S,v as a,T as i,w as xe,y as F,x as Rt,Z as Ce,$ as Ae,a0 as ke}from"./TextField-CQQTvPbq.js";import{H as Lt}from"./Header-C9JBMvsB.js";import{G as Me,L as he,a as pe,d as De,C as fe,b as ge,A as Qe}from"./index-BG6wCPD7.js";import{_ as Ze}from"./nivo-pie.es-CUYKe8a3.js";import{p as et}from"./nivo-line.es-CQf-Fj_S.js";import{f as Nt,F as Ee,m as Re,a as Le,b as tt,c as Ne}from"./main-YSodVIsN.js";import{I as Pe}from"./IconButton-WNpSLIu_.js";import{X as Pt}from"./nivo-bar-CSa-Kz1G.js";import{u as Tt}from"./useAdminData-Bg5n2G7o.js";import{u as je}from"./useApi-DGN0ddUE.js";import{u as Ye}from"./useMediaQuery-Dw2_h2Ss.js";import{w as Ft}from"./dasboardPagesContainer-BYUuQigG.js";import{C as st,A as ee}from"./confirmationModal-DZkXcdoz.js";import{C as zt}from"./CircularProgress-CObE2qYY.js";import{M as ne}from"./MenuItem-0HapAoKS.js";import"./index-9yRw9VkQ.js";import"./loadingButton-DhYhvGRr.js";import"./crystal-land-log-removebg-DVF-nlbN.js";import"./useSlot-OTOZFPwB.js";import"./nivo-legends.es-CLvYBtc6.js";import"./_baseIsEqual-HAhCw0_W.js";import"./_baseForOwn-ClqDpewb.js";import"./_baseSlice-z0Zd1-Ev.js";const Ot={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},$t=ue(e.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),Wt=ue(e.jsx("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");function It(s){return bt("MuiRating",s)}const te=vt("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),Vt=["value"],Bt=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function Ht(s){const t=s.toString().split(".")[1];return t?t.length:0}function Se(s,t){if(s==null)return s;const n=Math.round(s/t)*t;return Number(n.toFixed(Ht(t)))}const _t=s=>{const{classes:t,size:n,readOnly:r,disabled:o,emptyValueFocused:d,focusVisible:l}=s,m={root:["root",`size${Ke(n)}`,o&&"disabled",l&&"focusVisible",r&&"readOnly"],label:["label","pristine"],labelEmptyValue:[d&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return Mt(m,It,t)},Jt=me("span",{name:"MuiRating",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:n}=s;return[{[`& .${te.visuallyHidden}`]:t.visuallyHidden},t.root,t[`size${Ke(n.size)}`],n.readOnly&&t.readOnly]}})(({theme:s,ownerState:t})=>N({display:"inline-flex",position:"relative",fontSize:s.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",width:"min-content",WebkitTapHighlightColor:"transparent",[`&.${te.disabled}`]:{opacity:(s.vars||s).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${te.focusVisible} .${te.iconActive}`]:{outline:"1px solid #999"},[`& .${te.visuallyHidden}`]:Ot},t.size==="small"&&{fontSize:s.typography.pxToRem(18)},t.size==="large"&&{fontSize:s.typography.pxToRem(30)},t.readOnly&&{pointerEvents:"none"})),nt=me("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:s},t)=>[t.label,s.emptyValueFocused&&t.labelEmptyValueActive]})(({ownerState:s})=>N({cursor:"inherit"},s.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"})),Yt=me("span",{name:"MuiRating",slot:"Icon",overridesResolver:(s,t)=>{const{ownerState:n}=s;return[t.icon,n.iconEmpty&&t.iconEmpty,n.iconFilled&&t.iconFilled,n.iconHover&&t.iconHover,n.iconFocus&&t.iconFocus,n.iconActive&&t.iconActive]}})(({theme:s,ownerState:t})=>N({display:"flex",transition:s.transitions.create("transform",{duration:s.transitions.duration.shortest}),pointerEvents:"none"},t.iconActive&&{transform:"scale(1.2)"},t.iconEmpty&&{color:(s.vars||s).palette.action.disabled})),Gt=me("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:s=>Dt(s)&&s!=="iconActive",overridesResolver:(s,t)=>{const{iconActive:n}=s;return[t.decimal,n&&t.iconActive]}})(({iconActive:s})=>N({position:"relative"},s&&{transform:"scale(1.2)"}));function qt(s){const t=Xe(s,Vt);return e.jsx("span",N({},t))}function Ge(s){const{classes:t,disabled:n,emptyIcon:r,focus:o,getLabelText:d,highlightSelectedOnly:l,hover:m,icon:x,IconContainerComponent:p,isActive:R,itemValue:g,labelProps:k,name:j,onBlur:M,onChange:D,onClick:w,onFocus:c,readOnly:h,ownerState:f,ratingValue:C,ratingValueRounded:z}=s,W=l?g===C:g<=C,J=g<=m,L=g<=o,ye=g===z,K=Ue(),V=e.jsx(Yt,{as:p,value:g,className:ce(t.icon,W?t.iconFilled:t.iconEmpty,J&&t.iconHover,L&&t.iconFocus,R&&t.iconActive),ownerState:N({},f,{iconEmpty:!W,iconFilled:W,iconHover:J,iconFocus:L,iconActive:R}),children:r&&!W?r:x});return h?e.jsx("span",N({},k,{children:V})):e.jsxs(u.Fragment,{children:[e.jsxs(nt,N({ownerState:N({},f,{emptyValueFocused:void 0}),htmlFor:K},k,{children:[V,e.jsx("span",{className:t.visuallyHidden,children:d(g)})]})),e.jsx("input",{className:t.visuallyHidden,onFocus:c,onBlur:M,onChange:D,onClick:w,disabled:n,value:g,id:K,type:"radio",name:j,checked:ye})]})}const Xt=e.jsx($t,{fontSize:"inherit"}),Ut=e.jsx(Wt,{fontSize:"inherit"});function Kt(s){return`${s} Star${s!==1?"s":""}`}const Qt=u.forwardRef(function(t,n){const r=St({name:"MuiRating",props:t}),{className:o,defaultValue:d=null,disabled:l=!1,emptyIcon:m=Ut,emptyLabelText:x="Empty",getLabelText:p=Kt,highlightSelectedOnly:R=!1,icon:g=Xt,IconContainerComponent:k=qt,max:j=5,name:M,onChange:D,onChangeActive:w,onMouseLeave:c,onMouseMove:h,precision:f=1,readOnly:C=!1,size:z="medium",value:W}=r,J=Xe(r,Bt),L=Ue(M),[ye,K]=Ct({controlled:W,default:d,name:"Rating"}),V=Se(ye,f),lt=At(),[{hover:O,focus:ae},Q]=u.useState({hover:-1,focus:-1});let Y=V;O!==-1&&(Y=O),ae!==-1&&(Y=ae);const{isFocusVisibleRef:Be,onBlur:ct,onFocus:dt,ref:ut}=kt(),[mt,ve]=u.useState(!1),He=u.useRef(),xt=wt(ut,He,n),ht=A=>{h&&h(A);const E=He.current,{right:P,left:le,width:G}=E.getBoundingClientRect();let q;lt?q=(P-A.clientX)/G:q=(A.clientX-le)/G;let $=Se(j*q+f/2,f);$=Et($,f,j),Q(B=>B.hover===$&&B.focus===$?B:{hover:$,focus:$}),ve(!1),w&&O!==$&&w(A,$)},pt=A=>{c&&c(A);const E=-1;Q({hover:E,focus:E}),w&&O!==E&&w(A,E)},_e=A=>{let E=A.target.value===""?null:parseFloat(A.target.value);O!==-1&&(E=O),K(E),D&&D(A,E)},ft=A=>{A.clientX===0&&A.clientY===0||(Q({hover:-1,focus:-1}),K(null),D&&parseFloat(A.target.value)===V&&D(A,null))},gt=A=>{dt(A),Be.current===!0&&ve(!0);const E=parseFloat(A.target.value);Q(P=>({hover:P.hover,focus:E}))},jt=A=>{if(O!==-1)return;ct(A),Be.current===!1&&ve(!1);const E=-1;Q(P=>({hover:P.hover,focus:E}))},[yt,Je]=u.useState(!1),Z=N({},r,{defaultValue:d,disabled:l,emptyIcon:m,emptyLabelText:x,emptyValueFocused:yt,focusVisible:mt,getLabelText:p,icon:g,IconContainerComponent:k,max:j,precision:f,readOnly:C,size:z}),I=_t(Z);return e.jsxs(Jt,N({ref:xt,onMouseMove:ht,onMouseLeave:pt,className:ce(I.root,o,C&&"MuiRating-readOnly"),ownerState:Z,role:C?"img":null,"aria-label":C?p(Y):null},J,{children:[Array.from(new Array(j)).map((A,E)=>{const P=E+1,le={classes:I,disabled:l,emptyIcon:m,focus:ae,getLabelText:p,highlightSelectedOnly:R,hover:O,icon:g,IconContainerComponent:k,name:L,onBlur:jt,onChange:_e,onClick:ft,onFocus:gt,ratingValue:Y,ratingValueRounded:V,readOnly:C,ownerState:Z},G=P===Math.ceil(Y)&&(O!==-1||ae!==-1);if(f<1){const q=Array.from(new Array(1/f));return e.jsx(Gt,{className:ce(I.decimal,G&&I.iconActive),ownerState:Z,iconActive:G,children:q.map(($,B)=>{const be=Se(P-1+(B+1)*f,f);return e.jsx(Ge,N({},le,{isActive:!1,itemValue:be,labelProps:{style:q.length-1===B?{}:{width:be===Y?`${(B+1)*f*100}%`:"0%",overflow:"hidden",position:"absolute"}}}),be)})},P)}return e.jsx(Ge,N({},le,{isActive:G,itemValue:P}),P)}),!C&&!l&&e.jsxs(nt,{className:ce(I.label,I.labelEmptyValue),ownerState:Z,children:[e.jsx("input",{className:I.visuallyHidden,value:"",id:`${L}-empty`,type:"radio",name:L,checked:V==null,onFocus:()=>Je(!0),onBlur:()=>Je(!1),onChange:_e}),e.jsx("span",{className:I.visuallyHidden,children:x})]})]}))}),Te=ue(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Fe=ue(e.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"}),"List");var ze={},Zt=oe;Object.defineProperty(ze,"__esModule",{value:!0});var rt=ze.default=void 0,es=Zt(ie()),ts=e;rt=ze.default=(0,es.default)((0,ts.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zm-8 2V5h2v6h1.17L12 13.17 9.83 11zm-6 7h14v2H5z"}),"DownloadOutlined");var Oe={},ss=oe;Object.defineProperty(Oe,"__esModule",{value:!0});var it=Oe.default=void 0,ns=ss(ie()),rs=e;it=Oe.default=(0,ns.default)((0,rs.jsx)("path",{d:"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29M20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3"}),"Groups");var $e={},is=oe;Object.defineProperty($e,"__esModule",{value:!0});var ot=$e.default=void 0,os=is(ie()),as=e;ot=$e.default=(0,os.default)((0,as.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H4V8l8 5 8-5zm-8-7L4 6h16z"}),"MailOutline");var We={},ls=oe;Object.defineProperty(We,"__esModule",{value:!0});var at=We.default=void 0,cs=ls(ie()),ds=e;at=We.default=(0,cs.default)((0,ds.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd");const y=({children:s,noFlex:t,height:n,moreStyles:r={}})=>{const o=S(),d=b(o.palette.mode);return e.jsxs(a,{backgroundColor:d.primary[400],p:"20px",borderRadius:"10px",textAlign:"center",display:!t&&"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",sx:{height:n||"100%",boxShadow:o.palette.mode==="light"?"0px 2px 10px rgba(0, 0, 0, 0.1)":"0px 4px 12px rgba(0, 0, 0, 0.3)",...r},children:[s," "]})},Ie=({children:s,...t})=>e.jsxs(Me,{container:!0,spacing:2,...t,children:[s," "]}),T=({children:s})=>e.jsxs(Me,{container:!0,item:!0,xs:12,spacing:2,children:[s," "]}),v=({children:s,...t})=>e.jsxs(Me,{item:!0,xs:12,...t,children:[s," "]}),us=()=>{const s=S(),t=b(s.palette.mode),{classLevels:n}=de(qe),r=n&&n.length>0?n.map(o=>{var d;return{id:o._id,label:o.name,value:((d=o.students)==null?void 0:d.length)||0}}):[];return e.jsx(a,{children:e.jsx("div",{style:{height:"350px"},children:r.length>0?e.jsx(Ze,{data:r,arcLinkLabel:"label",theme:{axis:{domain:{line:{stroke:t.grey[100]}},legend:{text:{fill:t.grey[100]}},ticks:{line:{stroke:t.grey[100],strokeWidth:1},text:{fill:t.grey[100]}}},legends:{text:{fill:t.grey[100]}},tooltip:{container:{background:t.primary[400],color:t.grey[100],fontSize:12}}},margin:{top:40,right:80,bottom:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:t.grey[100],arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},enableArcLabels:!1,arcLabelsRadiusOffset:.4,arcLabelsSkipAngle:7,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},tooltip:({datum:o})=>e.jsxs("div",{style:{background:t.primary[400],color:t.grey[100],padding:"5px 9px",borderRadius:"3px",fontSize:12},children:[o.label,": ",o.value]}),defs:[{id:"dots",type:"patternDots",background:"inherit",color:"rgba(255, 255, 255, 0.3)",size:4,padding:1,stagger:!0},{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.3)",rotation:-45,lineWidth:6,spacing:10}],legends:[{anchor:"bottom",direction:"row",justify:!1,translateX:0,translateY:56,itemsSpacing:0,itemWidth:100,itemHeight:18,itemTextColor:"#999",itemDirection:"left-to-right",itemOpacity:1,symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}],data:r.map(o=>({id:o.id,label:o.label}))}]}):e.jsx(a,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx(i,{color:t.grey[100],children:"No class data available"})})})})},ms=({isCustomLineColors:s=!1,isDashboard:t=!1})=>{const n=S(),r=u.useMemo(()=>b(n.palette.mode),[n.palette.mode]),o=l=>`hsl(${l*360/2%360}, 70%, 60%)`,d=[{id:"Primary",color:s?o(0):r.primary[500],data:[{x:"Sep",y:5e4},{x:"Oct",y:52e3},{x:"Nov",y:48e3},{x:"Dec",y:45e3},{x:"Jan",y:51e3},{x:"Feb",y:53e3},{x:"Mar",y:55e3},{x:"Apr",y:54e3},{x:"May",y:52e3},{x:"Jun",y:5e4}]},{id:"Secondary",color:s?o(1):r.blueAccent[500],data:[{x:"Sep",y:7e4},{x:"Oct",y:72e3},{x:"Nov",y:68e3},{x:"Dec",y:65e3},{x:"Jan",y:71e3},{x:"Feb",y:73e3},{x:"Mar",y:75e3},{x:"Apr",y:74e3},{x:"May",y:72e3},{x:"Jun",y:7e4}]}];return!d||d.length===0?e.jsx(a,{children:"Loading data..."}):e.jsxs(a,{width:"98%",height:t?"300px":"400px",children:[" ",e.jsx(et,{data:d,animate:!0,motionConfig:"default",theme:{axis:{domain:{line:{stroke:r.grey[100]}},legend:{text:{fill:r.grey[100],fontSize:8}},ticks:{line:{stroke:r.grey[100],strokeWidth:1},text:{fill:r.grey[100],fontSize:8}}},legends:{text:{fill:r.grey[100],fontSize:8}},tooltip:{container:{color:r.primary[500]}}},colors:s?{datum:"color"}:{scheme:"nivo"},margin:{top:50,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto",stacked:!1,reverse:!1},yFormat:" >-.2f",curve:"catmullRom",axisTop:null,axisRight:null,axisBottom:{tickSize:0,tickPadding:5,tickRotation:0,legend:t?void 0:"Month",legendOffset:36,legendPosition:"middle"},axisLeft:{tickValues:5,tickSize:3,tickPadding:5,tickRotation:0,legend:t?void 0:"Revenue ($)",legendOffset:-40,legendPosition:"middle"},enableGridX:!1,enableGridY:!1,pointSize:8,pointColor:{theme:"background"},pointBorderWidth:1,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]})]})},xs=()=>{const s=S(),t=b(s.palette.mode),n=[{id:"1",title:"Math Midterm Exam",start:"2025-07-10T09:00:00",end:"2025-07-10T11:00:00",allDay:!1},{id:"2",title:"School Sports Day",start:"2025-07-15",allDay:!0},{id:"3",title:"Science Club Meeting",start:"2025-07-20T15:00:00",end:"2025-07-20T16:30:00",allDay:!1},{id:"4",title:"Parent-Teacher Conference",start:"2025-07-25T10:00:00",end:"2025-07-25T15:00:00",allDay:!1},{id:"5",title:"School Holiday - Summer Break",start:"2025-08-01",end:"2025-08-15",allDay:!0},{id:"6",title:"Drama Club Rehearsal",start:"2025-07-22T16:00:00",end:"2025-07-22T18:00:00",allDay:!1}],[r,o]=u.useState(n),[d,l]=u.useState(!1),[m,x]=u.useState(""),[p,R]=u.useState(null),[g,k]=u.useState(!1);u.useEffect(()=>{const h=JSON.parse(localStorage.getItem("events"))||[];h.length>0&&o([...n,...h])},[]),u.useEffect(()=>{const h=r.filter(f=>!n.some(C=>C.id===f.id));h.length>0&&localStorage.setItem("events",JSON.stringify(h))},[r]);const j=h=>{R(h),l(!0)},M=()=>{if(m&&p){const h={id:`${p.dateStr}-${m}`,title:m,start:p.startStr,end:p.endStr,allDay:p.allDay},f=[...r,h];o(f),l(!1),x("")}},D=()=>{l(!1),x("")},w=h=>{if(window.confirm(`Are you sure you want to delete the event '${h.event.title}'`)){const f=r.filter(C=>C.id!==h.event.id);o(f)}},c=()=>{k(h=>!h)};return e.jsxs(a,{my:"10px",children:[e.jsxs(a,{display:"flex",justifyContent:"center",flexDirection:"column",children:[e.jsxs(a,{flex:"1 1 20%",backgroundColor:t.primary[400],py:"15px",borderRadius:"4px",sx:{width:"100%",height:"75vh",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs(a,{display:"flex",alignItems:"center",marginBottom:"10px",children:[e.jsx(Pe,{onClick:c,sx:{backgroundColor:t.blueAccent[500],"&:hover":{backgroundColor:t.blueAccent[700]},padding:"10px",borderRadius:"50%"},children:g?e.jsx(Te,{}):e.jsx(Fe,{})}),e.jsx(i,{variant:"h6",sx:{marginLeft:"10px",fontWeight:"800"},children:g?"Hide Events":"Show Events"})]}),g&&e.jsx(i,{variant:"h4",sx:{marginBottom:"10px"},children:"Events"}),g&&e.jsx(xe,{children:r.length===0?e.jsx(i,{children:"No events available"}):r.map(h=>e.jsx(he,{sx:{backgroundColor:t.blueAccent[500],margin:"10px 0",borderRadius:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.jsx(pe,{primary:h.title,secondary:e.jsx(i,{sx:{fontSize:"0.7em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Nt(h.start,{year:"numeric",month:"short",day:"numeric"})})})},h.id))})]}),e.jsx(a,{flex:"1 1 100%",sx:{width:"100%"},children:e.jsx(Ee,{height:"75vh",plugins:[Re,Le,tt,Ne],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},initialView:"dayGridMonth",editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,select:j,eventClick:w,events:r})})]}),e.jsx(re,{open:d,onClose:D,title:"Add Event",onConfirm:M,children:e.jsx(a,{p:"20px",children:e.jsx(F,{label:"Event Title",fullWidth:!0,value:m,onChange:h=>x(h.target.value),sx:{marginBottom:"20px"}})})})]})},hs=()=>{const s=S(),t=b(s.palette.mode),n=[{id:"Kindergarten",label:"Kindergarten",value:5e3},{id:"Nursery 1",label:"Nursery 1",value:4500},{id:"Nursery 2",label:"Nursery 2",value:4700},{id:"Primary 1",label:"Primary 1",value:6e3},{id:"Primary 2",label:"Primary 2",value:5800},{id:"Primary 3",label:"Primary 3",value:5600},{id:"Primary 4",label:"Primary 4",value:5500},{id:"Primary 5",label:"Primary 5",value:5400},{id:"Primary 6",label:"Primary 6",value:5300},{id:"JSS 1",label:"JSS 1",value:7e3},{id:"JSS 2",label:"JSS 2",value:6800},{id:"JSS 3",label:"JSS 3",value:6600},{id:"SS 1",label:"SS 1",value:7500},{id:"SS 2",label:"SS 2",value:7300},{id:"SS 3",label:"SS 3",value:7200}];return e.jsxs(a,{children:[e.jsx("div",{style:{height:"350px"},children:e.jsx(Ze,{data:n,theme:{axis:{domain:{line:{stroke:t.grey[100]}},legend:{text:{fill:t.grey[100]}},ticks:{line:{stroke:t.grey[100],strokeWidth:1},text:{fill:t.grey[100]}}},legends:{text:{fill:t.grey[100]}},tooltip:{container:{background:t.primary[400],color:t.grey[100],fontSize:12}}},margin:{top:40,right:80,bottom:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:t.grey[100],arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},enableArcLabels:!0,arcLabelsRadiusOffset:.4,arcLabelsSkipAngle:7,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},defs:[{id:"dots",type:"patternDots",background:"inherit",color:"rgba(255, 255, 255, 0.3)",size:4,padding:1,stagger:!0},{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.3)",rotation:-45,lineWidth:6,spacing:10}],legends:[{anchor:"bottom",direction:"row",justify:!1,translateX:0,translateY:56,itemsSpacing:0,itemWidth:100,itemHeight:18,itemTextColor:"#999",itemDirection:"left-to-right",itemOpacity:1,symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}],data:n.map(r=>({id:r.id,label:r.label}))}]})}),e.jsx(a,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:2,justifyContent:"center"},children:n.map(r=>e.jsxs(i,{sx:{color:t.grey[100],fontSize:12,minWidth:120},children:[r.label,": $",r.value.toLocaleString()]},r.id))})]})},ps=()=>{const s=S(),t=b(s.palette.mode),n=[{subject:"Math",score:85},{subject:"English",score:78},{subject:"Science",score:82},{subject:"History",score:75},{subject:"Civics",score:80}];return e.jsx("div",{style:{height:"350px"},children:e.jsx(Pt,{data:n,keys:["score"],indexBy:"subject",theme:{axis:{domain:{line:{stroke:t.grey[100]}},legend:{text:{fill:t.grey[100],fontSize:8}},ticks:{line:{stroke:t.grey[100],strokeWidth:1},text:{fill:t.grey[100],fontSize:8}}},legends:{text:{fill:t.grey[100],fontSize:8}}},margin:{top:50,right:20,bottom:50,left:60},padding:.3,colors:{scheme:"nivo"},animate:!0,motionConfig:"default",axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Subject",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Average Score (%)",legendPosition:"middle",legendOffset:-40},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]}})})},fs=()=>{const s=S(),t=b(s.palette.mode),{usersData:n}=de(qe),r=n.teachers&&n.teachers.length>0?n.teachers.map(o=>({name:`${o.firstName} ${o.lastName}`.trim(),subject:o.subject&&o.subject.length>0?o.subject[0].name:"No Subject",rating:o.rating||0})).sort((o,d)=>d.rating-o.rating).slice(0,5):[];return e.jsx(a,{sx:{height:"350px",overflowY:"auto"},children:r.length>0?e.jsx(xe,{children:r.map((o,d)=>e.jsx(he,{sx:{backgroundColor:t.primary[400],mb:1,borderRadius:"4px"},children:e.jsx(pe,{primary:`${o.name} (${o.subject})`,secondary:`Rating: ${o.rating}/5`,sx:{color:t.grey[100]}})},d))}):e.jsx(a,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx(i,{color:t.grey[100],children:"No teachers available"})})})},gs=()=>{const s=S(),t=b(s.palette.mode),[n,r]=u.useState(!0),[o,d]=u.useState(0),[l,m]=u.useState(0),[x,p]=u.useState(0),[R,g]=u.useState(null),{usersData:k,currentAcademicYear:j,unreadEnquiriesCount:M,loading:D,error:w}=Tt();if(u.useEffect(()=>{var f,C,z;k&&(j||j===null)&&(r(!1),d(((f=k.students)==null?void 0:f.length)||0),m(((C=k.teachers)==null?void 0:C.length)||0),p(((z=j==null?void 0:j.students)==null?void 0:z.length)||0)),w&&g(w.message||"An error occurred while fetching data.")},[k,j,w]),n||D)return e.jsx(we,{});if(R)return e.jsx(a,{m:"20px",children:e.jsxs(i,{variant:"h4",color:"error",children:["Error: ",R]})});const c={mt:"15px",fontWeight:"bold"};return e.jsxs(a,{m:"20px",children:[e.jsx(i,{variant:"h3",fontWeight:"600",mb:"20px",children:"School Administration Dashboard"}),e.jsxs(Ie,{children:[e.jsxs(T,{children:[e.jsx(v,{sm:6,md:3,children:e.jsxs(y,{children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Students"}),e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",mt:"25px",children:[e.jsx(it,{sx:{fontSize:"70px",color:t.blueAccent[200]}}),e.jsx(i,{variant:"h4",color:t.blueAccent[200],sx:c,children:`${o} students`}),e.jsx(i,{children:"Total students"})]})]})}),e.jsx(v,{sm:6,md:3,children:e.jsxs(y,{children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Teachers"}),e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",mt:"25px",children:[e.jsx(De,{sx:{fontSize:"70px",color:t.blueAccent[200]}}),e.jsx(i,{variant:"h4",color:t.blueAccent[200],sx:c,children:`${l} teachers`}),e.jsx(i,{children:"Total teachers"})]})]})}),e.jsx(v,{sm:6,md:3,children:e.jsxs(y,{children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",children:"New Students"}),e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",mt:"25px",children:[e.jsx(at,{sx:{fontSize:"70px",color:t.blueAccent[200]}}),e.jsx(i,{variant:"h4",color:t.blueAccent[200],sx:c,children:`${x} students`}),e.jsx(i,{children:"New students this academic year"})]})]})}),e.jsx(v,{sm:6,md:3,children:e.jsxs(y,{children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Unread Enquiries"}),e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",mt:"25px",children:[e.jsx(ot,{sx:{fontSize:"70px",color:t.blueAccent[200]}}),e.jsx(i,{variant:"h4",color:t.blueAccent[200],sx:c,children:M}),e.jsx(i,{children:"Total unread enquiries"})]})]})})]}),e.jsxs(T,{children:[e.jsx(v,{md:8,children:e.jsxs(y,{noFlex:!0,children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Revenue Generated"}),e.jsxs(a,{mt:"10px",children:[e.jsx(ms,{}),e.jsxs(i,{variant:"body1",textAlign:"center",mt:"10px",children:["Total Revenue: $",122e4.toLocaleString()]})]})]})}),e.jsx(v,{md:4,children:e.jsxs(y,{noFlex:!0,children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Outstanding Payments"}),e.jsx(a,{mt:"10px",children:e.jsx(hs,{})})]})})]}),e.jsxs(T,{children:[e.jsx(v,{md:4,children:e.jsxs(y,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",gutterBottom:!0,children:"Subject Stats"}),e.jsx(a,{mt:"10px",children:e.jsx(ps,{})})]})}),e.jsx(v,{md:4,children:e.jsxs(y,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",gutterBottom:!0,children:"Top Teachers"}),e.jsx(a,{mt:"10px",children:e.jsx(fs,{})})]})}),e.jsx(v,{md:4,children:e.jsxs(y,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",gutterBottom:!0,children:"Class Distribution"}),e.jsx(a,{mt:"10px",children:e.jsx(us,{})})]})})]}),e.jsx(T,{children:e.jsx(v,{md:12,children:e.jsxs(y,{noFlex:!0,children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",children:"School Activities"}),e.jsx(a,{mt:"10px",children:e.jsx(xs,{})})]})})})]})]})},U=({progress:s=.75,size:t=40})=>{const n=S(),r=b(n.palette.mode),o=s*360,l=(m=>m>=.75?r.greenAccent[400]:m>=.5?r.greenAccent[700]:r.redAccent[700])(s);return e.jsx(a,{sx:{background:`radial-gradient(${r.primary[400]} 55%, transparent 56%),
            conic-gradient(${l} 0deg ${o}deg, ${r.blueAccent[200]} ${o}deg 360deg),
            ${r.primary[400]}`,borderRadius:"50%",width:`${t}px`,height:`${t}px`}})};function H(){return{sessionProgress:66,termAttendance:95,feeStatus:{percentagePaid:80,totalOutstanding:200},nextClass:{subject:"Mathematics",date:"2025-06-23",time:"10:00 AM",location:"Room 12"},missedClasses:[{id:"1",subject:"English",date:"2025-06-10",time:"09:00 AM",location:"Room 5"},{id:"2",subject:"Science",date:"2025-06-12",time:"11:00 AM",location:"Lab 2"}],subjectPerformance:null,allResources:[{title:"Math Textbook",url:"https://example.com/math-textbook.pdf"},{title:"Science Notes",url:"https://example.com/science-notes.pdf"}],formatDateToDDMMYYYY:s=>new Date(s).toLocaleDateString("en-GB"),loading:!1,error:null}}const js=()=>{const{sessionProgress:s}=H(),t=s;return e.jsxs(a,{children:[e.jsx(i,{variant:"h6",fontWeight:"600",mb:"5px",children:"Session Progress"}),e.jsx(U,{size:"125",progress:t/100}),e.jsxs(i,{variant:"body2",mt:"10px",children:["Academic year completion: ",t,"%"]})]})},ys=()=>{const{termAttendance:s}=H(),t=s;return e.jsxs(a,{children:[e.jsx(i,{variant:"h6",fontWeight:"600",mb:"5px",children:"Term Attendance"}),e.jsx(U,{size:"125",progress:t/100}),e.jsxs(i,{variant:"body2",mt:"10px",children:["Current term attendance: ",t,"%"]})]})},vs=()=>{const{feeStatus:s}=H(),t=s==null?void 0:s.percentagePaid,n=s==null?void 0:s.totalOutstanding;return e.jsxs(a,{children:[e.jsxs(i,{variant:"h6",fontWeight:"600",mb:"5px",children:["Fee Payment Status (",parseInt(t),"%)"]}),e.jsx(U,{size:"125",progress:t/100}),e.jsxs(i,{variant:"body2",mt:"10px",children:["Outstanding Fees: $",n]})]})},bs=()=>{const s=S(),t=b(s.palette.mode),{nextClass:n}=H(),o=n||{subject:"Mathematics",date:"2025-06-23",time:"10:00 AM",location:"Room 12"};return e.jsxs(a,{textAlign:"center",children:[e.jsx(i,{variant:"h6",fontWeight:"600",mb:"5px",children:"Next Class"}),o?e.jsxs(a,{children:[e.jsx(De,{sx:{fontSize:"30px",color:t.blueAccent[400]}}),e.jsx(i,{variant:"h6",children:o.subject}),e.jsx(i,{children:o.date}),e.jsx(i,{children:o.time}),e.jsxs(i,{children:["Location: ",o.location]})]}):e.jsx(i,{children:"No upcoming classes."})]})},Ss=()=>{const s=S(),t=b(s.palette.mode),r=[{id:"Mathematics",color:t.blueAccent[500],data:[{x:"Sep",y:85},{x:"Oct",y:88},{x:"Nov",y:90},{x:"Dec",y:87},{x:"Jan",y:92},{x:"Feb",y:89},{x:"Mar",y:94},{x:"Apr",y:91},{x:"May",y:93},{x:"Jun",y:90}]},{id:"English",color:t.greenAccent[500],data:[{x:"Sep",y:78},{x:"Oct",y:80},{x:"Nov",y:82},{x:"Dec",y:79},{x:"Jan",y:85},{x:"Feb",y:83},{x:"Mar",y:87},{x:"Apr",y:84},{x:"May",y:86},{x:"Jun",y:85}]},{id:"Science",color:t.redAccent[500],data:[{x:"Sep",y:80},{x:"Oct",y:83},{x:"Nov",y:85},{x:"Dec",y:82},{x:"Jan",y:88},{x:"Feb",y:86},{x:"Mar",y:90},{x:"Apr",y:87},{x:"May",y:89},{x:"Jun",y:88}]}];return e.jsx("div",{style:{height:"350px"},children:e.jsx(et,{data:r,animate:!0,motionConfig:"default",theme:{axis:{domain:{line:{stroke:t.grey[100]}},legend:{text:{fill:t.grey[100],fontSize:8}},ticks:{line:{stroke:t.grey[100],strokeWidth:1},text:{fill:t.grey[100],fontSize:8}}},legends:{text:{fill:t.grey[100],fontSize:8}},tooltip:{container:{color:t.primary[500]}}},colors:{datum:"color"},margin:{top:50,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:0,max:100,stacked:!1,reverse:!1},yFormat:" >-.2f",curve:"catmullRom",axisTop:null,axisRight:null,axisBottom:{tickSize:0,tickPadding:5,tickRotation:0,legend:"Month",legendOffset:36,legendPosition:"middle"},axisLeft:{tickValues:5,tickSize:3,tickPadding:5,tickRotation:0,legend:"Score (%)",legendOffset:-40,legendPosition:"middle"},enableGridX:!1,enableGridY:!1,pointSize:8,pointColor:{theme:"background"},pointBorderWidth:1,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]})})},Cs=()=>{const s=S(),t=b(s.palette.mode),{missedClasses:n,formatDateToDDMMYYYY:r}=H(),d=n||[{id:"1",subject:"English",date:"2025-06-10",time:"09:00 AM",location:"Room 5"},{id:"2",subject:"Science",date:"2025-06-12",time:"11:00 AM",location:"Lab 2"}],l=s.palette.mode==="light"?t.blueAccent[800]:t.greenAccent[600];return e.jsxs(a,{children:[e.jsx(i,{variant:"h5",fontWeight:"600",mb:"15px",children:"Missed Classes"}),d.length>0?d.map(m=>e.jsx(fe,{sx:{mb:2},children:e.jsxs(ge,{sx:{backgroundColor:l,textAlign:"left"},children:[e.jsx(i,{variant:"h6",children:m.subject}),e.jsx(i,{children:r?r(m.date):m.date}),e.jsx(i,{children:m.time}),e.jsxs(i,{children:["Location: ",m.location]})]})},m.id)):e.jsx(i,{children:"You attended all classes"})]})},As=()=>{const s=S(),t=b(s.palette.mode),{callApi:n}=je(),[r,o]=u.useState(null);u.useEffect(()=>{(async()=>{try{const p=await n(X.ANNOUNCEMENT,"GET");p&&p.data&&o(p.data)}catch(p){console.error("Error fetching announcements:",p)}})()},[n]);const d=s.palette.mode==="light"?t.blueAccent[800]:t.greenAccent[600],m=r||[{id:"1",title:"End of Term Exams",message:"Exams start on July 1, 2025.",date:"2025-06-20"},{id:"2",title:"Sports Day",message:"Join us on July 15, 2025.",date:"2025-06-18"}];return e.jsxs(a,{children:[e.jsx(i,{variant:"h5",fontWeight:"600",mb:"15px",children:"Announcements"}),m.length>0?m.map(x=>e.jsx(fe,{sx:{mb:2},children:e.jsxs(ge,{sx:{backgroundColor:d,textAlign:"left"},children:[e.jsx(i,{variant:"h6",children:x.title}),e.jsx(i,{variant:"body2",children:x.message}),e.jsx(i,{variant:"caption",color:"gray",children:x.date})]})},x.id)):e.jsx(i,{children:"No announcements available"})]})},ks=()=>{const s=S(),t=b(s.palette.mode),{allResources:n}=H(),o=n||[{title:"Math Textbook",url:"https://example.com/math-textbook.pdf"},{title:"Science Notes",url:"https://example.com/science-notes.pdf"}],d=s.palette.mode==="light"?t.blueAccent[800]:t.greenAccent[600];return e.jsxs(a,{children:[e.jsx(i,{variant:"h5",fontWeight:"600",mb:"15px",children:"Useful Resources"}),o.length>0?o.map((l,m)=>e.jsx(fe,{sx:{mb:2},children:e.jsxs(ge,{sx:{backgroundColor:d,textAlign:"left"},children:[e.jsx(i,{variant:"h6",children:l.title}),e.jsx("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",children:l.url})]})},m)):e.jsx(i,{children:"No Resources Available"})]})},ws=()=>{const s=S(),t=b(s.palette.mode),n=[{id:"1",title:"Math Midterm Exam",start:"2025-07-01T09:00:00",end:"2025-07-01T11:00:00",allDay:!1},{id:"2",title:"School Sports Day",start:"2025-07-15",allDay:!0},{id:"3",title:"Science Club Meeting",start:"2025-07-20T15:00:00",end:"2025-07-20T16:30:00",allDay:!1},{id:"4",title:"Parent-Teacher Conference",start:"2025-07-25T10:00:00",end:"2025-07-25T15:00:00",allDay:!1},{id:"5",title:"School Holiday - Summer Break",start:"2025-08-01",end:"2025-08-15",allDay:!0}],[r,o]=u.useState(n),[d,l]=u.useState(!1);u.useEffect(()=>{const x=JSON.parse(localStorage.getItem("events"))||[];x.length>0&&o([...n,...x])},[]);const m=()=>{l(x=>!x)};return e.jsx(a,{my:"10px",children:e.jsxs(a,{display:"flex",justifyContent:"center",flexDirection:"column",children:[e.jsxs(a,{flex:"1 1 20%",backgroundColor:t.primary[400],py:"15px",borderRadius:"4px",sx:{width:"100%",height:"70vh",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs(a,{display:"flex",alignItems:"center",marginBottom:"10px",children:[e.jsx(Pe,{onClick:m,sx:{backgroundColor:t.blueAccent[500],"&:hover":{backgroundColor:t.blueAccent[700]},padding:"10px",borderRadius:"50%"},children:d?e.jsx(Te,{}):e.jsx(Fe,{})}),e.jsx(i,{variant:"h6",sx:{marginLeft:"10px",fontWeight:"800"},children:d?"Hide Events":"Show Events"})]}),d&&e.jsx(i,{variant:"h4",sx:{marginBottom:"10px"},children:"Events"}),d&&e.jsx(xe,{children:r.length===0?e.jsx(i,{children:"No events"}):r.map(x=>e.jsx(he,{sx:{backgroundColor:t.blueAccent[500],margin:"10px 0",borderRadius:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.jsx(pe,{primary:x.title,secondary:e.jsx(i,{sx:{fontSize:"0.7em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:new Date(x.start).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})})},x.id))})]}),e.jsx(a,{flex:"1 1 100%",sx:{width:"100%"},children:e.jsx(Ee,{height:"70vh",plugins:[Re,Le,Ne],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},initialView:"dayGridMonth",editable:!1,selectable:!1,dayMaxEvents:!0,events:r})})]})})},Ms=()=>{const s=S();b(s.palette.mode);const[t,n]=u.useState(!0),[r,o]=u.useState(null),{loading:d,error:l}=H();return u.useEffect(()=>{n(!1)},[d,l]),t||d?e.jsx(we,{}):r?e.jsx(a,{m:"20px",children:e.jsxs(i,{variant:"h4",color:"error",children:["Error: ",r]})}):e.jsxs(a,{m:"20px",children:[e.jsx(i,{variant:"h3",fontWeight:"600",mb:"20px",children:"Student Dashboard"}),e.jsxs(Ie,{children:[e.jsxs(T,{children:[e.jsx(v,{sm:6,md:3,children:e.jsx(y,{children:e.jsx(js,{})})}),e.jsx(v,{sm:6,md:3,children:e.jsx(y,{children:e.jsx(ys,{})})}),e.jsx(v,{sm:6,md:3,children:e.jsx(y,{children:e.jsx(vs,{})})}),e.jsx(v,{sm:6,md:3,children:e.jsx(y,{noFlex:!0,children:e.jsx(bs,{})})})]}),e.jsxs(T,{children:[e.jsx(v,{md:8,children:e.jsxs(y,{height:"350px",noFlex:!0,children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",mb:"10px",children:"Subject Performance"}),e.jsx(Ss,{})]})}),e.jsx(v,{md:4,children:e.jsx(y,{noFlex:!0,children:e.jsx(Cs,{})})})]}),e.jsxs(T,{children:[e.jsx(v,{md:6,children:e.jsx(y,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:e.jsx(As,{})})}),e.jsx(v,{md:6,children:e.jsx(y,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:e.jsx(ks,{})})})]}),e.jsx(T,{children:e.jsx(v,{md:12,children:e.jsxs(y,{noFlex:!0,children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",mb:"10px",children:"School Activities"}),e.jsx(ws,{})]})})})]})]})};function _(){return{termProgress:80,studentAttendance:90,assignmentSubmissionRate:{totalAssignmentRate:85},nextClass:{subject:"Mathematics",date:"2025-06-23",time:"10:00 AM",location:"Room 12"},topStudents:[{firstName:"John",lastName:"Doe",profilePicture:"",performanceScore:95},{firstName:"Jane",lastName:"Smith",profilePicture:"",performanceScore:92},{firstName:"Alice",lastName:"Brown",profilePicture:"",performanceScore:90}],leastActiveStudents:[{firstName:"Mike",lastName:"Wilson",profilePicture:"",activityRate:60},{firstName:"Sarah",lastName:"Davis",profilePicture:"",activityRate:65},{firstName:"Tom",lastName:"Clark",profilePicture:"",activityRate:70}],loading:!1,error:null}}const Ds=()=>{const s=S(),t=b(s.palette.mode),{termProgress:n}=_(),r=n;return e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Term Progress"}),e.jsxs(a,{mt:"25px",children:[e.jsx(U,{size:"125",progress:r/100}),e.jsx(i,{variant:"h5",color:t.blueAccent[500],sx:{mt:"15px"},children:`${r}% completed`}),e.jsx(i,{children:"Current term completion"})]})]})},Es=()=>{const s=S(),t=b(s.palette.mode),{studentAttendance:n}=_(),r=n;return e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Student Attendance"}),e.jsxs(a,{mt:"25px",children:[e.jsx(U,{size:"125",progress:r/100}),e.jsx(i,{variant:"h5",color:t.blueAccent[500],sx:{mt:"15px"},children:`${r}% attendance rate`}),e.jsx(i,{children:"Average student attendance"})]})]})},Rs=()=>{const s=S(),t=b(s.palette.mode),{assignmentSubmissionRate:n}=_(),r=n==null?void 0:n.totalAssignmentRate;return e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(i,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Assignment Submissions"}),e.jsxs(a,{mt:"25px",children:[e.jsx(U,{size:"125",progress:r/100}),e.jsx(i,{variant:"h5",color:t.blueAccent[500],sx:{mt:"15px"},children:`${r}% submission rate`}),e.jsx(i,{children:"Average assignment submission rate"})]})]})},Ls=()=>{const s=S(),t=b(s.palette.mode),{nextClass:n}=_(),o=n||{subject:"Mathematics",date:"2025-06-23",time:"10:00 AM",location:"Room 12"};return e.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",children:[e.jsx(i,{variant:"h5",fontWeight:"600",mb:"15px",textAlign:"center",children:"Next Class"}),o?e.jsxs(a,{textAlign:"center",children:[e.jsx(De,{sx:{fontSize:"50px",color:t.blueAccent[500]}}),e.jsx(i,{variant:"h6",children:o.subject}),e.jsx(i,{children:o.date}),e.jsx(i,{children:o.time}),e.jsxs(i,{children:["Location: ",o.location]})]}):e.jsx(i,{children:"No upcoming classes."})]})},Ns=()=>{const s=S(),t=b(s.palette.mode),[n,r]=u.useState([]),[o,d]=u.useState(!1),[l,m]=u.useState(!1),[x,p]=u.useState({title:"",start:"",end:"",allDay:!1}),[R,g]=u.useState(null),k=[{id:"1",title:"Math Midterm Exam",start:"2025-07-01T09:00:00",end:"2025-07-01T11:00:00",allDay:!1},{id:"2",title:"School Sports Day",start:"2025-07-15",allDay:!0},{id:"3",title:"Teachers Meeting",start:"2025-07-20T15:00:00",end:"2025-07-20T16:30:00",allDay:!1}];u.useEffect(()=>{const c=JSON.parse(localStorage.getItem("events"))||[];r([...k,...c])},[]);const j=c=>{g(c.dateStr),p({title:"",start:c.dateStr,end:c.dateStr,allDay:c.allDay}),m(!0)},M=c=>{if(window.confirm(`Are you sure you want to delete the event "${c.event.title}"?`)){const h=n.filter(f=>f.id!==c.event.id);r(h),localStorage.setItem("events",JSON.stringify(h.filter(f=>!k.some(C=>C.id===f.id))))}},D=()=>{const c=new Date().getTime().toString(),h=[...n,{...x,id:c}];r(h),localStorage.setItem("events",JSON.stringify(h.filter(f=>!k.some(C=>C.id===f.id)))),m(!1),p({title:"",start:"",end:"",allDay:!1})},w=()=>{d(c=>!c)};return e.jsxs(a,{my:"10px",children:[e.jsx(i,{variant:"h5",fontWeight:"600",mb:"15px",children:"Event Calendar"}),e.jsxs(a,{display:"flex",justifyContent:"center",flexDirection:"column",children:[e.jsxs(a,{flex:"1 1 20%",backgroundColor:t.primary[400],py:"15px",borderRadius:"4px",sx:{width:"100%",height:"70vh",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs(a,{display:"flex",alignItems:"center",marginBottom:"10px",children:[e.jsx(Pe,{onClick:w,sx:{backgroundColor:t.blueAccent[500],"&:hover":{backgroundColor:t.blueAccent[700]},padding:"10px",borderRadius:"50%"},children:o?e.jsx(Te,{}):e.jsx(Fe,{})}),e.jsx(i,{variant:"h6",sx:{marginLeft:"10px",fontWeight:"800"},children:o?"Hide Events":"Show Events"})]}),o&&e.jsx(i,{variant:"h4",sx:{marginBottom:"10px"},children:"Events"}),o&&e.jsx(xe,{children:n.length===0?e.jsx(i,{children:"No events"}):n.map(c=>e.jsx(he,{sx:{backgroundColor:t.blueAccent[500],margin:"10px 0",borderRadius:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.jsx(pe,{primary:c.title,secondary:e.jsx(i,{sx:{fontSize:"0.7em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:new Date(c.start).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})})},c.id))})]}),e.jsx(a,{flex:"1 1 100%",sx:{width:"100%"},children:e.jsx(Ee,{height:"70vh",plugins:[Re,Le,Ne,tt],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},initialView:"dayGridMonth",editable:!0,selectable:!0,select:j,eventClick:M,dayMaxEvents:!0,events:n})})]}),e.jsxs(re,{open:l,handleClose:()=>m(!1),title:"Add Event",children:[e.jsx(F,{label:"Event Title",value:x.title,onChange:c=>p({...x,title:c.target.value}),fullWidth:!0,margin:"normal"}),e.jsx(F,{label:"Start Date",type:"date",value:x.start,onChange:c=>p({...x,start:c.target.value}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),e.jsx(F,{label:"End Date",type:"date",value:x.end,onChange:c=>p({...x,end:c.target.value}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),e.jsx(Rt,{variant:"contained",color:"primary",onClick:D,sx:{mt:2},disabled:!x.title||!x.start,children:"Add Event"})]})]})},Ps=()=>{const s=S(),t=b(s.palette.mode),{callApi:n}=je(),[r,o]=u.useState(null);u.useEffect(()=>{(async()=>{try{const p=await n(X.ANNOUNCEMENT,"GET");p&&p.data&&o(p.data)}catch(p){console.error("Error fetching announcements:",p)}})()},[n]);const d=s.palette.mode==="light"?t.blueAccent[800]:t.greenAccent[600],m=r||[{id:"1",title:"End of Term Exams",message:"Exams start on July 1, 2025.",date:"2025-06-20"},{id:"2",title:"Teachers Meeting",message:"Meeting on July 10, 2025.",date:"2025-06-18"}];return e.jsxs(a,{children:[e.jsx(i,{variant:"h5",fontWeight:"600",mb:"15px",children:"Announcements"}),m.length>0?m.map(x=>e.jsx(fe,{sx:{mb:2},children:e.jsxs(ge,{sx:{backgroundColor:d,textAlign:"left"},children:[e.jsx(i,{variant:"h6",children:x.title}),e.jsx(i,{variant:"body2",children:x.message}),e.jsx(i,{variant:"caption",color:"gray",children:x.date})]})},x.id)):e.jsx(i,{children:"No announcements available"})]})},Ts=()=>{const s=S(),t=b(s.palette.mode),{topStudents:n}=_(),o=n||[{firstName:"John",lastName:"Doe",profilePicture:"",performanceScore:95},{firstName:"Jane",lastName:"Smith",profilePicture:"",performanceScore:92},{firstName:"Alice",lastName:"Brown",profilePicture:"",performanceScore:90}],d=s.palette.mode==="light"?t.greenAccent[300]:t.primary[500];return e.jsxs(a,{children:[e.jsx(i,{variant:"h5",fontWeight:"600",mb:"15px",children:"Top Students by Performance"}),o.map((l,m)=>e.jsxs(a,{display:"flex",alignItems:"center",justifyContent:"flex-start",mb:2,backgroundColor:d,p:"15px",borderRadius:"8px",sx:{boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)"},children:[e.jsx(Qe,{src:l.profilePicture,alt:`${l.firstName} ${l.lastName}`,sx:{width:50,height:50,mr:2}}),e.jsxs(a,{children:[e.jsx(i,{variant:"h6",color:"white",children:`${l.firstName} ${l.lastName}`}),e.jsx(i,{variant:"body2",color:"white",children:`Performance Score: ${l.performanceScore}%`})]})]},m))]})},Fs=()=>{const s=S(),t=b(s.palette.mode),{leastActiveStudents:n}=_(),o=n||[{firstName:"Mike",lastName:"Wilson",profilePicture:"",activityRate:60},{firstName:"Sarah",lastName:"Davis",profilePicture:"",activityRate:65},{firstName:"Tom",lastName:"Clark",profilePicture:"",activityRate:70}],d=s.palette.mode==="light"?t.greenAccent[300]:t.primary[500];return e.jsxs(a,{children:[e.jsx(i,{variant:"h5",fontWeight:"600",mb:"15px",children:"Least Active Students"}),o.map((l,m)=>e.jsxs(a,{display:"flex",alignItems:"center",justifyContent:"flex-start",mb:2,backgroundColor:d,p:"15px",borderRadius:"8px",sx:{boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)"},children:[e.jsx(Qe,{src:l.profilePicture,alt:`${l.firstName} ${l.lastName}`,sx:{width:50,height:50,mr:2}}),e.jsxs(a,{children:[e.jsx(i,{variant:"h6",color:"white",children:`${l.firstName} ${l.lastName}`}),e.jsx(i,{variant:"body2",color:"white",children:`Activity Rate: ${l.activityRate}%`})]})]},m))]})},zs=()=>{const s=S();b(s.palette.mode),Ye(s.breakpoints.down("sm")),Ye(s.breakpoints.between("sm","md"));const[t,n]=u.useState(!0),[r,o]=u.useState(null),{loading:d,error:l}=_();return u.useEffect(()=>{n(!1)},[d,l]),t||d?e.jsx(we,{}):r?e.jsx(a,{m:"20px",children:e.jsxs(i,{variant:"h4",color:"error",children:["Error: ",r]})}):e.jsxs(a,{m:"20px",children:[e.jsx(i,{variant:"h3",fontWeight:"600",mb:"20px",children:"Teacher Dashboard"}),e.jsxs(Ie,{children:[e.jsxs(T,{children:[e.jsx(v,{sm:6,md:3,children:e.jsx(y,{children:e.jsx(Ds,{})})}),e.jsx(v,{sm:6,md:3,children:e.jsx(y,{children:e.jsx(Es,{})})}),e.jsx(v,{sm:6,md:3,children:e.jsx(y,{children:e.jsx(Rs,{})})}),e.jsx(v,{sm:6,md:3,children:e.jsx(y,{children:e.jsx(Ls,{})})})]}),e.jsxs(T,{children:[e.jsx(v,{md:8,children:e.jsx(y,{noFlex:!0,moreStyles:{height:"500px",overflowY:"auto"},children:e.jsx(Ns,{})})}),e.jsx(v,{md:4,children:e.jsx(y,{noFlex:!0,moreStyles:{height:"500px",overflowY:"auto"},children:e.jsx(Ps,{})})})]}),e.jsxs(T,{children:[e.jsx(v,{md:6,children:e.jsx(y,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:e.jsx(Ts,{})})}),e.jsx(v,{md:6,children:e.jsx(y,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:e.jsx(Fs,{})})})]})]})]})};var Ve={},Os=oe;Object.defineProperty(Ve,"__esModule",{value:!0});var se=Ve.default=void 0,$s=Os(ie()),Ws=e;se=Ve.default=(0,$s.default)((0,Ws.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-7 9h-2V5h2zm0 4h-2v-2h2z"}),"Announcement");const Is=({openAnnouncementModal:s,setModalOpen:t})=>{var w;const n=de(c=>c.users.user),[r,o]=u.useState({title:"",message:"",dueDate:"",classLevel:"",subclass:""}),[d,l]=u.useState([]),{data:m,loading:x,callApi:p}=je(),[R,g]=u.useState(!1),[k,j]=u.useState("");u.useEffect(()=>{if(!n||!n._id){j("User not authenticated. Please log in again."),g(!0);return}n.role==="teacher"&&s&&(async()=>{try{const h=await p(`${X.ACADEMIC_CLASSES}/assigned`,"GET");h&&h.data?l(h.data):(j("No assigned classes found."),g(!0))}catch(h){j("Failed to load assigned classes: "+h.message),g(!0)}})()},[s,n,p]);const M=c=>{const{name:h,value:f}=c.target;o(C=>({...C,[h]:f,...h==="classLevel"?{subclass:""}:{}}))},D=async()=>{if(!n||!n._id){j("User not authenticated. Please log in again."),g(!0);return}const{title:c,message:h,dueDate:f,classLevel:C,subclass:z}=r;if(!c||!h||!f){j("Please fill all required fields (title, message, due date)."),g(!0);return}if(n.role==="teacher"&&(!C||!z)){j("Please select a class level and subclass."),g(!0);return}const W=n.role==="teacher"?{title:c,message:h,date:f,createdBy:n._id,targets:[{classLevel:C,subclass:z}]}:{title:c,message:h,date:f,createdBy:n._id},J=n.role==="teacher"?`${X.ANNOUNCEMENT}/class`:`${X.ANNOUNCEMENT}/general`;try{const L=await p(J,"POST",W);L&&L.status==="success"&&L.data&&L.data.announcement?(o({title:"",message:"",dueDate:"",classLevel:"",subclass:""}),j(""),t(!1),g(!0)):(j("Failed to submit announcement. Please try again."),g(!0))}catch(L){j(L.message||"Failed to submit announcement."),g(!0)}};return!n||!n._id?e.jsx(re,{open:s,onClose:()=>t(!1),title:"Make Announcement",children:e.jsx(a,{sx:{display:"flex",justifyContent:"center",padding:2},children:e.jsx(zt,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(re,{open:s,onClose:()=>t(!1),title:"Make Announcement",onConfirm:D,children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(F,{label:"Title",name:"title",value:r.title,onChange:M,fullWidth:!0,required:!0}),e.jsx(F,{label:"Message",name:"message",value:r.message,onChange:M,fullWidth:!0,multiline:!0,rows:4,required:!0}),e.jsx(F,{label:"Due Date",name:"dueDate",type:"date",value:r.dueDate,onChange:M,fullWidth:!0,InputLabelProps:{shrink:!0},required:!0}),n.role==="teacher"&&e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{fullWidth:!0,children:[e.jsx(Ae,{children:"Class Level"}),e.jsx(ke,{name:"classLevel",value:r.classLevel,onChange:M,required:!0,children:d.map(c=>e.jsxs(ne,{value:c._id,children:[c.section," ",c.name]},c._id))})]}),e.jsxs(Ce,{fullWidth:!0,children:[e.jsx(Ae,{children:"Subclass"}),e.jsx(ke,{name:"subclass",value:r.subclass,onChange:M,required:!0,disabled:!r.classLevel,children:r.classLevel&&((w=d.find(c=>c._id===r.classLevel))==null?void 0:w.subclasses.map(c=>e.jsx(ne,{value:c.letter,children:c.letter},c.letter)))})]})]})]})}),e.jsx(st,{open:R,isLoading:x,onClose:()=>g(!1),title:"Announcement Submission",message:m&&m.status==="success"?"Announcement submitted successfully!":k||"Could not submit announcement. Please try again."})]})},Vs=({openFeedbackModal:s,setModalOpen:t})=>{const[n,r]=u.useState(""),[o,d]=u.useState(""),[l,m]=u.useState(""),[x,p]=u.useState(""),{data:R,loading:g,error:k,callApi:j}=je(),[M,D]=u.useState(!1),w=async()=>{const c={name:n,role:o,date:l,comments:x};await j(X.FEEDBACKS,"POST",c),k?console.error("Error submitting feedback:",k):(D(!0),r(""),d(""),m(""),p(""))};return e.jsxs(e.Fragment,{children:[e.jsx(re,{open:s,onClose:()=>t(!1),title:"Send Feedbacks",onConfirm:w,children:e.jsxs(a,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(F,{label:"Name",value:n,onChange:c=>r(c.target.value),fullWidth:!0,margin:"normal"}),e.jsxs(Ce,{fullWidth:!0,margin:"normal",children:[e.jsx(Ae,{children:"Role"}),e.jsxs(ke,{value:o,onChange:c=>d(c.target.value),children:[e.jsx(ne,{value:"Student",children:"Student"}),e.jsx(ne,{value:"Instructor",children:"Instructor"}),e.jsx(ne,{value:"Worker",children:"Worker"})]})]}),e.jsx(F,{label:"Date",type:"date",value:l,onChange:c=>m(c.target.value),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),e.jsx(F,{label:"Comments",value:x,onChange:c=>p(c.target.value),fullWidth:!0,margin:"normal",multiline:!0,rows:4})]})}),e.jsx(st,{open:M,isLoading:g,onClose:()=>D(!1),title:"Feedback confirmation",message:R?"Feedback submitted successfully!":"Could not submit announcement."})]})},Bs=({home:s})=>{const[t,n]=u.useState(!1),[r,o]=u.useState(!1),d=S();b(d.palette.mode);const l=de(m=>m.users.user);return!l||!l.firstName?e.jsx(a,{children:e.jsx(i,{children:"Loading user data..."})}):e.jsxs(a,{children:[e.jsxs(a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(Lt,{home:!0,title:l.firstName,subtitle:"Welcome to your dashboard"}),e.jsxs(a,{sx:{display:"flex",gap:"10px"},children:[l.role==="admin"&&e.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"column",md:"row"},alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(ee,{icon:e.jsx(rt,{sx:{fontSize:{xs:"16px",sm:"18px",md:"20px"}}}),content:"Download Reports"}),e.jsx(ee,{icon:e.jsx(se,{sx:{fontSize:{xs:"16px",sm:"18px",md:"20px"}}}),content:"Make announcement",onClick:()=>o(!0)})]}),l.role==="teacher"&&e.jsxs(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"column",md:"row"},alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(ee,{icon:e.jsx(se,{sx:{fontSize:{xs:"16px",sm:"18px",md:"20px"}}}),content:"Make announcement",onClick:()=>o(!0)}),e.jsx(ee,{icon:e.jsx(se,{sx:{fontSize:{xs:"16px",sm:"18px",md:"20px"}}}),content:"Submit Feedback",onClick:()=>n(!0)}),e.jsxs(a,{children:[e.jsx(Qt,{sx:{fontSize:{xs:"1em",sm:"1.2em"}},value:l.rating,readOnly:!0,precision:.1}),e.jsxs(i,{variant:"h6",sx:{fontSize:{xs:"0.8em",sm:"1em"}},children:["Rating: ",l.rating]})]})]}),l.role==="student"&&e.jsx(a,{sx:{display:"flex",flexDirection:{xs:"column",sm:"column",md:"row"},alignItems:"center",justifyContent:"center",gap:"10px"},children:e.jsx(ee,{icon:e.jsx(se,{sx:{fontSize:{xs:"16px",sm:"18px",md:"20px"}}}),content:"Submit Feedback",onClick:()=>n(!0)})}),e.jsx(Is,{openAnnouncementModal:r,setModalOpen:o}),e.jsx(Vs,{openFeedbackModal:t,setModalOpen:n})]})]}),l.role==="admin"||l.role==="superadmin"?e.jsx(gs,{user:l}):l.role==="student"?e.jsx(Ms,{user:l}):l.role==="teacher"?e.jsx(zs,{user:l}):null]})},Hs=Ft(Bs),fn=()=>e.jsx("div",{children:e.jsx(Hs,{home:!0})});export{fn as default};
