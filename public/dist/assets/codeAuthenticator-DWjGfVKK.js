import{r as c,e as v,j as e,f as b}from"./index-DYB9vdJh.js";import{m as I}from"./crystal-land-log-removebg-DVF-nlbN.js";import{H as S,F as T}from"./Header-BIeRYavs.js";import{L as w}from"./loadingButton-BBKAh30x.js";import{u as A}from"./useApi-BEUY4qmG.js";import{v as t,T as o,y as E}from"./TextField-Dq7C8pjc.js";import"./index-PZ5xDdmg.js";import"./index-DXZx8miF.js";import"./CircularProgress-pT4wBbD6.js";const k="/assets/student-code-auth-CDZoL7HH.jpeg",F=()=>{const[s,u]=c.useState(""),[p,n]=c.useState(!1),[m,r]=c.useState(""),x=v(),{callApi:h,loading:g,data:i,error:a}=A(),f=d=>{u(d.target.value),r(""),n(!1)},y=async()=>{if(!s.trim()){r("Please enter a valid code");return}console.log("Input Code:",s);const d=`${b.REGISTRATION_CODE}/validate`;console.log("Sending request to:",d);const l=await h(d,"POST",{code:s});if(a||typeof l=="string"&&l.includes("<!doctype html>"))r(a||"Invalid response from server: Expected JSON but received HTML"),n(!1);else if(l.status==="success"){const{message:D,usedDate:j,usedTime:C}=i;n(!0),r(""),alert(`Code authenticated successfully. Used Date: ${j||"N/A"}, Time: ${C||"N/A"}`),x("/studentSignUp")}else i&&!i.valid&&(r(i.message||"Code validation failed"),n(!1));u("")};return e.jsxs(t,{children:[e.jsx(S,{}),e.jsxs(t,{sx:{display:"flex",height:"100vh",flexDirection:{xs:"column",md:"row"},justifyContent:"center",backgroundColor:"#fff"},children:[e.jsx(t,{sx:{width:{xs:"0%",md:"100%"},height:"100%",display:{xs:"none",md:"block"},backgroundImage:`url(${k})`,backgroundSize:"cover",backgroundPosition:"center",position:"relative"},children:e.jsxs(t,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"#fff",padding:"40px",borderRadius:"12px",width:"70%",maxWidth:"600px",textAlign:"center"},children:[e.jsx(o,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:"Get Started with a Registration Code"}),e.jsxs(o,{variant:"h6",mt:2,children:["Contact ",e.jsx("strong",{children:"+234 812 345 6789"})," to receive your unique code."]}),e.jsx(o,{variant:"body1",mt:1,children:"Enter the code here to begin your enrollment process."})]})}),e.jsxs(t,{sx:{display:"flex",width:"100%",padding:"20px",placeContent:"center",alignItems:"center",height:"auto",flexDirection:"column"},children:[e.jsx(o,{variant:"h5",gutterBottom:!0,color:"#15131D",fontWeight:"bold",sx:{fontSize:{xs:"1.2em",md:"2em"}},children:"Crystal Land Academy"}),e.jsx(t,{sx:{display:"grid",width:"auto",padding:"20px",placeContent:"center",alignItems:"center",height:"auto"},children:e.jsx("img",{src:I,alt:"Crystal Land logo",style:{height:"150px",width:"150px"}})}),e.jsxs(t,{sx:{width:{xs:"100%",md:"100%"},display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"5%",backgroundColor:"#fff"},children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Enter OTP"}),e.jsx(E,{label:"Enter Code",variant:"outlined",value:s,onChange:f,inputProps:{minLength:11},sx:{marginBottom:"10px",width:"100%"}}),e.jsx(w,{onClick:y,type:"submit",variant:"contained",color:"primary",isLoading:g,fullWidth:!0,children:"Submit"}),(m||a)&&e.jsx(o,{color:"error",sx:{marginTop:"20px"},children:m||a}),p&&e.jsx(o,{color:"primary",sx:{marginTop:"20px",color:"green"},children:"Code authenticated successfully!"})]})]})]}),e.jsx(T,{})]})};export{F as default};
