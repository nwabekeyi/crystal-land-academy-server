import{j as e,r as d,a as I,C as Ue,i as Ee,D as Je,E as St,e as J}from"./index-BC37bsQa.js";import{r as ie,t as k,M as oe}from"./modal-GEZs9M28.js";import{c as he,a as Ct,g as At,u as Dt,_ as Ke,ab as Qe,ac as kt,am as Et,X as wt,o as Lt,b as T,s as me,d as ue,h as Ze,e as Rt,an as Mt,ao as Tt,q as le,j as E,v as c,T as r,w as xe,y as N,x as Ft,Z as Ae,$ as De,a0 as ke}from"./TextField-DJHC7RPB.js";import{H as Pt}from"./Header-B8AhHNUH.js";import{G as we,L as ge,a as fe,d as Le,C as pe,b as je,A as et}from"./index-D_NzLyvY.js";import{_ as tt}from"./nivo-pie.es-vAQQaqOl.js";import{p as st}from"./nivo-line.es-BaZSa4T5.js";import{u as ve}from"./useAdminData-DbLhVaan.js";import{f as Nt,F as Re,m as Me,a as Te,b as nt,c as Fe}from"./main-X9Ox6N8v.js";import{I as Pe}from"./IconButton-FKrVB40t.js";import{X as zt}from"./nivo-bar-DjkrDlZ_.js";import{u as K}from"./useApi-CayfBA9a.js";import{u as $t,M as ae}from"./MenuItem-Boxsdccj.js";import{u as qe}from"./useMediaQuery-BLrmJgPF.js";import{w as Ot}from"./dasboardPagesContainer-BPvvQ7M3.js";import{C as rt,A as se}from"./confirmationModal-jYsKQ6Iz.js";import{C as Wt}from"./CircularProgress-D3qA5W-A.js";import"./index-C3bpa2xi.js";import"./loadingButton-DWigVCde.js";import"./crystal-land-log-removebg-DVF-nlbN.js";import"./useSlot-Br8NJCec.js";import"./nivo-legends.es-THy5E548.js";import"./_baseIsEqual-DaSy-PEk.js";import"./_baseForOwn-kva_mEqQ.js";import"./_baseSlice-z0Zd1-Ev.js";const It={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},Vt=he(e.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),_t=he(e.jsx("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");function Ht(n){return At("MuiRating",n)}const ne=Ct("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),Bt=["value"],Yt=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function Gt(n){const t=n.toString().split(".")[1];return t?t.length:0}function Ce(n,t){if(n==null)return n;const s=Math.round(n/t)*t;return Number(s.toFixed(Gt(t)))}const qt=n=>{const{classes:t,size:s,readOnly:o,disabled:a,emptyValueFocused:l,focusVisible:i}=n,m={root:["root",`size${Ze(s)}`,a&&"disabled",i&&"focusVisible",o&&"readOnly"],label:["label","pristine"],labelEmptyValue:[l&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return Rt(m,Ht,t)},Xt=me("span",{name:"MuiRating",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:s}=n;return[{[`& .${ne.visuallyHidden}`]:t.visuallyHidden},t.root,t[`size${Ze(s.size)}`],s.readOnly&&t.readOnly]}})(({theme:n,ownerState:t})=>T({display:"inline-flex",position:"relative",fontSize:n.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",width:"min-content",WebkitTapHighlightColor:"transparent",[`&.${ne.disabled}`]:{opacity:(n.vars||n).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${ne.focusVisible} .${ne.iconActive}`]:{outline:"1px solid #999"},[`& .${ne.visuallyHidden}`]:It},t.size==="small"&&{fontSize:n.typography.pxToRem(18)},t.size==="large"&&{fontSize:n.typography.pxToRem(30)},t.readOnly&&{pointerEvents:"none"})),at=me("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:n},t)=>[t.label,n.emptyValueFocused&&t.labelEmptyValueActive]})(({ownerState:n})=>T({cursor:"inherit"},n.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"})),Ut=me("span",{name:"MuiRating",slot:"Icon",overridesResolver:(n,t)=>{const{ownerState:s}=n;return[t.icon,s.iconEmpty&&t.iconEmpty,s.iconFilled&&t.iconFilled,s.iconHover&&t.iconHover,s.iconFocus&&t.iconFocus,s.iconActive&&t.iconActive]}})(({theme:n,ownerState:t})=>T({display:"flex",transition:n.transitions.create("transform",{duration:n.transitions.duration.shortest}),pointerEvents:"none"},t.iconActive&&{transform:"scale(1.2)"},t.iconEmpty&&{color:(n.vars||n).palette.action.disabled})),Jt=me("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:n=>Mt(n)&&n!=="iconActive",overridesResolver:(n,t)=>{const{iconActive:s}=n;return[t.decimal,s&&t.iconActive]}})(({iconActive:n})=>T({position:"relative"},n&&{transform:"scale(1.2)"}));function Kt(n){const t=Ke(n,Bt);return e.jsx("span",T({},t))}function Xe(n){const{classes:t,disabled:s,emptyIcon:o,focus:a,getLabelText:l,highlightSelectedOnly:i,hover:m,icon:x,IconContainerComponent:u,isActive:g,itemValue:p,labelProps:S,name:j,onBlur:C,onChange:A,onClick:D,onFocus:h,readOnly:f,ownerState:v,ratingValue:w,ratingValueRounded:Y}=n,O=i?p===w:p<=w,G=p<=m,M=p<=a,be=p===Y,Z=Qe(),_=e.jsx(Ut,{as:u,value:p,className:ue(t.icon,O?t.iconFilled:t.iconEmpty,G&&t.iconHover,M&&t.iconFocus,g&&t.iconActive),ownerState:T({},v,{iconEmpty:!O,iconFilled:O,iconHover:G,iconFocus:M,iconActive:g}),children:o&&!O?o:x});return f?e.jsx("span",T({},S,{children:_})):e.jsxs(d.Fragment,{children:[e.jsxs(at,T({ownerState:T({},v,{emptyValueFocused:void 0}),htmlFor:Z},S,{children:[_,e.jsx("span",{className:t.visuallyHidden,children:l(p)})]})),e.jsx("input",{className:t.visuallyHidden,onFocus:h,onBlur:C,onChange:A,onClick:D,disabled:s,value:p,id:Z,type:"radio",name:j,checked:be})]})}const Qt=e.jsx(Vt,{fontSize:"inherit"}),Zt=e.jsx(_t,{fontSize:"inherit"});function es(n){return`${n} Star${n!==1?"s":""}`}const ts=d.forwardRef(function(t,s){const o=Dt({name:"MuiRating",props:t}),{className:a,defaultValue:l=null,disabled:i=!1,emptyIcon:m=Zt,emptyLabelText:x="Empty",getLabelText:u=es,highlightSelectedOnly:g=!1,icon:p=Qt,IconContainerComponent:S=Kt,max:j=5,name:C,onChange:A,onChangeActive:D,onMouseLeave:h,onMouseMove:f,precision:v=1,readOnly:w=!1,size:Y="medium",value:O}=o,G=Ke(o,Yt),M=Qe(C),[be,Z]=kt({controlled:O,default:l,name:"Rating"}),_=Ce(be,v),dt=Et(),[{hover:z,focus:ce},ee]=d.useState({hover:-1,focus:-1});let q=_;z!==-1&&(q=z),ce!==-1&&(q=ce);const{isFocusVisibleRef:He,onBlur:ut,onFocus:ht,ref:mt}=wt(),[xt,ye]=d.useState(!1),Be=d.useRef(),gt=Lt(mt,Be,s),ft=L=>{f&&f(L);const R=Be.current,{right:F,left:de,width:X}=R.getBoundingClientRect();let U;dt?U=(F-L.clientX)/X:U=(L.clientX-de)/X;let $=Ce(j*U+v/2,v);$=Tt($,v,j),ee(H=>H.hover===$&&H.focus===$?H:{hover:$,focus:$}),ye(!1),D&&z!==$&&D(L,$)},pt=L=>{h&&h(L);const R=-1;ee({hover:R,focus:R}),D&&z!==R&&D(L,R)},Ye=L=>{let R=L.target.value===""?null:parseFloat(L.target.value);z!==-1&&(R=z),Z(R),A&&A(L,R)},jt=L=>{L.clientX===0&&L.clientY===0||(ee({hover:-1,focus:-1}),Z(null),A&&parseFloat(L.target.value)===_&&A(L,null))},vt=L=>{ht(L),He.current===!0&&ye(!0);const R=parseFloat(L.target.value);ee(F=>({hover:F.hover,focus:R}))},bt=L=>{if(z!==-1)return;ut(L),He.current===!1&&ye(!1);const R=-1;ee(F=>({hover:F.hover,focus:R}))},[yt,Ge]=d.useState(!1),te=T({},o,{defaultValue:l,disabled:i,emptyIcon:m,emptyLabelText:x,emptyValueFocused:yt,focusVisible:xt,getLabelText:u,icon:p,IconContainerComponent:S,max:j,precision:v,readOnly:w,size:Y}),W=qt(te);return e.jsxs(Xt,T({ref:gt,onMouseMove:ft,onMouseLeave:pt,className:ue(W.root,a,w&&"MuiRating-readOnly"),ownerState:te,role:w?"img":null,"aria-label":w?u(q):null},G,{children:[Array.from(new Array(j)).map((L,R)=>{const F=R+1,de={classes:W,disabled:i,emptyIcon:m,focus:ce,getLabelText:u,highlightSelectedOnly:g,hover:z,icon:p,IconContainerComponent:S,name:M,onBlur:bt,onChange:Ye,onClick:jt,onFocus:vt,ratingValue:q,ratingValueRounded:_,readOnly:w,ownerState:te},X=F===Math.ceil(q)&&(z!==-1||ce!==-1);if(v<1){const U=Array.from(new Array(1/v));return e.jsx(Jt,{className:ue(W.decimal,X&&W.iconActive),ownerState:te,iconActive:X,children:U.map(($,H)=>{const Se=Ce(F-1+(H+1)*v,v);return e.jsx(Xe,T({},de,{isActive:!1,itemValue:Se,labelProps:{style:U.length-1===H?{}:{width:Se===q?`${(H+1)*v*100}%`:"0%",overflow:"hidden",position:"absolute"}}}),Se)})},F)}return e.jsx(Xe,T({},de,{isActive:X,itemValue:F}),F)}),!w&&!i&&e.jsxs(at,{className:ue(W.label,W.labelEmptyValue),ownerState:te,children:[e.jsx("input",{className:W.visuallyHidden,value:"",id:`${M}-empty`,type:"radio",name:M,checked:_==null,onFocus:()=>Ge(!0),onBlur:()=>Ge(!1),onChange:Ye}),e.jsx("span",{className:W.visuallyHidden,children:x})]})]}))}),Ne=he(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),ze=he(e.jsx("path",{d:"M3 13h2v-2H3zm0 4h2v-2H3zm0-8h2V7H3zm4 4h14v-2H7zm0 4h14v-2H7zM7 7v2h14V7z"}),"List");var $e={},ss=le;Object.defineProperty($e,"__esModule",{value:!0});var ot=$e.default=void 0,ns=ss(ie()),rs=e;ot=$e.default=(0,ns.default)((0,rs.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zm-8 2V5h2v6h1.17L12 13.17 9.83 11zm-6 7h14v2H5z"}),"DownloadOutlined");var Oe={},as=le;Object.defineProperty(Oe,"__esModule",{value:!0});var it=Oe.default=void 0,os=as(ie()),is=e;it=Oe.default=(0,os.default)((0,is.jsx)("path",{d:"M12 12.75c1.63 0 3.07.39 4.24.9 1.08.48 1.76 1.56 1.76 2.73V18H6v-1.61c0-1.18.68-2.26 1.76-2.73 1.17-.52 2.61-.91 4.24-.91M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29M20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24zM12 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3"}),"Groups");var We={},ls=le;Object.defineProperty(We,"__esModule",{value:!0});var lt=We.default=void 0,cs=ls(ie()),ds=e;lt=We.default=(0,cs.default)((0,ds.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H4V8l8 5 8-5zm-8-7L4 6h16z"}),"MailOutline");var Ie={},us=le;Object.defineProperty(Ie,"__esModule",{value:!0});var ct=Ie.default=void 0,hs=us(ie()),ms=e;ct=Ie.default=(0,hs.default)((0,ms.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd");const b=({children:n,noFlex:t,height:s,moreStyles:o={}})=>{const a=E(),l=k(a.palette.mode);return e.jsxs(c,{backgroundColor:l.primary[400],p:"20px",borderRadius:"10px",textAlign:"center",display:!t&&"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",sx:{height:s||"100%",boxShadow:a.palette.mode==="light"?"0px 2px 10px rgba(0, 0, 0, 0.1)":"0px 4px 12px rgba(0, 0, 0, 0.3)",...o},children:[n," "]})},Ve=({children:n,...t})=>e.jsxs(we,{container:!0,spacing:2,...t,children:[n," "]}),P=({children:n})=>e.jsxs(we,{container:!0,item:!0,xs:12,spacing:2,children:[n," "]}),y=({children:n,...t})=>e.jsxs(we,{item:!0,xs:12,...t,children:[n," "]}),xs=()=>{const n=E(),t=k(n.palette.mode),{classLevels:s}=I(Ue),o=s&&s.length>0?s.map(a=>{var l;return{id:a._id,label:a.name,value:((l=a.students)==null?void 0:l.length)||0}}):[];return e.jsx(c,{children:e.jsx("div",{style:{height:"350px"},children:o.length>0?e.jsx(tt,{data:o,arcLinkLabel:"label",theme:{axis:{domain:{line:{stroke:t.grey[100]}},legend:{text:{fill:t.grey[100]}},ticks:{line:{stroke:t.grey[100],strokeWidth:1},text:{fill:t.grey[100]}}},legends:{text:{fill:t.grey[100]}},tooltip:{container:{background:t.primary[400],color:t.grey[100],fontSize:12}}},margin:{top:40,right:80,bottom:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:t.grey[100],arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},enableArcLabels:!1,arcLabelsRadiusOffset:.4,arcLabelsSkipAngle:7,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},tooltip:({datum:a})=>e.jsxs("div",{style:{background:t.primary[400],color:t.grey[100],padding:"5px 9px",borderRadius:"3px",fontSize:12},children:[a.label,": ",a.value]}),defs:[{id:"dots",type:"patternDots",background:"inherit",color:"rgba(255, 255, 255, 0.3)",size:4,padding:1,stagger:!0},{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.3)",rotation:-45,lineWidth:6,spacing:10}],legends:[{anchor:"bottom",direction:"row",justify:!1,translateX:0,translateY:56,itemsSpacing:0,itemWidth:100,itemHeight:18,itemTextColor:"#999",itemDirection:"left-to-right",itemOpacity:1,symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}],data:o.map(a=>({id:a.id,label:a.label}))}]}):e.jsx(c,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx(r,{color:t.grey[100],children:"No class data available"})})})})},gs=({isCustomLineColors:n=!1,isDashboard:t=!1})=>{const s=E(),o=d.useMemo(()=>k(s.palette.mode),[s.palette.mode]),{financialData:a,financialDataLoading:l,financialDataError:i}=ve(),m=g=>`hsl(${g*360/2%360}, 70%, 60%)`,x=d.useMemo(()=>{var S,j;const g=(a==null?void 0:a.data)||a||{primary:[],secondary:[]};return!((S=g.primary)!=null&&S.length)&&!((j=g.secondary)!=null&&j.length)?[]:["primary","secondary"].filter(C=>{var A;return(A=g[C])==null?void 0:A.length}).map((C,A)=>({id:C.charAt(0).toUpperCase()+C.slice(1),color:n?m(A):void 0,data:g[C].map(D=>({x:D.label.split(" ")[0],y:D.value||0}))}))},[a,n]),u=d.useMemo(()=>{var j,C;const g=(a==null?void 0:a.data)||a||{primary:[],secondary:[]},p=((j=g.primary)==null?void 0:j.reduce((A,D)=>A+(D.value||0),0))||0,S=((C=g.secondary)==null?void 0:C.reduce((A,D)=>A+(D.value||0),0))||0;return p+S},[a]);return l?e.jsx(c,{children:"Loading data..."}):i?e.jsxs(c,{children:["Error: ",i.message||"Failed to load financial data"]}):x.length?e.jsxs(c,{width:"98%",height:t?"300px":"400px",children:[e.jsxs(r,{variant:"subtitle1",sx:{mb:2,color:o.grey[100]},children:["Total Revenue: ₦",u.toLocaleString("en-NG")]}),e.jsx(st,{data:x,animate:!0,motionConfig:"default",theme:{axis:{domain:{line:{stroke:o.grey[100]}},legend:{text:{fill:o.grey[100],fontSize:8}},ticks:{line:{stroke:o.grey[100],strokeWidth:1},text:{fill:o.grey[100],fontSize:8}}},legends:{text:{fill:o.grey[100],fontSize:8}},tooltip:{container:{background:o.primary[500],color:o.grey[100],fontSize:12},format:g=>`₦${g.toLocaleString("en-NG")}`}},colors:n?{datum:"color"}:{scheme:"nivo"},margin:{top:50,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto",stacked:!1,reverse:!1},yFormat:g=>`₦${g.toLocaleString("en-NG")}`,curve:"catmullRom",axisTop:null,axisRight:null,axisBottom:{tickSize:0,tickPadding:5,tickRotation:45,legend:t?void 0:"Academic Year",legendOffset:36,legendPosition:"middle"},axisLeft:{tickValues:5,tickSize:3,tickPadding:5,tickRotation:0,legend:t?void 0:"Revenue (₦)",legendOffset:-50,legendPosition:"middle",format:g=>`₦${g.toLocaleString("en-NG")}`},enableGridX:!1,enableGridY:!1,pointSize:8,pointColor:{theme:"background"},pointBorderWidth:2,pointBorderColor:{from:"serieColor"},enablePoints:!0,enablePointLabel:!0,pointLabel:"y",pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]})]}):e.jsx(c,{children:"No financial data available."})},fs=()=>{const n=E(),t=k(n.palette.mode),s=[{id:"1",title:"Math Midterm Exam",start:"2025-07-10T09:00:00",end:"2025-07-10T11:00:00",allDay:!1},{id:"2",title:"School Sports Day",start:"2025-07-15",allDay:!0},{id:"3",title:"Science Club Meeting",start:"2025-07-20T15:00:00",end:"2025-07-20T16:30:00",allDay:!1},{id:"4",title:"Parent-Teacher Conference",start:"2025-07-25T10:00:00",end:"2025-07-25T15:00:00",allDay:!1},{id:"5",title:"School Holiday - Summer Break",start:"2025-08-01",end:"2025-08-15",allDay:!0},{id:"6",title:"Drama Club Rehearsal",start:"2025-07-22T16:00:00",end:"2025-07-22T18:00:00",allDay:!1}],[o,a]=d.useState(s),[l,i]=d.useState(!1),[m,x]=d.useState(""),[u,g]=d.useState(null),[p,S]=d.useState(!1);d.useEffect(()=>{const f=JSON.parse(localStorage.getItem("events"))||[];f.length>0&&a([...s,...f])},[]),d.useEffect(()=>{const f=o.filter(v=>!s.some(w=>w.id===v.id));f.length>0&&localStorage.setItem("events",JSON.stringify(f))},[o]);const j=f=>{g(f),i(!0)},C=()=>{if(m&&u){const f={id:`${u.dateStr}-${m}`,title:m,start:u.startStr,end:u.endStr,allDay:u.allDay},v=[...o,f];a(v),i(!1),x("")}},A=()=>{i(!1),x("")},D=f=>{if(window.confirm(`Are you sure you want to delete the event '${f.event.title}'`)){const v=o.filter(w=>w.id!==f.event.id);a(v)}},h=()=>{S(f=>!f)};return e.jsxs(c,{my:"10px",children:[e.jsxs(c,{display:"flex",justifyContent:"center",flexDirection:"column",children:[e.jsxs(c,{flex:"1 1 20%",backgroundColor:t.primary[400],py:"15px",borderRadius:"4px",sx:{width:"100%",height:"75vh",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs(c,{display:"flex",alignItems:"center",marginBottom:"10px",children:[e.jsx(Pe,{onClick:h,sx:{backgroundColor:t.blueAccent[500],"&:hover":{backgroundColor:t.blueAccent[700]},padding:"10px",borderRadius:"50%"},children:p?e.jsx(Ne,{}):e.jsx(ze,{})}),e.jsx(r,{variant:"h6",sx:{marginLeft:"10px",fontWeight:"800"},children:p?"Hide Events":"Show Events"})]}),p&&e.jsx(r,{variant:"h4",sx:{marginBottom:"10px"},children:"Events"}),p&&e.jsx(xe,{children:o.length===0?e.jsx(r,{children:"No events available"}):o.map(f=>e.jsx(ge,{sx:{backgroundColor:t.blueAccent[500],margin:"10px 0",borderRadius:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.jsx(fe,{primary:f.title,secondary:e.jsx(r,{sx:{fontSize:"0.7em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Nt(f.start,{year:"numeric",month:"short",day:"numeric"})})})},f.id))})]}),e.jsx(c,{flex:"1 1 100%",sx:{width:"100%"},children:e.jsx(Re,{height:"75vh",plugins:[Me,Te,nt,Fe],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},initialView:"dayGridMonth",editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,select:j,eventClick:D,events:o})})]}),e.jsx(oe,{open:l,onClose:A,title:"Add Event",onConfirm:C,children:e.jsx(c,{p:"20px",children:e.jsx(N,{label:"Event Title",fullWidth:!0,value:m,onChange:f=>x(f.target.value),sx:{marginBottom:"20px"}})})})]})},ps=()=>{const n=E(),t=k(n.palette.mode),{outstandingFeesData:s,outstandingFeesLoading:o,outstandingFeesError:a}=ve();if(o)return e.jsx(c,{children:"Loading data..."});if(a)return e.jsxs(c,{children:["Error: ",a.message||"Failed to load outstanding fees data"]});if(!s||!Array.isArray(s)||s.length===0)return e.jsx(c,{children:"No outstanding fees data available."});const l=s.map(i=>({...i,value:i.value===0?.01:i.value}));return e.jsxs(c,{children:[e.jsx(r,{variant:"h6",sx:{mb:2,color:t.grey[100]},children:"Outstanding Fees by Class (₦)"}),e.jsx("div",{style:{height:"350px"},children:e.jsx(tt,{data:l,theme:{axis:{domain:{line:{stroke:t.grey[100]}},legend:{text:{fill:t.grey[100]}},ticks:{line:{stroke:t.grey[100],strokeWidth:1},text:{fill:t.grey[100]}}},legends:{text:{fill:t.grey[100]}},tooltip:{container:{background:t.primary[400],color:t.grey[100],fontSize:12},format:i=>`₦${i.toLocaleString("en-NG")}`}},margin:{top:40,right:80,bottom:80,left:80},innerRadius:.5,padAngle:.7,cornerRadius:3,activeOuterRadiusOffset:8,borderColor:{from:"color",modifiers:[["darker",.2]]},arcLinkLabelsSkipAngle:10,arcLinkLabelsTextColor:t.grey[100],arcLinkLabelsThickness:2,arcLinkLabelsColor:{from:"color"},enableArcLabels:!0,arcLabelsRadiusOffset:.4,arcLabelsSkipAngle:7,arcLabelsTextColor:{from:"color",modifiers:[["darker",2]]},arcLabelsText:i=>`₦${i.toLocaleString("en-NG")}`,defs:[{id:"dots",type:"patternDots",background:"inherit",color:"rgba(255, 255, 255, 0.3)",size:4,padding:1,stagger:!0},{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.3)",rotation:-45,lineWidth:6,spacing:10}],legends:[{anchor:"bottom",direction:"row",justify:!1,translateX:0,translateY:56,itemsSpacing:0,itemWidth:100,itemHeight:18,itemTextColor:"#999",itemDirection:"left-to-right",itemOpacity:1,symbolSize:18,symbolShape:"circle",effects:[{on:"hover",style:{itemTextColor:"#000"}}],data:l.map(i=>({id:i.id,label:i.label}))}]})}),e.jsx(c,{sx:{mt:2,display:"flex",flexWrap:"wrap",gap:2,justifyContent:"center"},children:s.map(i=>e.jsxs(r,{sx:{color:t.grey[100],fontSize:12,minWidth:120},children:[i.label,": ₦",i.value.toLocaleString("en-NG")]},i.id))})]})},js=()=>{const n=E(),t=k(n.palette.mode),{usersData:s}=I(Ue),o=s.teachers&&s.teachers.length>0?s.teachers.map(a=>({name:`${a.firstName} ${a.lastName}`.trim(),subject:a.subject&&a.subject.length>0?a.subject[0].name:"No Subject",rating:a.rating||0})).sort((a,l)=>l.rating-a.rating).slice(0,5):[];return e.jsx(c,{sx:{height:"350px",overflowY:"auto"},children:o.length>0?e.jsx(xe,{children:o.map((a,l)=>e.jsx(ge,{sx:{backgroundColor:t.primary[400],mb:1,borderRadius:"4px"},children:e.jsx(fe,{primary:`${a.name} (${a.subject})`,secondary:`Rating: ${a.rating}/5`,sx:{color:t.grey[100]}})},l))}):e.jsx(c,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:e.jsx(r,{color:t.grey[100],children:"No teachers available"})})})},vs=()=>{var i;const n=E(),t=k(n.palette.mode),{enrollmentData:s,enrollmentDataLoading:o,enrollmentDataError:a}=ve();if(o)return e.jsx(c,{children:"Loading..."});if(a)return e.jsxs(c,{children:["Error: ",a.message||"Failed to load data"]});if(!s||!((i=s.total)!=null&&i.length))return e.jsx(c,{children:"No enrollment data available."});const l=s.total.map(m=>({academicYear:m.academicYear,Total:m.value}));return console.log("Enrollment Chart Data:",l),e.jsxs(c,{height:"300px",children:[e.jsx(r,{variant:"h6",sx:{mb:1,color:t.grey[100],fontSize:"14px"},children:"Enrollment"}),e.jsx(zt,{data:l,keys:["Total"],indexBy:"academicYear",theme:{axis:{domain:{line:{stroke:t.grey[100]}},legend:{text:{fill:t.grey[100],fontSize:8}},ticks:{line:{stroke:t.grey[100],strokeWidth:1},text:{fill:t.grey[100],fontSize:8}}},legends:{text:{fill:t.grey[100],fontSize:8}},tooltip:{container:{background:t.primary[400],color:t.grey[100],fontSize:8}}},margin:{top:20,right:60,bottom:40,left:40},padding:.4,colors:{scheme:"nivo"},animate:!0,motionConfig:"default",axisTop:null,axisRight:null,axisBottom:{tickSize:3,tickPadding:3,tickRotation:45,legend:"Academic Year",legendPosition:"middle",legendOffset:30,truncateTickAt:0},axisLeft:{tickSize:3,tickPadding:3,tickRotation:0,legend:"Students",legendPosition:"middle",legendOffset:-30},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:50,translateY:0,itemsSpacing:1,itemWidth:50,itemHeight:15,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:12,effects:[{on:"hover",style:{itemOpacity:1}}]}]})]})},bs=()=>{const n=E(),t=k(n.palette.mode),[s,o]=d.useState(!0),[a,l]=d.useState(0),[i,m]=d.useState(0),[x,u]=d.useState(0),[g,p]=d.useState(null),{usersData:S,currentAcademicYear:j,unreadEnquiriesCount:C,loading:A,error:D}=ve();if(d.useEffect(()=>{var f,v,w;S&&(j||j===null)&&(o(!1),l(((f=S.students)==null?void 0:f.length)||0),m(((v=S.teachers)==null?void 0:v.length)||0),u(((w=j==null?void 0:j.students)==null?void 0:w.length)||0)),D&&p(D.message||"An error occurred while fetching data.")},[S,j,D]),s||A)return e.jsx(Ee,{});if(g)return e.jsx(c,{m:"20px",children:e.jsxs(r,{variant:"h4",color:"error",children:["Error: ",g]})});const h={mt:"15px",fontWeight:"bold"};return e.jsxs(c,{m:"20px",children:[e.jsx(r,{variant:"h3",fontWeight:"600",mb:"20px",children:"School Administration Dashboard"}),e.jsxs(Ve,{children:[e.jsxs(P,{children:[e.jsx(y,{sm:6,md:3,children:e.jsxs(b,{children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Students"}),e.jsxs(c,{display:"flex",flexDirection:"column",alignItems:"center",mt:"25px",children:[e.jsx(it,{sx:{fontSize:"70px",color:t.blueAccent[200]}}),e.jsx(r,{variant:"h4",color:t.blueAccent[200],sx:h,children:`${a} students`}),e.jsx(r,{children:"Total students"})]})]})}),e.jsx(y,{sm:6,md:3,children:e.jsxs(b,{children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Teachers"}),e.jsxs(c,{display:"flex",flexDirection:"column",alignItems:"center",mt:"25px",children:[e.jsx(Le,{sx:{fontSize:"70px",color:t.blueAccent[200]}}),e.jsx(r,{variant:"h4",color:t.blueAccent[200],sx:h,children:`${i} teachers`}),e.jsx(r,{children:"Total teachers"})]})]})}),e.jsx(y,{sm:6,md:3,children:e.jsxs(b,{children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",children:"New Students"}),e.jsxs(c,{display:"flex",flexDirection:"column",alignItems:"center",mt:"25px",children:[e.jsx(ct,{sx:{fontSize:"70px",color:t.blueAccent[200]}}),e.jsx(r,{variant:"h4",color:t.blueAccent[200],sx:h,children:`${x} students`}),e.jsx(r,{children:"New students this academic year"})]})]})}),e.jsx(y,{sm:6,md:3,children:e.jsxs(b,{children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Unread Enquiries"}),e.jsxs(c,{display:"flex",flexDirection:"column",alignItems:"center",mt:"25px",children:[e.jsx(lt,{sx:{fontSize:"70px",color:t.blueAccent[200]}}),e.jsx(r,{variant:"h4",color:t.blueAccent[200],sx:h,children:C}),e.jsx(r,{children:"Total unread enquiries"})]})]})})]}),e.jsxs(P,{children:[e.jsx(y,{md:8,children:e.jsxs(b,{noFlex:!0,children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",children:"School fees data"}),e.jsx(c,{mt:"10px",children:e.jsx(gs,{})})]})}),e.jsx(y,{md:4,children:e.jsxs(b,{noFlex:!0,children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Outstanding Payments"}),e.jsx(c,{mt:"10px",children:e.jsx(ps,{})})]})})]}),e.jsxs(P,{children:[e.jsx(y,{md:4,children:e.jsxs(b,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",gutterBottom:!0,children:"Enrollment Stats"}),e.jsx(c,{mt:"10px",children:e.jsx(vs,{})})]})}),e.jsx(y,{md:4,children:e.jsxs(b,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",gutterBottom:!0,children:"Top Teachers"}),e.jsx(c,{mt:"10px",children:e.jsx(js,{})})]})}),e.jsx(y,{md:4,children:e.jsxs(b,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",gutterBottom:!0,children:"Class Distribution"}),e.jsx(c,{mt:"10px",children:e.jsx(xs,{})})]})})]}),e.jsx(P,{children:e.jsx(y,{md:12,children:e.jsxs(b,{noFlex:!0,children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",children:"School Activities"}),e.jsx(c,{mt:"10px",children:e.jsx(fs,{})})]})})})]})]})},Q=({progress:n=.75,size:t=40})=>{const s=E(),o=k(s.palette.mode),a=n*360,i=(m=>m>=.75?o.greenAccent[400]:m>=.5?o.greenAccent[700]:o.redAccent[700])(n);return e.jsx(c,{sx:{background:`radial-gradient(${o.primary[400]} 55%, transparent 56%),
            conic-gradient(${i} 0deg ${a}deg, ${o.blueAccent[200]} ${a}deg 360deg),
            ${o.primary[400]}`,borderRadius:"50%",width:`${t}px`,height:`${t}px`}})};function V(){const n=$t(),t=I(u=>{var g;return(g=u.users.user)==null?void 0:g._id}),s=I(u=>{var g;return(g=u.users.user)==null?void 0:g.userId}),o=I(u=>u.adminData.currentAcademicYear),{callApi:a}=K(),[l,i]=d.useState({sessionProgress:0,termAttendance:0,feeStatus:{percentagePaid:0,totalOutstanding:0},nextClass:null,missedClasses:[],subjectPerformance:null,allResources:[],assignments:[],timetable:[],loading:!1,error:null}),m=d.useCallback(async()=>{if(!t){i({sessionProgress:0,termAttendance:0,feeStatus:{percentagePaid:0,totalOutstanding:0},nextClass:null,missedClasses:[],subjectPerformance:null,allResources:[],assignments:[],timetable:[],loading:!1,error:"Student ID not found. Please log in."});return}i(u=>({...u,loading:!0,error:null}));try{const u=await a(`${Je}/student-dashboard/${t}`,"GET");if(u&&u.status==="success"){const{data:g}=u;n(St(g.currentAcademicYear||null)),i({sessionProgress:g.sessionProgress||0,termAttendance:g.termAttendance||0,feeStatus:g.feeStatus||{percentagePaid:0,totalOutstanding:0},nextClass:g.nextClass||null,missedClasses:g.missedClasses||[],subjectPerformance:g.subjectPerformance||null,allResources:g.allResources||[],assignments:g.assignments||[],timetable:g.timetable||[],loading:!1,error:null})}else i({sessionProgress:0,termAttendance:0,feeStatus:{percentagePaid:0,totalOutstanding:0},nextClass:null,missedClasses:[],subjectPerformance:null,allResources:[],assignments:[],timetable:[],loading:!1,error:(u==null?void 0:u.message)||"Failed to fetch student dashboard data"})}catch(u){i({sessionProgress:0,termAttendance:0,feeStatus:{percentagePaid:0,totalOutstanding:0},nextClass:null,missedClasses:[],subjectPerformance:null,allResources:[],assignments:[],timetable:[],loading:!1,error:u.message||"Failed to fetch student dashboard data"})}},[t,a,n]);return d.useEffect(()=>{m()},[m]),{...l,currentAcademicYear:o,formatDateToDDMMYYYY:u=>new Date(u).toLocaleDateString("en-GB"),userId:s}}const ys=()=>{const{fetchStudentData:n,loading:t,error:s}=V(),[o,a]=d.useState(null);if(d.useEffect(()=>{(async()=>{const m=await n();a(m)})()},[n]),t)return e.jsx(r,{children:"Loading..."});if(s)return e.jsxs(r,{children:["Error: ",s]});if(!o||o.sessionProgress===0)return e.jsx(r,{children:"No session progress data available"});const{sessionProgress:l}=o;return e.jsxs(c,{children:[e.jsx(r,{variant:"h6",fontWeight:"600",mb:"5px",children:"Session Progress"}),e.jsx(Q,{size:"125",progress:l/100}),e.jsxs(r,{variant:"body2",mt:"10px",children:["Academic year completion: ",l,"%"]})]})},Ss=()=>{const{fetchStudentData:n,loading:t,error:s}=V(),[o,a]=d.useState(null);if(d.useEffect(()=>{(async()=>{const m=await n();a(m)})()},[n]),t)return e.jsx(r,{children:"Loading..."});if(s)return e.jsxs(r,{children:["Error: ",s]});if(!o||o.termAttendance===0)return e.jsx(r,{children:"No attendance data available"});const{termAttendance:l}=o;return e.jsxs(c,{children:[e.jsx(r,{variant:"h6",fontWeight:"600",mb:"5px",children:"Term Attendance"}),e.jsx(Q,{size:"125",progress:l/100}),e.jsxs(r,{variant:"body2",mt:"10px",children:["Current term attendance: ",l,"%"]})]})},Cs=()=>{const{fetchStudentData:n,loading:t,error:s}=V(),[o,a]=d.useState(null);if(d.useEffect(()=>{(async()=>{const m=await n();a(m)})()},[n]),t)return e.jsx(r,{children:"Loading..."});if(s)return e.jsxs(r,{children:["Error: ",s]});if(!o||!o.feeStatus)return e.jsx(r,{children:"No payment data available"});const{feeStatus:l}=o;return e.jsxs(c,{children:[e.jsxs(r,{variant:"h6",fontWeight:"600",mb:"5px",children:["Fee Payment Status (",parseInt(l.percentagePaid),"%)"]}),e.jsx(Q,{size:"125",progress:l.percentagePaid/100}),e.jsxs(r,{variant:"body2",mt:"10px",children:["Outstanding Fees: $",l.totalOutstanding]})]})},As=()=>{const n=E(),t=k(n.palette.mode),{fetchStudentData:s,loading:o,error:a}=V(),[l,i]=d.useState(null);if(d.useEffect(()=>{(async()=>{const u=await s();i(u)})()},[s]),o)return e.jsx(r,{children:"Loading..."});if(a)return e.jsxs(r,{children:["Error: ",a]});if(!l||!l.nextClass)return e.jsx(r,{children:"No upcoming classes"});const{nextClass:m}=l;return e.jsxs(c,{textAlign:"center",children:[e.jsx(r,{variant:"h6",fontWeight:"600",mb:"5px",children:"Next Class"}),e.jsxs(c,{children:[e.jsx(Le,{sx:{fontSize:"30px",color:t.blueAccent[400]}}),e.jsx(r,{variant:"h6",children:m.subject}),e.jsx(r,{children:m.date}),e.jsx(r,{children:m.time}),e.jsxs(r,{children:["Location: ",m.location]})]})]})},Ds=()=>{const n=E(),t=k(n.palette.mode),{fetchStudentData:s,loading:o,error:a}=V(),[l,i]=d.useState(null);if(d.useEffect(()=>{(async()=>{const u=await s();i(u)})()},[s]),o)return e.jsx(r,{children:"Loading..."});if(a)return e.jsxs(r,{children:["Error: ",a]});if(!l||!l.subjectPerformance)return e.jsx(r,{children:"No performance data available"});const{subjectPerformance:m}=l;return e.jsx("div",{style:{height:"350px"},children:e.jsx(st,{data:m,animate:!0,motionConfig:"default",theme:{axis:{domain:{line:{stroke:t.grey[100]}},legend:{text:{fill:t.grey[100],fontSize:8}},ticks:{line:{stroke:t.grey[100],strokeWidth:1},text:{fill:t.grey[100],fontSize:8}}},legends:{text:{fill:t.grey[100],fontSize:8}},tooltip:{container:{color:t.primary[500]}}},colors:{datum:"color"},margin:{top:50,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:0,max:100,stacked:!1,reverse:!1},yFormat:" >-.2f",curve:"catmullRom",axisTop:null,axisRight:null,axisBottom:{tickSize:0,tickPadding:5,tickRotation:0,legend:"Month",legendOffset:36,legendPosition:"middle"},axisLeft:{tickValues:5,tickSize:3,tickPadding:5,tickRotation:0,legend:"Score (%)",legendOffset:-40,legendPosition:"middle"},enableGridX:!1,enableGridY:!1,pointSize:8,pointColor:{theme:"background"},pointBorderWidth:1,pointBorderColor:{from:"serieColor"},pointLabelYOffset:-12,useMesh:!0,legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemDirection:"left-to-right",itemWidth:80,itemHeight:20,itemOpacity:.75,symbolSize:12,symbolShape:"circle",symbolBorderColor:"rgba(0, 0, 0, .5)",effects:[{on:"hover",style:{itemBackground:"rgba(0, 0, 0, .03)",itemOpacity:1}}]}]})})},ks=()=>{const n=E(),t=k(n.palette.mode),{fetchStudentData:s,formatDateToDDMMYYYY:o,loading:a,error:l}=V(),[i,m]=d.useState(null);d.useEffect(()=>{(async()=>{const p=await s();m(p)})()},[s]);const x=n.palette.mode==="light"?t.blueAccent[800]:t.greenAccent[600];if(a)return e.jsx(r,{children:"Loading..."});if(l)return e.jsxs(r,{children:["Error: ",l]});if(!i||!i.missedClasses)return e.jsx(r,{children:"No missed classes data available"});const{missedClasses:u}=i;return e.jsxs(c,{children:[e.jsx(r,{variant:"h5",fontWeight:"600",mb:"15px",children:"Missed Classes"}),u.length>0?u.map(g=>e.jsx(pe,{sx:{mb:2},children:e.jsxs(je,{sx:{backgroundColor:x,textAlign:"left"},children:[e.jsx(r,{variant:"h6",children:g.subject}),e.jsx(r,{children:o(g.date)}),e.jsx(r,{children:g.time}),e.jsxs(r,{children:["Location: ",g.location]})]})},g.id)):e.jsx(r,{children:"You attended all classes"})]})},Es=()=>{const n=E(),t=k(n.palette.mode),{callApi:s}=K(),[o,a]=d.useState(null);d.useEffect(()=>{(async()=>{try{const u=await s(J.ANNOUNCEMENT,"GET");u&&u.data&&a(u.data)}catch(u){console.error("Error fetching announcements:",u)}})()},[s]);const l=n.palette.mode==="light"?t.blueAccent[800]:t.greenAccent[600],m=o||[{id:"1",title:"End of Term Exams",message:"Exams start on July 1, 2025.",date:"2025-06-20"},{id:"2",title:"Sports Day",message:"Join us on July 15, 2025.",date:"2025-06-18"}];return e.jsxs(c,{children:[e.jsx(r,{variant:"h5",fontWeight:"600",mb:"15px",children:"Announcements"}),m.length>0?m.map(x=>e.jsx(pe,{sx:{mb:2},children:e.jsxs(je,{sx:{backgroundColor:l,textAlign:"left"},children:[e.jsx(r,{variant:"h6",children:x.title}),e.jsx(r,{variant:"body2",children:x.message}),e.jsx(r,{variant:"caption",color:"gray",children:x.date})]})},x.id)):e.jsx(r,{children:"No announcements available"})]})},ws=()=>{const n=E(),t=k(n.palette.mode),{allResources:s}=V(),a=s||[{title:"Math Textbook",url:"https://example.com/math-textbook.pdf"},{title:"Science Notes",url:"https://example.com/science-notes.pdf"}],l=n.palette.mode==="light"?t.blueAccent[800]:t.greenAccent[600];return e.jsxs(c,{children:[e.jsx(r,{variant:"h5",fontWeight:"600",mb:"15px",children:"Useful Resources"}),a.length>0?a.map((i,m)=>e.jsx(pe,{sx:{mb:2},children:e.jsxs(je,{sx:{backgroundColor:l,textAlign:"left"},children:[e.jsx(r,{variant:"h6",children:i.title}),e.jsx("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",children:i.url})]})},m)):e.jsx(r,{children:"No Resources Available"})]})},Ls=()=>{const n=E(),t=k(n.palette.mode),s=[{id:"1",title:"Math Midterm Exam",start:"2025-07-01T09:00:00",end:"2025-07-01T11:00:00",allDay:!1},{id:"2",title:"School Sports Day",start:"2025-07-15",allDay:!0},{id:"3",title:"Science Club Meeting",start:"2025-07-20T15:00:00",end:"2025-07-20T16:30:00",allDay:!1},{id:"4",title:"Parent-Teacher Conference",start:"2025-07-25T10:00:00",end:"2025-07-25T15:00:00",allDay:!1},{id:"5",title:"School Holiday - Summer Break",start:"2025-08-01",end:"2025-08-15",allDay:!0}],[o,a]=d.useState(s),[l,i]=d.useState(!1);d.useEffect(()=>{const x=JSON.parse(localStorage.getItem("events"))||[];x.length>0&&a([...s,...x])},[]);const m=()=>{i(x=>!x)};return e.jsx(c,{my:"10px",children:e.jsxs(c,{display:"flex",justifyContent:"center",flexDirection:"column",children:[e.jsxs(c,{flex:"1 1 20%",backgroundColor:t.primary[400],py:"15px",borderRadius:"4px",sx:{width:"100%",height:"70vh",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs(c,{display:"flex",alignItems:"center",marginBottom:"10px",children:[e.jsx(Pe,{onClick:m,sx:{backgroundColor:t.blueAccent[500],"&:hover":{backgroundColor:t.blueAccent[700]},padding:"10px",borderRadius:"50%"},children:l?e.jsx(Ne,{}):e.jsx(ze,{})}),e.jsx(r,{variant:"h6",sx:{marginLeft:"10px",fontWeight:"800"},children:l?"Hide Events":"Show Events"})]}),l&&e.jsx(r,{variant:"h4",sx:{marginBottom:"10px"},children:"Events"}),l&&e.jsx(xe,{children:o.length===0?e.jsx(r,{children:"No events"}):o.map(x=>e.jsx(ge,{sx:{backgroundColor:t.blueAccent[500],margin:"10px 0",borderRadius:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.jsx(fe,{primary:x.title,secondary:e.jsx(r,{sx:{fontSize:"0.7em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:new Date(x.start).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})})},x.id))})]}),e.jsx(c,{flex:"1 1 100%",sx:{width:"100%"},children:e.jsx(Re,{height:"70vh",plugins:[Me,Te,Fe],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},initialView:"dayGridMonth",editable:!1,selectable:!1,dayMaxEvents:!0,events:o})})]})})},Rs=()=>{const n=E();k(n.palette.mode);const[t,s]=d.useState(!0),[o,a]=d.useState(null),{loading:l,error:i}=V();return d.useEffect(()=>{l||s(!1),i&&a(i.message||"An error occurred while fetching data.")},[l,i]),t||l?e.jsx(Ee,{}):o?e.jsx(c,{m:"20px",children:e.jsxs(r,{variant:"h4",color:"error",children:["Error: ",o]})}):e.jsxs(c,{m:"20px",children:[e.jsx(r,{variant:"h3",fontWeight:"600",mb:"20px",children:"Student Dashboard"}),e.jsxs(Ve,{children:[e.jsxs(P,{children:[e.jsx(y,{sm:6,md:3,children:e.jsx(b,{children:e.jsx(ys,{})})}),e.jsx(y,{sm:6,md:3,children:e.jsx(b,{children:e.jsx(Ss,{})})}),e.jsx(y,{sm:6,md:3,children:e.jsx(b,{children:e.jsx(Cs,{})})}),e.jsx(y,{sm:6,md:3,children:e.jsx(b,{noFlex:!0,children:e.jsx(As,{})})})]}),e.jsxs(P,{children:[e.jsx(y,{md:8,children:e.jsxs(b,{height:"350px",noFlex:!0,children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",mb:"10px",children:"Subject Performance"}),e.jsx(Ds,{})]})}),e.jsx(y,{md:4,children:e.jsx(b,{noFlex:!0,children:e.jsx(ks,{})})})]}),e.jsxs(P,{children:[e.jsx(y,{md:6,children:e.jsx(b,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:e.jsx(Es,{})})}),e.jsx(y,{md:6,children:e.jsx(b,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:e.jsx(ws,{})})})]}),e.jsx(P,{children:e.jsx(y,{md:12,children:e.jsxs(b,{noFlex:!0,children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",mb:"10px",children:"School Activities"}),e.jsx(Ls,{})]})})})]})]})};function B(){const[n,t]=d.useState({termProgress:0,studentAttendance:0,assignmentSubmissionRate:{totalAssignmentRate:0},nextClass:null,topStudents:[],leastActiveStudents:[],loading:!1,error:null}),{callApi:s}=K(),o=I(l=>{var i;return(i=l.users.user)==null?void 0:i._id}),a=d.useCallback(async()=>{if(!o){t(l=>({...l,loading:!1,error:"Teacher ID not found. Please log in."}));return}t(l=>({...l,loading:!0,error:null}));try{const l=await s(`${Je}/teacher-dashboard/${o}`,"GET");if(l&&l.status==="success"){const{data:i}=l;t({termProgress:i.termProgress||0,studentAttendance:i.studentAttendance||0,assignmentSubmissionRate:i.assignmentSubmissionRate||{totalAssignmentRate:0},nextClass:i.nextClass||null,topStudents:i.topStudents||[],leastActiveStudents:i.leastActiveStudents||[],loading:!1,error:null})}else t(i=>({...i,loading:!1,error:(l==null?void 0:l.message)||"Failed to fetch teacher dashboard data"}))}catch(l){t(i=>({...i,loading:!1,error:l.message||"Failed to fetch teacher dashboard data"}))}},[o,s]);return d.useEffect(()=>{a()},[a]),n}const Ms=()=>{const n=E(),t=k(n.palette.mode),{termProgress:s}=B();return e.jsxs(c,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Term Progress"}),e.jsx(c,{mt:"25px",children:s>0?e.jsxs(e.Fragment,{children:[e.jsx(Q,{size:"125",progress:s/100}),e.jsx(r,{variant:"h5",color:t.blueAccent[500],sx:{mt:"15px"},children:`${s}% completed`}),e.jsx(r,{children:"Current term completion"})]}):e.jsx(r,{variant:"body2",color:t.grey[300],children:"No term progress available."})})]})},Ts=()=>{const n=E(),t=k(n.palette.mode),{studentAttendance:s}=B();return e.jsxs(c,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Student Attendance"}),e.jsx(c,{mt:"25px",children:s>0?e.jsxs(e.Fragment,{children:[e.jsx(Q,{size:"125",progress:s/100}),e.jsx(r,{variant:"h5",color:t.blueAccent[500],sx:{mt:"15px"},children:`${s}% attendance rate`}),e.jsx(r,{children:"Average student attendance"})]}):e.jsx(r,{variant:"body2",color:t.grey[300],children:"No attendance data available."})})]})},Fs=()=>{const n=E(),t=k(n.palette.mode),{assignmentSubmissionRate:s}=B();return e.jsxs(c,{display:"flex",flexDirection:"column",alignItems:"center",children:[e.jsx(r,{variant:"h5",fontWeight:"600",textAlign:"center",children:"Assignment Submissions"}),e.jsx(c,{mt:"25px",children:s&&s.totalAssignmentRate>0?e.jsxs(e.Fragment,{children:[e.jsx(Q,{size:"125",progress:s.totalAssignmentRate/100}),e.jsx(r,{variant:"h5",color:t.blueAccent[500],sx:{mt:"15px"},children:`${s.totalAssignmentRate}% submission rate`}),e.jsx(r,{children:"Average assignment submission rate"})]}):e.jsx(r,{variant:"body2",color:t.grey[300],children:"No submission data available."})})]})},Ps=()=>{const n=E(),t=k(n.palette.mode),{nextClass:s}=B();return e.jsxs(c,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",children:[e.jsx(r,{variant:"h5",fontWeight:"600",mb:"15px",textAlign:"center",children:"Next Class"}),s?e.jsxs(c,{textAlign:"center",children:[e.jsx(Le,{sx:{fontSize:"50px",color:t.blueAccent[500]}}),e.jsx(r,{variant:"h6",children:s.subject}),e.jsx(r,{children:s.date}),e.jsx(r,{children:s.time}),e.jsxs(r,{children:["Location: ",s.location]})]}):e.jsx(r,{variant:"body2",color:t.grey[300],children:"No upcoming classes scheduled."})]})},Ns=()=>{const n=E(),t=k(n.palette.mode),[s,o]=d.useState([]),[a,l]=d.useState(!1),[i,m]=d.useState(!1),[x,u]=d.useState({title:"",start:"",end:"",allDay:!1}),[g,p]=d.useState(null),S=[{id:"1",title:"Math Midterm Exam",start:"2025-07-01T09:00:00",end:"2025-07-01T11:00:00",allDay:!1},{id:"2",title:"School Sports Day",start:"2025-07-15",allDay:!0},{id:"3",title:"Teachers Meeting",start:"2025-07-20T15:00:00",end:"2025-07-20T16:30:00",allDay:!1}];d.useEffect(()=>{const h=JSON.parse(localStorage.getItem("events"))||[];o([...S,...h])},[]);const j=h=>{p(h.dateStr),u({title:"",start:h.dateStr,end:h.dateStr,allDay:h.allDay}),m(!0)},C=h=>{if(window.confirm(`Are you sure you want to delete the event "${h.event.title}"?`)){const f=s.filter(v=>v.id!==h.event.id);o(f),localStorage.setItem("events",JSON.stringify(f.filter(v=>!S.some(w=>w.id===v.id))))}},A=()=>{const h=new Date().getTime().toString(),f=[...s,{...x,id:h}];o(f),localStorage.setItem("events",JSON.stringify(f.filter(v=>!S.some(w=>w.id===v.id)))),m(!1),u({title:"",start:"",end:"",allDay:!1})},D=()=>{l(h=>!h)};return e.jsxs(c,{my:"10px",children:[e.jsx(r,{variant:"h5",fontWeight:"600",mb:"15px",children:"Event Calendar"}),e.jsxs(c,{display:"flex",justifyContent:"center",flexDirection:"column",children:[e.jsxs(c,{flex:"1 1 20%",backgroundColor:t.primary[400],py:"15px",borderRadius:"4px",sx:{width:"100%",height:"70vh",overflowY:"auto",overflowX:"hidden",display:"flex",flexDirection:"column"},children:[e.jsxs(c,{display:"flex",alignItems:"center",marginBottom:"10px",children:[e.jsx(Pe,{onClick:D,sx:{backgroundColor:t.blueAccent[500],"&:hover":{backgroundColor:t.blueAccent[700]},padding:"10px",borderRadius:"50%"},children:a?e.jsx(Ne,{}):e.jsx(ze,{})}),e.jsx(r,{variant:"h6",sx:{marginLeft:"10px",fontWeight:"800"},children:a?"Hide Events":"Show Events"})]}),a&&e.jsx(r,{variant:"h4",sx:{marginBottom:"10px"},children:"Events"}),a&&e.jsx(xe,{children:s.length===0?e.jsx(r,{children:"No events"}):s.map(h=>e.jsx(ge,{sx:{backgroundColor:t.blueAccent[500],margin:"10px 0",borderRadius:"2px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.jsx(fe,{primary:h.title,secondary:e.jsx(r,{sx:{fontSize:"0.7em",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:new Date(h.start).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})})},h.id))})]}),e.jsx(c,{flex:"1 1 100%",sx:{width:"100%"},children:e.jsx(Re,{height:"70vh",plugins:[Me,Te,Fe,nt],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},initialView:"dayGridMonth",editable:!0,selectable:!0,select:j,eventClick:C,dayMaxEvents:!0,events:s})})]}),e.jsxs(oe,{open:i,handleClose:()=>m(!1),title:"Add Event",children:[e.jsx(N,{label:"Event Title",value:x.title,onChange:h=>u({...x,title:h.target.value}),fullWidth:!0,margin:"normal"}),e.jsx(N,{label:"Start Date",type:"date",value:x.start,onChange:h=>u({...x,start:h.target.value}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),e.jsx(N,{label:"End Date",type:"date",value:x.end,onChange:h=>u({...x,end:h.target.value}),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),e.jsx(Ft,{variant:"contained",color:"primary",onClick:A,sx:{mt:2},disabled:!x.title||!x.start,children:"Add Event"})]})]})},zs=()=>{const n=E(),t=k(n.palette.mode),{callApi:s}=K(),[o,a]=d.useState(null);d.useEffect(()=>{(async()=>{try{const u=await s(J.ANNOUNCEMENT,"GET");u&&u.data&&a(u.data)}catch(u){console.error("Error fetching announcements:",u)}})()},[s]);const l=n.palette.mode==="light"?t.blueAccent[800]:t.greenAccent[600],m=o||[{id:"1",title:"End of Term Exams",message:"Exams start on July 1, 2025.",date:"2025-06-20"},{id:"2",title:"Teachers Meeting",message:"Meeting on July 10, 2025.",date:"2025-06-18"}];return e.jsxs(c,{children:[e.jsx(r,{variant:"h5",fontWeight:"600",mb:"15px",children:"Announcements"}),m.length>0?m.map(x=>e.jsx(pe,{sx:{mb:2},children:e.jsxs(je,{sx:{backgroundColor:l,textAlign:"left"},children:[e.jsx(r,{variant:"h6",children:x.title}),e.jsx(r,{variant:"body2",children:x.message}),e.jsx(r,{variant:"caption",color:"gray",children:x.date})]})},x.id)):e.jsx(r,{children:"No announcements available"})]})},$s=()=>{const n=E(),t=k(n.palette.mode),{topStudents:s}=B(),o=n.palette.mode==="light"?t.greenAccent[300]:t.primary[500];return e.jsxs(c,{children:[e.jsx(r,{variant:"h5",fontWeight:"600",mb:"15px",children:"Top Students by Performance"}),s&&s.length>0?s.map((a,l)=>e.jsxs(c,{display:"flex",alignItems:"center",justifyContent:"flex-start",mb:2,backgroundColor:o,p:"15px",borderRadius:"8px",sx:{boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)"},children:[e.jsx(et,{src:a.profilePicture||"",alt:`${a.firstName} ${a.lastName}`,sx:{width:50,height:50,mr:2}}),e.jsxs(c,{children:[e.jsx(r,{variant:"h6",color:"white",children:`${a.firstName} ${a.lastName}`}),e.jsxs(r,{variant:"body2",color:"white",children:["Performance Score: ",a.performanceScore,"%"]})]})]},l)):e.jsx(r,{variant:"body2",color:t.grey[300],children:"No top students available."})]})},Os=()=>{const n=E(),t=k(n.palette.mode),{leastActiveStudents:s}=B(),o=n.palette.mode==="light"?t.greenAccent[300]:t.primary[500];return e.jsxs(c,{children:[e.jsx(r,{variant:"h5",fontWeight:"600",mb:"15px",children:"Least Active Students"}),s&&s.length>0?s.map((a,l)=>e.jsxs(c,{display:"flex",alignItems:"center",justifyContent:"flex-start",mb:2,backgroundColor:o,p:"15px",borderRadius:"8px",sx:{boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)"},children:[e.jsx(et,{src:a.profilePicture||"",alt:`${a.firstName} ${a.lastName}`,sx:{width:50,height:50,mr:2}}),e.jsxs(c,{children:[e.jsx(r,{variant:"h6",color:"white",children:`${a.firstName} ${a.lastName}`}),e.jsxs(r,{variant:"body2",color:"white",children:["Activity Rate: ",a.activityRate,"%"]})]})]},l)):e.jsx(r,{variant:"body2",color:t.grey[300],children:"No least active students available."})]})},Ws=()=>{const n=E();k(n.palette.mode),qe(n.breakpoints.down("sm")),qe(n.breakpoints.between("sm","md"));const[t,s]=d.useState(!0),[o,a]=d.useState(null),{loading:l,error:i}=B();return d.useEffect(()=>{l||s(!1),i&&a(i.message||"An error occurred while fetching data.")},[l,i]),t||l?e.jsx(Ee,{}):o?e.jsx(c,{m:"20px",children:e.jsxs(r,{variant:"h4",color:"error",children:["Error: ",o]})}):e.jsxs(c,{m:"20px",children:[e.jsx(r,{variant:"h3",fontWeight:"600",mb:"20px",children:"Teacher Dashboard"}),e.jsxs(Ve,{children:[e.jsxs(P,{children:[e.jsx(y,{sm:6,md:3,children:e.jsx(b,{children:e.jsx(Ms,{})})}),e.jsx(y,{sm:6,md:3,children:e.jsx(b,{children:e.jsx(Ts,{})})}),e.jsx(y,{sm:6,md:3,children:e.jsx(b,{children:e.jsx(Fs,{})})}),e.jsx(y,{sm:6,md:3,children:e.jsx(b,{children:e.jsx(Ps,{})})})]}),e.jsxs(P,{children:[e.jsx(y,{md:8,children:e.jsx(b,{noFlex:!0,moreStyles:{height:"500px",overflowY:"auto"},children:e.jsx(Ns,{})})}),e.jsx(y,{md:4,children:e.jsx(b,{noFlex:!0,moreStyles:{height:"500px",overflowY:"auto"},children:e.jsx(zs,{})})})]}),e.jsxs(P,{children:[e.jsx(y,{md:6,children:e.jsx(b,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:e.jsx($s,{})})}),e.jsx(y,{md:6,children:e.jsx(b,{noFlex:!0,moreStyles:{height:"400px",overflowY:"auto"},children:e.jsx(Os,{})})})]})]})]})};var _e={},Is=le;Object.defineProperty(_e,"__esModule",{value:!0});var re=_e.default=void 0,Vs=Is(ie()),_s=e;re=_e.default=(0,Vs.default)((0,_s.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-7 9h-2V5h2zm0 4h-2v-2h2z"}),"Announcement");const Hs=({openAnnouncementModal:n,setModalOpen:t})=>{var D;const s=I(h=>h.users.user),[o,a]=d.useState({title:"",message:"",dueDate:"",classLevel:"",subclass:""}),[l,i]=d.useState([]),{data:m,loading:x,callApi:u}=K(),[g,p]=d.useState(!1),[S,j]=d.useState("");d.useEffect(()=>{if(!s||!s._id){j("User not authenticated. Please log in again."),p(!0);return}s.role==="teacher"&&n&&(async()=>{try{const f=await u(`${J.ACADEMIC_CLASSES}/assigned`,"GET");f&&f.data?i(f.data):(j("No assigned classes found."),p(!0))}catch(f){j("Failed to load assigned classes: "+f.message),p(!0)}})()},[n,s,u]);const C=h=>{const{name:f,value:v}=h.target;a(w=>({...w,[f]:v,...f==="classLevel"?{subclass:""}:{}}))},A=async()=>{if(!s||!s._id){j("User not authenticated. Please log in again."),p(!0);return}const{title:h,message:f,dueDate:v,classLevel:w,subclass:Y}=o;if(!h||!f||!v){j("Please fill all required fields (title, message, due date)."),p(!0);return}if(s.role==="teacher"&&(!w||!Y)){j("Please select a class level and subclass."),p(!0);return}const O=s.role==="teacher"?{title:h,message:f,date:v,createdBy:s._id,targets:[{classLevel:w,subclass:Y}]}:{title:h,message:f,date:v,createdBy:s._id},G=s.role==="teacher"?`${J.ANNOUNCEMENT}/class`:`${J.ANNOUNCEMENT}/general`;try{const M=await u(G,"POST",O);M&&M.status==="success"&&M.data&&M.data.announcement?(a({title:"",message:"",dueDate:"",classLevel:"",subclass:""}),j(""),t(!1),p(!0)):(j("Failed to submit announcement. Please try again."),p(!0))}catch(M){j(M.message||"Failed to submit announcement."),p(!0)}};return!s||!s._id?e.jsx(oe,{open:n,onClose:()=>t(!1),title:"Make Announcement",children:e.jsx(c,{sx:{display:"flex",justifyContent:"center",padding:2},children:e.jsx(Wt,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(oe,{open:n,onClose:()=>t(!1),title:"Make Announcement",onConfirm:A,children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(N,{label:"Title",name:"title",value:o.title,onChange:C,fullWidth:!0,required:!0}),e.jsx(N,{label:"Message",name:"message",value:o.message,onChange:C,fullWidth:!0,multiline:!0,rows:4,required:!0}),e.jsx(N,{label:"Due Date",name:"dueDate",type:"date",value:o.dueDate,onChange:C,fullWidth:!0,InputLabelProps:{shrink:!0},required:!0}),s.role==="teacher"&&e.jsxs(e.Fragment,{children:[e.jsxs(Ae,{fullWidth:!0,children:[e.jsx(De,{children:"Class Level"}),e.jsx(ke,{name:"classLevel",value:o.classLevel,onChange:C,required:!0,children:l.map(h=>e.jsxs(ae,{value:h._id,children:[h.section," ",h.name]},h._id))})]}),e.jsxs(Ae,{fullWidth:!0,children:[e.jsx(De,{children:"Subclass"}),e.jsx(ke,{name:"subclass",value:o.subclass,onChange:C,required:!0,disabled:!o.classLevel,children:o.classLevel&&((D=l.find(h=>h._id===o.classLevel))==null?void 0:D.subclasses.map(h=>e.jsx(ae,{value:h.letter,children:h.letter},h.letter)))})]})]})]})}),e.jsx(rt,{open:g,isLoading:x,onClose:()=>p(!1),title:"Announcement Submission",message:m&&m.status==="success"?"Announcement submitted successfully!":S||"Could not submit announcement. Please try again."})]})},Bs=({openFeedbackModal:n,setModalOpen:t})=>{const[s,o]=d.useState(""),[a,l]=d.useState(""),[i,m]=d.useState(""),[x,u]=d.useState(""),{data:g,loading:p,error:S,callApi:j}=K(),[C,A]=d.useState(!1),D=async()=>{const h={name:s,role:a,date:i,comments:x};await j(J.FEEDBACKS,"POST",h),S?console.error("Error submitting feedback:",S):(A(!0),o(""),l(""),m(""),u(""))};return e.jsxs(e.Fragment,{children:[e.jsx(oe,{open:n,onClose:()=>t(!1),title:"Send Feedbacks",onConfirm:D,children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(N,{label:"Name",value:s,onChange:h=>o(h.target.value),fullWidth:!0,margin:"normal"}),e.jsxs(Ae,{fullWidth:!0,margin:"normal",children:[e.jsx(De,{children:"Role"}),e.jsxs(ke,{value:a,onChange:h=>l(h.target.value),children:[e.jsx(ae,{value:"Student",children:"Student"}),e.jsx(ae,{value:"Instructor",children:"Instructor"}),e.jsx(ae,{value:"Worker",children:"Worker"})]})]}),e.jsx(N,{label:"Date",type:"date",value:i,onChange:h=>m(h.target.value),fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),e.jsx(N,{label:"Comments",value:x,onChange:h=>u(h.target.value),fullWidth:!0,margin:"normal",multiline:!0,rows:4})]})}),e.jsx(rt,{open:C,isLoading:p,onClose:()=>A(!1),title:"Feedback confirmation",message:g?"Feedback submitted successfully!":"Could not submit announcement."})]})},Ys=({home:n})=>{const[t,s]=d.useState(!1),[o,a]=d.useState(!1),l=E();k(l.palette.mode);const i=I(m=>m.users.user);return!i||!i.firstName?e.jsx(c,{children:e.jsx(r,{children:"Loading user data..."})}):e.jsxs(c,{children:[e.jsxs(c,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.jsx(Pt,{home:!0,title:i.firstName,subtitle:"Welcome to your dashboard"}),e.jsxs(c,{sx:{display:"flex",gap:"10px"},children:[i.role==="admin"&&e.jsxs(c,{sx:{display:"flex",flexDirection:{xs:"column",sm:"column",md:"row"},alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(se,{icon:e.jsx(ot,{sx:{fontSize:{xs:"16px",sm:"18px",md:"20px"}}}),content:"Download Reports"}),e.jsx(se,{icon:e.jsx(re,{sx:{fontSize:{xs:"16px",sm:"18px",md:"20px"}}}),content:"Make announcement",onClick:()=>a(!0)})]}),i.role==="teacher"&&e.jsxs(c,{sx:{display:"flex",flexDirection:{xs:"column",sm:"column",md:"row"},alignItems:"center",justifyContent:"center",gap:"10px"},children:[e.jsx(se,{icon:e.jsx(re,{sx:{fontSize:{xs:"16px",sm:"18px",md:"20px"}}}),content:"Make announcement",onClick:()=>a(!0)}),e.jsx(se,{icon:e.jsx(re,{sx:{fontSize:{xs:"16px",sm:"18px",md:"20px"}}}),content:"Submit Feedback",onClick:()=>s(!0)}),e.jsxs(c,{children:[e.jsx(ts,{sx:{fontSize:{xs:"1em",sm:"1.2em"}},value:i.rating,readOnly:!0,precision:.1}),e.jsxs(r,{variant:"h6",sx:{fontSize:{xs:"0.8em",sm:"1em"}},children:["Rating: ",i.rating]})]})]}),i.role==="student"&&e.jsx(c,{sx:{display:"flex",flexDirection:{xs:"column",sm:"column",md:"row"},alignItems:"center",justifyContent:"center",gap:"10px"},children:e.jsx(se,{icon:e.jsx(re,{sx:{fontSize:{xs:"16px",sm:"18px",md:"20px"}}}),content:"Submit Feedback",onClick:()=>s(!0)})}),e.jsx(Hs,{openAnnouncementModal:o,setModalOpen:a}),e.jsx(Bs,{openFeedbackModal:t,setModalOpen:s})]})]}),i.role==="admin"||i.role==="superadmin"?e.jsx(bs,{user:i}):i.role==="student"?e.jsx(Rs,{user:i}):i.role==="teacher"?e.jsx(Ws,{user:i}):null]})},Gs=Ot(Ys),vn=()=>e.jsx("div",{children:e.jsx(Gs,{home:!0})});export{vn as default};
