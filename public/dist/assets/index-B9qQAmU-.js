import{j as a,r as n,f as D}from"./index-Crajziag.js";import{M as X,t as na,r as Oa}from"./modal-BxSZIXpZ.js";import{H as ka}from"./Header-DEjrRT75.js";import{a as Ma,b as ie,T as La}from"./table-BYEakSrK.js";import{w as $a}from"./dasboardPagesContainer-BNOxaAPh.js";import{u as M}from"./useApi-BHeEGMLZ.js";import{d as _a}from"./Edit-Cvz5w9Jn.js";import{d as Ya}from"./confirmationModal-DIJZeCIh.js";import{d as Wa}from"./Visibility-lckRYuGE.js";import{T as u,y as S,x as Oe,j as sa,q as qa,v as ke}from"./TextField-CFy9rWQ5.js";import{C as Me}from"./customIconButton-CkXk0Ewf.js";import"./IconButton-CyfN-QTB.js";import"./index-nIG9dKGK.js";import"./MenuItem-CwQCBUF3.js";import"./index-CXq0dDQS.js";import"./loadingButton-B3YlAn5t.js";import"./CircularProgress-B68jtOui.js";import"./crystal-land-log-removebg-DVF-nlbN.js";import"./useSlot-hCJ7RCMh.js";import"./useMediaQuery-BB3uwTyy.js";const Ua=({open:b,onClose:s,onSave:t,record:m,title:h="Edit Record"})=>{const[r,v]=n.useState(m||{}),g=A=>{v({...r,[A.target.name]:A.target.value})},c=()=>{t(r),s()};return a.jsxs(X,{open:b,onClose:s,title:h,onConfirm:c,confirmMessage:"Save",styleProps:{padding:"20px"},children:[a.jsxs(u,{children:["ID: ",(m==null?void 0:m.id)||"N/A"]}),a.jsx(S,{label:m!=null&&m.category?"Category":"Source",name:m!=null&&m.category?"category":"source",value:r.category||r.source||"",onChange:g,fullWidth:!0,margin:"normal"}),a.jsx(S,{label:"Amount",name:"amount",value:r.amount||"",onChange:g,fullWidth:!0,margin:"normal",type:"number"}),a.jsx(S,{label:"Date",name:"date",value:r.date||"",onChange:g,fullWidth:!0,margin:"normal",type:"date"}),r.description!==void 0&&a.jsx(S,{label:"Description",name:"description",value:r.description||"",onChange:g,fullWidth:!0,margin:"normal"})]})},Va=({open:b,onClose:s,onSave:t,record:m,students:h=[],classLevels:r=[],terms:v=[],academicYears:g=[]})=>{const[c,A]=n.useState({studentId:"",studentName:"",classLevelId:"",class:"",termId:"",termName:"",academicYearId:"",academicYear:"",amountPaid:"",datePaid:"",method:"",reference:""}),p=l=>{A({...c,[l.target.name]:l.target.value})},G=()=>{t(c),s()};return a.jsxs(X,{open:b,onClose:s,title:"Pay Student Fees",onConfirm:G,confirmMessage:"Save Payment",styleProps:{padding:"20px"},children:[a.jsxs(S,{label:"Student",name:"studentId",value:c.studentId,onChange:p,fullWidth:!0,margin:"normal",select:!0,SelectProps:{native:!0},required:!0,children:[a.jsx("option",{value:"",children:"Select Student"}),h.map(l=>a.jsx("option",{value:l._id,children:`${l.firstName} ${l.lastName}`},l._id))]}),a.jsxs(S,{label:"Class",name:"classLevelId",value:c.classLevelId,onChange:p,fullWidth:!0,margin:"normal",select:!0,SelectProps:{native:!0},required:!0,children:[a.jsx("option",{value:"",children:"Select Class"}),r.map(l=>a.jsx("option",{value:l._id,children:l.name},l._id))]}),a.jsxs(S,{label:"Term",name:"termId",value:c.termId,onChange:p,fullWidth:!0,margin:"normal",select:!0,SelectProps:{native:!0},required:!0,children:[a.jsx("option",{value:"",children:"Select Term"}),v.map(l=>a.jsx("option",{value:l._id,children:l.name},l._id))]}),a.jsxs(S,{label:"Academic Year",name:"academicYearId",value:c.academicYearId,onChange:p,fullWidth:!0,margin:"normal",select:!0,SelectProps:{native:!0},required:!0,children:[a.jsx("option",{value:"",children:"Select Academic Year"}),g.map(l=>a.jsx("option",{value:l._id,children:l.name},l._id))]}),a.jsx(S,{label:"Amount Paid",name:"amountPaid",value:c.amountPaid,onChange:p,fullWidth:!0,margin:"normal",type:"number",required:!0}),a.jsx(S,{label:"Date Paid",name:"datePaid",value:c.datePaid,onChange:p,fullWidth:!0,margin:"normal",type:"date",required:!0}),a.jsxs(S,{label:"Payment Method",name:"method",value:c.method,onChange:p,fullWidth:!0,margin:"normal",select:!0,SelectProps:{native:!0},children:[a.jsx("option",{value:"",children:"Select Method"}),a.jsx("option",{value:"Cash",children:"Cash"}),a.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),a.jsx("option",{value:"Cheque",children:"Cheque"})]}),a.jsx(S,{label:"Reference",name:"reference",value:c.reference,onChange:p,fullWidth:!0,margin:"normal"})]})},Ba=({open:b,onClose:s,onSave:t,record:m,title:h="Add Revenue"})=>{const[r,v]=n.useState(m||{source:"",amount:"",date:"",description:""}),g=A=>{v({...r,[A.target.name]:A.target.value})},c=()=>{t(r),s()};return a.jsxs(X,{open:b,onClose:s,title:h,onConfirm:c,confirmMessage:"Save Revenue",styleProps:{padding:"20px"},children:[a.jsx(S,{label:"Source",name:"source",value:r.source,onChange:g,fullWidth:!0,margin:"normal",required:!0}),a.jsx(S,{label:"Amount",name:"amount",value:r.amount,onChange:g,fullWidth:!0,margin:"normal",type:"number",required:!0}),a.jsx(S,{label:"Date",name:"date",value:r.date,onChange:g,fullWidth:!0,margin:"normal",type:"date",required:!0}),a.jsx(S,{label:"Description",name:"description",value:r.description,onChange:g,fullWidth:!0,margin:"normal"})]})},Ha=({open:b,onClose:s,onSave:t,record:m,title:h="Add Expenditure"})=>{const[r,v]=n.useState(m||{source:"",amount:"",date:"",description:""}),g=A=>{v({...r,[A.target.name]:A.target.value})},c=()=>{t(r),s()};return a.jsxs(X,{open:b,onClose:s,title:h,onConfirm:c,confirmMessage:"Save Expenditure",styleProps:{padding:"20px"},children:[a.jsx(S,{label:"Amount",name:"amount",value:r.amount,onChange:g,fullWidth:!0,margin:"normal",type:"number",required:!0}),a.jsx(S,{label:"Date",name:"date",value:r.date,onChange:g,fullWidth:!0,margin:"normal",type:"date",required:!0}),a.jsx(S,{label:"Description",name:"description",value:r.description,onChange:g,fullWidth:!0,margin:"normal"})]})},za=({open:b,onClose:s,onConfirm:t,record:m})=>a.jsx(X,{open:b,onClose:s,title:"Confirm Delete",onConfirm:t,confirmMessage:"Delete",styleProps:{padding:"20px"},children:a.jsxs(u,{children:["Are you sure you want to delete this record? ",(m==null?void 0:m.id)&&`ID: ${m.id}`]})}),Xa=({open:b,onClose:s,record:t})=>a.jsxs(X,{open:b,onClose:s,title:"Record Details",noConfirm:!0,styleProps:{padding:"20px"},children:[a.jsxs(u,{children:["Student Name: ",(t==null?void 0:t.studentName)||"N/A"]}),a.jsxs(u,{children:["Class/Source/Category: ",(t==null?void 0:t.class)||(t==null?void 0:t.source)||(t==null?void 0:t.category)||"N/A"]}),(t==null?void 0:t.termName)&&a.jsxs(u,{children:["Term: ",t.termName||"N/A"]}),a.jsxs(u,{children:["Amount/Fees Paid: ",typeof((t==null?void 0:t.feesPaid)||(t==null?void 0:t.amount))=="number"?`₦${((t==null?void 0:t.feesPaid)||(t==null?void 0:t.amount)).toLocaleString()}`:"N/A"]}),a.jsxs(u,{children:["Date: ",(t==null?void 0:t.date)||"N/A"]}),(t==null?void 0:t.academicYear)&&a.jsxs(u,{children:["Academic Year: ",t.academicYear||"N/A"]}),(t==null?void 0:t.method)&&a.jsxs(u,{children:["Payment Method: ",t.method||"N/A"]}),(t==null?void 0:t.reference)&&a.jsxs(u,{children:["Reference: ",t.reference||"N/A"]}),(t==null?void 0:t.description)&&a.jsxs(u,{children:["Description: ",t.description||"N/A"]})]}),ta=({onEdit:b,onDelete:s,onView:t,onPayFees:m,record:h,isPayment:r})=>a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[!r&&a.jsxs(a.Fragment,{children:[a.jsx(Oe,{variant:"contained",color:"primary",size:"small",startIcon:a.jsx(_a,{}),onClick:()=>b(h),sx:{textTransform:"none"},children:"Edit"}),a.jsx(Oe,{variant:"contained",color:"error",size:"small",startIcon:a.jsx(Ya,{}),onClick:()=>s(h),sx:{textTransform:"none"},children:"Delete"})]}),a.jsx(Oe,{variant:"contained",color:"info",size:"small",startIcon:a.jsx(Wa,{}),onClick:()=>t(h),sx:{textTransform:"none"},children:"View"})]}),Ga=()=>{const b=sa(),s=na(b.palette.mode),[t,m]=n.useState(0),[h,r]=n.useState("createdAt"),[v,g]=n.useState("desc"),[c,A]=n.useState(0),[p,G]=n.useState(10),[l,P]=n.useState(0),[F,y]=n.useState(null),[ce,J]=n.useState(!1),[ue,K]=n.useState(!1),[me,ne]=n.useState(!1),[pe,Q]=n.useState(!1),[he,Z]=n.useState(!1),[ge,ee]=n.useState(!1),[$,xe]=n.useState([]),[fe,Se]=n.useState([]),[be,Ae]=n.useState([]),[Ce,ve]=n.useState([]),[_,Y]=n.useState(null),[W,ae]=n.useState(null),[De,te]=n.useState(null),[ra,ye]=n.useState(null),[je,se]=n.useState([]),[$e,re]=n.useState([]),[_e,Ee]=n.useState([]),[Ye,Pe]=n.useState([]),{loading:Ne,error:Re,callApi:oe}=M(),{loading:We,error:qe,callApi:le}=M(),{loading:Ue,error:Ve,callApi:w}=M(),{loading:Be,error:He,callApi:I}=M(),{loading:oa,error:la,callApi:ze}=M(),{loading:ia,error:da,callApi:Xe}=M(),{loading:ca,error:ua,callApi:Ge}=M(),{loading:ma,error:pa,callApi:Je}=M(),q=n.useCallback(e=>{const o=Array.isArray(e)?e:e!=null&&e.data&&Array.isArray(e.data)?e.data:[];if(!o.length)return console.log("No valid data for processing fees:",e),[];console.log("Processing fees data:",o);const C=o.flatMap((i,x)=>(i.termPayments||[]).flatMap((f,T)=>(f.payments||[]).map((E,N)=>{var B,O,H,z,k,ea,aa;let d="Unknown";const R=(O=(B=i.classLevelId)==null?void 0:B.subclasses)==null?void 0:O.find(L=>L.letter===f.subclassLetter),U=((H=R==null?void 0:R.students)==null?void 0:H.map(L=>L.id))||[];if(U.length>0){const L=$.find(Ta=>U.includes(Ta._id));d=L?`${L.firstName||""} ${L.lastName||""}`.trim():"Unknown"}const V={id:i._id||i.id||`${x}-${T}-${N}`,sn:c*p+x*f.payments.length+N+1,studentName:d||"N/A",studentId:i.studentId||"N/A",class:`${((z=i.classLevelId)==null?void 0:z.name)||"N/A"} ${f.subclassLetter||""}`.trim(),classLevelId:((k=i.classLevelId)==null?void 0:k._id)||"N/A",termName:f.termName||"N/A",termId:f._id||"N/A",feesPaid:E.amountPaid||0,date:E.datePaid?new Date(E.datePaid).toLocaleDateString():"N/A",academicYear:((ea=i.academicYear)==null?void 0:ea.name)||"N/A",academicYearId:((aa=i.academicYear)==null?void 0:aa._id)||"N/A",method:E.method||"N/A",reference:E.reference||"N/A"};return console.log("Formatted fee record:",V),V})));return console.log("Formatted fees data:",C),C},[c,p,$]),Ke=n.useCallback(e=>{const o=Array.isArray(e==null?void 0:e.data)?e.data:[];if(!o.length)return console.log("No valid data for processing expenditures:",e),[];console.log("Processing expenditure data:",o);const C=o.map((i,x)=>{const f={id:i._id,sn:c*p+x+1,description:i.description||"N/A",amount:i.amount||0,date:i.date?new Date(i.date).toLocaleDateString():"N/A"};return console.log("Formatted expenditure record:",f),f}).sort((i,x)=>i.sn-x.sn);return console.log("Formatted expenditure data:",C),C},[c,p]),Qe=n.useCallback(e=>{const o=Array.isArray(e==null?void 0:e.data)?e.data:[];if(!o.length)return console.log("No valid data for processing other revenues:",e),[];console.log("Processing other revenue data:",o);const C=o.map((i,x)=>{const f={id:i._id,sn:c*p+x+1,source:i.source||"N/A",amount:i.amount||0,date:i.date?new Date(i.date).toLocaleDateString():"N/A",description:i.description||"N/A"};return console.log("Formatted other revenue record:",f),f}).sort((i,x)=>i.sn-x.sn);return console.log("Formatted other revenue data:",C),C},[c,p]),j=n.useCallback(async()=>{var e,o,C,i,x,f,T,E;try{const N=new URLSearchParams({page:(c+1).toString(),limit:p.toString(),sortBy:h,sortDirection:v});if(t===0){N.append("section","Primary");const d=await oe(`${D.PAYMENT}?${N.toString()}`);if(console.log("Primary Fees API Response:",d),d&&d.status==="success"){Y(d);const R=q(d);se(R);const U=((e=d.data)==null?void 0:e.reduce((V,B)=>{var O;return V+(((O=B.termPayments)==null?void 0:O.reduce((H,z)=>{var k;return H+(((k=z.payments)==null?void 0:k.length)||0)},0))||0)},0))||0;P(U)}else Y(null),se([]),P(0)}else if(t===1){N.append("section","Secondary");const d=await le(`${D.PAYMENT}?${N.toString()}`);if(console.log("Secondary Fees API Response:",d),d&&d.status==="success"){ae(d);const R=q(d);re(R);const U=((o=d.data)==null?void 0:o.reduce((V,B)=>{var O;return V+(((O=B.termPayments)==null?void 0:O.reduce((H,z)=>{var k;return H+(((k=z.payments)==null?void 0:k.length)||0)},0))||0)},0))||0;P(U)}else ae(null),re([]),P(0)}else if(t===2){const d=await w(`${D.EXPENDITURES}?${N.toString()}`);if(console.log("Expenditures API Response:",d),d&&d.status==="success"){te(d.data);const R=Ke(d.data);Ee(R),P(((i=(C=d.data)==null?void 0:C.pagination)==null?void 0:i.totalRecords)||((x=d.data)==null?void 0:x.length)||0)}else te(null),Ee([]),P(0)}else if(t===3){const d=await I(`${D.OTHER_REVENUES}?${N.toString()}`);if(console.log("Other Revenues API Response:",d),d&&d.status==="success"){ye(d.data);const R=Qe(d.data);Pe(R),P(((T=(f=d.data)==null?void 0:f.pagination)==null?void 0:T.totalRecords)||((E=d.data)==null?void 0:E.length)||0)}else ye(null),Pe([]),P(0)}}catch(N){console.error("Error fetching data:",N),P(0),t===0?(Y(null),se([])):t===1?(ae(null),re([])):t===2?(te(null),Ee([])):t===3&&(ye(null),Pe([]))}},[oe,le,w,I,c,p,h,v,t,q,Ke,Qe]),Ze=n.useCallback(async()=>{var e,o,C,i;try{const[x,f,T,E]=await Promise.all([ze(D.STUDENTS),Xe(D.CLASS_LEVEL),Ge(D.ACADEMIC_TERM),Je(D.ACADEMIC_YEARS)]);xe(((e=x==null?void 0:x.data)==null?void 0:e.data)||[]),Se(((o=f==null?void 0:f.data)==null?void 0:o.data)||[]),Ae(((C=T==null?void 0:T.data)==null?void 0:C.data)||[]),ve(((i=E==null?void 0:E.data)==null?void 0:i.data)||[])}catch(x){console.error("Error fetching dropdown data:",x)}},[ze,Xe,Ge,Je]);n.useEffect(()=>{j()},[j]),n.useEffect(()=>{Ze()},[Ze]),n.useEffect(()=>{if(_){const e=q(_);se(e)}if(W){const e=q(W);re(e)}},[$,_,W,q]);const ha=n.useCallback(e=>{g(h===e&&v==="asc"?"desc":"asc"),r(e),A(0)},[h,v]),ga=n.useCallback((e,o)=>{A(o)},[]),xa=n.useCallback(e=>{G(parseInt(e.target.value,10)),A(0)},[]),fa=n.useCallback((e,o)=>{m(o),A(0)},[]),Fe=n.useCallback(e=>{y(e),K(!0)},[]),we=n.useCallback(e=>{y(e),J(!0)},[]),Ie=n.useCallback(e=>{y(e),ne(!0)},[]),Sa=n.useCallback((e=null)=>{y(e||{studentName:"",class:"",termName:""}),ee(!0)},[]),ba=n.useCallback(()=>{y({description:"",amount:"",date:""}),Q(!0)},[]),Aa=n.useCallback(()=>{y({source:"",amount:"",date:"",description:""}),Z(!0)},[]),Ca=n.useCallback(async()=>{try{t===2?await w(`${D.EXPENDITURES}/${F.id}`,"DELETE"):t===3&&await I(`${D.OTHER_REVENUES}/${F.id}`,"DELETE"),j()}catch(e){console.error("Error deleting record:",e)}J(!1),y(null)},[F,t,w,I,j]),va=n.useCallback(async e=>{try{t===2?await w(`${D.EXPENDITURES}/${F.id}`,"PUT",e):t===3&&await I(`${D.OTHER_REVENUES}/${F.id}`,"PUT",e),j()}catch(o){console.error("Error updating record:",o)}K(!1),y(null)},[F,t,w,I,j]),Da=n.useCallback(async e=>{try{await w(D.EXPENDITURES,"POST",e),j()}catch(o){console.error("Error adding expenditure:",o)}Q(!1),y(null)},[w,j]),ya=n.useCallback(async e=>{try{await I(D.OTHER_REVENUES,"POST",e),j()}catch(o){console.error("Error adding revenue:",o)}Z(!1),y(null)},[I,j]),ja=n.useCallback(async e=>{try{const o=D.PAYMENT,C={studentId:e.studentId||null,classLevelId:e.classLevelId,termId:e.termId,academicYearId:e.academicYearId,amountPaid:parseFloat(e.amountPaid),datePaid:e.datePaid,method:e.method,reference:e.reference,section:t===0?"Primary":"Secondary"};t===0?await oe(o,"POST",C):t===1&&await le(o,"POST",C),j()}catch(o){console.error("Error processing payment:",o)}ee(!1),y(null)},[oe,le,j,t]),Te=[{id:"sn",label:"S/N",width:90},{id:"studentName",label:"Student Name",flex:1,renderCell:e=>a.jsx(u,{children:String(e.studentName||"N/A")})},{id:"class",label:"Class",flex:1,renderCell:e=>a.jsx(u,{children:String(e.class||"N/A")})},{id:"termName",label:"Term",flex:1,renderCell:e=>a.jsx(u,{children:String(e.termName||"N/A")})},{id:"feesPaid",label:"Fees Paid",flex:1,renderCell:e=>a.jsx(u,{color:s.greenAccent[500],children:typeof e.feesPaid=="number"?`₦${e.feesPaid.toLocaleString()}`:"N/A"})},{id:"date",label:"Date",flex:1,renderCell:e=>a.jsx(u,{children:String(e.date||"N/A")})},{id:"academicYear",label:"Academic Year",flex:1,renderCell:e=>a.jsx(u,{children:String(e.academicYear||"N/A")})},{id:"method",label:"Method",flex:1,renderCell:e=>a.jsx(u,{children:String(e.method||"N/A")})},{id:"reference",label:"Reference",flex:1,renderCell:e=>a.jsx(u,{children:String(e.reference||"N/A")})}],Ea=[{id:"sn",label:"S/N",width:90},{id:"id",label:"ID",width:100},{id:"description",label:"Description",flex:1,renderCell:e=>a.jsx(u,{children:String(e.description||"N/A")})},{id:"amount",label:"Amount",flex:1,renderCell:e=>a.jsx(u,{color:s.redAccent[500],children:typeof e.amount=="number"?`₦${e.amount.toLocaleString()}`:"N/A"})},{id:"date",label:"Date",flex:1,renderCell:e=>a.jsx(u,{children:String(e.date||"N/A")})},{id:"actions",label:"Actions",width:200,renderCell:e=>a.jsx(ta,{onEdit:Fe,onDelete:we,onView:Ie,record:e,isPayment:!1})}],Pa=[{id:"sn",label:"S/N",width:90},{id:"id",label:"ID",width:100},{id:"source",label:"Source",flex:1,renderCell:e=>a.jsx(u,{children:String(e.source||"N/A")})},{id:"amount",label:"Amount",flex:1,renderCell:e=>a.jsx(u,{color:s.blueAccent[500],children:typeof e.amount=="number"?`₦${e.amount.toLocaleString()}`:"N/A"})},{id:"date",label:"Date",flex:1,renderCell:e=>a.jsx(u,{children:String(e.date||"N/A")})},{id:"description",label:"Description",flex:1,renderCell:e=>a.jsx(u,{children:String(e.description||"N/A")})},{id:"actions",label:"Actions",width:200,renderCell:e=>a.jsx(ta,{onEdit:Fe,onDelete:we,onView:Ie,record:e,isPayment:!1})}],Na=()=>{switch(console.log("Table Props Data:",{tabIndex:t,primaryFeesFormatted:je,secondaryFeesFormatted:$e,expenditureDataFormatted:_e,otherRevenueDataFormatted:Ye}),t){case 0:return{columns:Te,data:je,header:"Primary Section Fees",totalRecords:l,loading:Ne,error:Re};case 1:return{columns:Te,data:$e,header:"Secondary Section Fees",totalRecords:l,loading:We,error:qe};case 2:return{columns:Ea,data:_e,header:"School Expenditures",totalRecords:l,loading:Ue,error:Ve};case 3:return{columns:Pa,data:Ye,header:"Other Revenues",totalRecords:l,loading:Be,error:He};default:return{columns:Te,data:je,header:"Primary Section Fees",totalRecords:l,loading:Ne,error:Re}}},{columns:Ra,data:Fa,header:wa,totalRecords:Ia,loading:et,error:at}=Na();return{columns:Ra,data:Fa,header:wa,tabIndex:t,handleTabChange:fa,sortBy:h,sortDirection:v,page:c,rowsPerPage:p,totalRecords:Ia,selectedRecord:F,setSelectedRecord:y,openDeleteModal:ce,setOpenDeleteModal:J,editDialogOpen:ue,setEditDialogOpen:K,viewDetailsOpen:me,setViewDetailsOpen:ne,addExpenditureOpen:pe,setAddExpenditureOpen:Q,addRevenueOpen:he,setAddRevenueOpen:Z,payFeesOpen:ge,setPayFeesOpen:ee,handleSortChange:ha,handlePageChange:ga,handleRowsPerPageChange:xa,handleEdit:Fe,handleDeleteOpen:we,handleViewDetails:Ie,handlePayFeesOpen:Sa,handleAddExpenditureOpen:ba,handleAddRevenueOpen:Aa,handleDeleteConfirm:Ca,handleEditSave:va,handlePayFeesSave:ja,handleAddExpenditureSave:Da,handleAddRevenueSave:ya,financialDataLoading:Ne||We,financialDataError:Re||qe,expenditureDataLoading:Ue,expenditureDataError:Ve,otherRevenueDataLoading:Be,otherRevenueDataError:He,students:$,classLevels:fe,terms:be,academicYears:Ce,studentsLoading:oa,classLevelsLoading:ia,termsLoading:ca,academicYearsLoading:ma,studentsError:la,classLevelsError:da,termsError:ua,academicYearsError:pa,primaryFeesData:_,secondaryFeesData:W,expenditureData:De,otherRevenueData:ra}};var Le={},Ja=qa;Object.defineProperty(Le,"__esModule",{value:!0});var de=Le.default=void 0,Ka=Ja(Oa()),Qa=a;de=Le.default=(0,Ka.default)((0,Qa.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");const Za=()=>{const b=sa(),s=na(b.palette.mode),{columns:t,data:m,header:h,tabIndex:r,handleTabChange:v,sortBy:g,sortDirection:c,page:A,rowsPerPage:p,totalRecords:G,selectedRecord:l,openDeleteModal:P,setOpenDeleteModal:F,editDialogOpen:y,setEditDialogOpen:ce,viewDetailsOpen:J,setViewDetailsOpen:ue,addExpenditureOpen:K,setAddExpenditureOpen:me,addRevenueOpen:ne,setAddRevenueOpen:pe,payFeesOpen:Q,setPayFeesOpen:he,handleSortChange:Z,handlePageChange:ge,handleRowsPerPageChange:ee,handleAddExpenditureOpen:$,handleAddRevenueOpen:xe,handlePayFeesOpen:fe,handlePayFeesSave:Se,handleDeleteConfirm:be,handleEditSave:Ae,handleAddExpenditureSave:Ce,handleAddRevenueSave:ve,loading:_,error:Y,students:W,classLevels:ae,terms:De,academicYears:te}=Ga();return a.jsxs(ke,{children:[a.jsx(ka,{title:"FINANCIAL MANAGEMENT",subtitle:"Financial data for school operations"}),a.jsxs(ke,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[a.jsxs(Ma,{value:r,onChange:v,"aria-label":"financial management tabs",sx:{backgroundColor:s.primary[400],"& .MuiTabs-indicator":{backgroundColor:s.blueAccent[700]}},children:[a.jsx(ie,{label:"Primary Fees",sx:{color:"white !important",textTransform:"none",fontWeight:"bold","&.Mui-selected":{color:"white !important",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:s.blueAccent[700]},boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)",backgroundColor:s.primary[400]}}),a.jsx(ie,{label:"Secondary Fees",sx:{color:"white !important",textTransform:"none",fontWeight:"bold","&.Mui-selected":{color:"white !important",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:s.blueAccent[700]},boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)",backgroundColor:s.primary[400]}}),a.jsx(ie,{label:"Expenditures",sx:{color:"white !important",textTransform:"none",fontWeight:"bold","&.Mui-selected":{color:"white !important",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:s.blueAccent[700]},boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)",backgroundColor:s.primary[400]}}),a.jsx(ie,{label:"Other Revenues",sx:{color:"white !important",textTransform:"none",fontWeight:"bold","&.Mui-selected":{color:"white !important",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:s.blueAccent[700]},boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)",backgroundColor:s.primary[400]}})]}),(r===0||r===1)&&a.jsx(Me,{onClick:fe,icon:a.jsx(de,{}),title:"Pay School Fees",sx:{color:s.greenAccent[500]}}),r===2&&a.jsx(Me,{onClick:$,icon:a.jsx(de,{}),title:"Add Expenditure",sx:{color:s.redAccent[500]}}),r===3&&a.jsx(Me,{onClick:xe,icon:a.jsx(de,{}),title:"Add Revenue",sx:{color:s.blueAccent[500]}})]}),a.jsxs(ke,{m:"40px 0 0 0",height:"75vh",children:[_&&a.jsx(u,{children:"Loading..."}),Y&&a.jsxs(u,{color:"error",children:["Error: ",Y]}),a.jsx(La,{columns:t,tableHeader:h,data:m,sortBy:g,sortDirection:c,onSortChange:Z,page:A,rowsPerPage:p,totalRecords:G,onPageChange:ge,onRowsPerPageChange:ee})]}),a.jsx(za,{open:P,onClose:()=>F(!1),onConfirm:be,record:l}),a.jsx(Ua,{open:y,onClose:()=>ce(!1),onSave:Ae,record:l}),a.jsx(Va,{open:Q,onClose:()=>he(!1),onSave:Se,record:l,students:W,classLevels:ae,terms:De,academicYears:te}),a.jsx(Ha,{open:K,onClose:()=>me(!1),onSave:Ce,record:l,title:"Add Expenditure"}),a.jsx(Ba,{open:ne,onClose:()=>pe(!1),onSave:ve,record:l}),a.jsx(Xa,{open:J,onClose:()=>ue(!1),record:l})]})},vt=$a(Za);export{vt as default};
