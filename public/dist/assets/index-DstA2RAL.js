import{r as C,f as Y,j as u}from"./index-DYB9vdJh.js";import{H as Ce}from"./Header-AXN3siQS.js";import{a as we,b as be,T as nt}from"./table-DpmIgZH_.js";import{P as Pe}from"./PieChart-DYTxc7w4.js";import{C as it}from"./accordion-JCiF7Q3f.js";import{A as ot}from"./actionButton-BgbevmjF.js";import{X as Te}from"./nivo-bar-D14wLBk2.js";import{p as Ae}from"./nivo-line.es-RvDdhWLq.js";import{d as st}from"./Download-BX2u2wmw.js";import{w as je}from"./dasboardPagesContainer-D4ZABES0.js";import{E as De}from"./index-H39KJanZ.js";import{u as O}from"./useApi-BEUY4qmG.js";import{t as Re}from"./modal-Dt9KnTX1.js";import{j as Jt,v as A,a1 as Bt,a2 as It,a3 as Yt,T as W}from"./TextField-Dq7C8pjc.js";import{C as ke}from"./CircularProgress-pT4wBbD6.js";import{A as We}from"./Alert-DHoR-1Sh.js";import{M as Ot}from"./MenuItem-BsLcltYv.js";import"./useMediaQuery-BDV9TRV9.js";import"./index-DG_QlDDe.js";import"./loadingButton-BBKAh30x.js";import"./IconButton-Dp3Riz_a.js";import"./nivo-pie-Dj_fhcHQ.js";import"./isEqual-BFntrw4K.js";import"./_baseIsEqual-QDMPqFIK.js";import"./useSlot-DWslFdTP.js";import"./_baseForOwn-4R71ou7g.js";import"./_baseSlice-z0Zd1-Ev.js";import"./confirmationModal-CAE5W3-f.js";import"./crystal-land-log-removebg-DVF-nlbN.js";function Qt(e,t,r,a,n){a=a||{};var i=1.15,s=n.internal.scaleFactor,l=n.internal.getFontSize()/s,h=n.getLineHeightFactor?n.getLineHeightFactor():i,o=l*h,f=/\r\n|\r|\n/g,d="",g=1;if((a.valign==="middle"||a.valign==="bottom"||a.halign==="center"||a.halign==="right")&&(d=typeof e=="string"?e.split(f):e,g=d.length||1),r+=l*(2-i),a.valign==="middle"?r-=g/2*o:a.valign==="bottom"&&(r-=g*o),a.halign==="center"||a.halign==="right"){var p=l;if(a.halign==="center"&&(p*=.5),d&&g>=1){for(var v=0;v<d.length;v++)n.text(d[v],t-n.getStringUnitWidth(d[v])*p,r),r+=o;return n}t-=n.getStringUnitWidth(e)*p}return a.halign==="justify"?n.text(e,t,r,{maxWidth:a.maxWidth||100,align:"justify"}):n.text(e,t,r),n}var $t={},q=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:$t=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var a,n,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var s=this.jsPDFDocument.internal.getFont(),l=s.fontStyle,h=s.fontName;if(t.font&&(h=t.font),t.fontStyle){l=t.fontStyle;var o=this.getFontList()[h];o&&o.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(o[0]),l=o[0])}if(this.jsPDFDocument.setFont(h,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var f=e.unifyColor(t.fillColor);f&&(a=this.jsPDFDocument).setFillColor.apply(a,f),f=e.unifyColor(t.textColor),f&&(n=this.jsPDFDocument).setTextColor.apply(n,f),f=e.unifyColor(t.lineColor),f&&(i=this.jsPDFDocument).setDrawColor.apply(i,f),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,a){return this.jsPDFDocument.splitTextToSize(t,r,a)},e.prototype.rect=function(t,r,a,n,i){return this.jsPDFDocument.rect(t,r,a,n,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return $t||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),bt=function(e,t){return bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])},bt(e,t)};function Zt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");bt(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Vt=function(e){Zt(t,e);function t(r){var a=e.call(this)||this;return a._element=r,a}return t}(Array);function He(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Fe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function gt(e,t,r){r.applyStyles(t,!0);var a=Array.isArray(e)?e:[e],n=a.map(function(i){return r.getTextWidth(i)}).reduce(function(i,s){return Math.max(i,s)},0);return n}function te(e,t,r,a){var n=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:n,lineColor:i});var s=ee(n,!1);s&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),a.y-r.y,s)}function ee(e,t){var r=e>0,a=t||t===0;return r&&a?"DF":r?"S":a?"F":null}function pt(e,t){var r,a,n,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(a=e.top)!==null&&a!==void 0?a:t,right:(n=e.right)!==null&&n!==void 0?n:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function ae(e,t){var r=pt(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function Ee(e,t,r,a,n){var i={},s=1.3333333333333333,l=xt(t,function(R){return n.getComputedStyle(R).backgroundColor});l!=null&&(i.fillColor=l);var h=xt(t,function(R){return n.getComputedStyle(R).color});h!=null&&(i.textColor=h);var o=Le(a,r);o&&(i.cellPadding=o);var f="borderTopColor",d=s*r,g=a.borderTopWidth;if(a.borderBottomWidth===g&&a.borderRightWidth===g&&a.borderLeftWidth===g){var p=(parseFloat(g)||0)/d;p&&(i.lineWidth=p)}else i.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/d,right:(parseFloat(a.borderRightWidth)||0)/d,bottom:(parseFloat(a.borderBottomWidth)||0)/d,left:(parseFloat(a.borderLeftWidth)||0)/d},i.lineWidth.top||(i.lineWidth.right?f="borderRightColor":i.lineWidth.bottom?f="borderBottomColor":i.lineWidth.left&&(f="borderLeftColor"));var v=xt(t,function(R){return n.getComputedStyle(R)[f]});v!=null&&(i.lineColor=v);var b=["left","right","center","justify"];b.indexOf(a.textAlign)!==-1&&(i.halign=a.textAlign),b=["middle","bottom","top"],b.indexOf(a.verticalAlign)!==-1&&(i.valign=a.verticalAlign);var y=parseInt(a.fontSize||"");isNaN(y)||(i.fontSize=y/s);var w=ze(a);w&&(i.fontStyle=w);var j=(a.fontFamily||"").toLowerCase();return e.indexOf(j)!==-1&&(i.font=j),i}function ze(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function xt(e,t){var r=re(e,t);if(!r)return null;var a=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var n=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],i=parseInt(a[4]);return i===0||isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function re(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:re(e.parentElement,t):r}function Le(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],a=96/(72/t),n=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(l){return parseInt(l||"0")/a}),s=pt(i,0);return n>s.top&&(s.top=n),n>s.bottom&&(s.bottom=n),s}function ne(e,t,r,a,n){var i,s;a===void 0&&(a=!1),n===void 0&&(n=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var h=Object.keys(e.getFontList()),o=e.scaleFactor(),f=[],d=[],g=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:f,body:d,foot:g};for(var p=0;p<l.rows.length;p++){var v=l.rows[p],b=(s=(i=v==null?void 0:v.parentElement)===null||i===void 0?void 0:i.tagName)===null||s===void 0?void 0:s.toLowerCase(),y=Me(h,o,r,v,a,n);y&&(b==="thead"?f.push(y):b==="tfoot"?g.push(y):d.push(y))}return{head:f,body:d,foot:g}}function Me(e,t,r,a,n,i){for(var s=new Vt(a),l=0;l<a.cells.length;l++){var h=a.cells[l],o=r.getComputedStyle(h);if(n||o.display!=="none"){var f=void 0;i&&(f=Ee(e,h,t,o,r)),s.push({rowSpan:h.rowSpan,colSpan:h.colSpan,styles:f,_element:h,content:Ne(h)})}}var d=r.getComputedStyle(a);if(s.length>0&&(n||d.display!=="none"))return s}function Ne(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function Be(e,t,r){for(var a=0,n=[e,t,r];a<n.length;a++){var i=n[a];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function M(e,t,r,a,n){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),s=1;s<arguments.length;s++){var l=arguments[s];if(l!=null)for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(i[h]=l[h])}return i}function ie(e,t){var r=new q(e),a=r.getDocumentOptions(),n=r.getGlobalOptions();Be(n,a,t);var i=M({},n,a,t),s;typeof window<"u"&&(s=window);var l=Ie(n,a,t),h=Ye(n,a,t),o=Oe(r,i),f=_e(r,i,s);return{id:t.tableId,content:f,hooks:h,styles:l,settings:o}}function Ie(e,t,r){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},n=function(h){if(h==="columnStyles"){var o=e[h],f=t[h],d=r[h];a.columnStyles=M({},o,f,d)}else{var g=[e,t,r],p=g.map(function(v){return v[h]||{}});a[h]=M({},p[0],p[1],p[2])}},i=0,s=Object.keys(a);i<s.length;i++){var l=s[i];n(l)}return a}function Ye(e,t,r){for(var a=[e,t,r],n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,s=a;i<s.length;i++){var l=s[i];l.didParseCell&&n.didParseCell.push(l.didParseCell),l.willDrawCell&&n.willDrawCell.push(l.willDrawCell),l.didDrawCell&&n.didDrawCell.push(l.didDrawCell),l.willDrawPage&&n.willDrawPage.push(l.willDrawPage),l.didDrawPage&&n.didDrawPage.push(l.didDrawPage)}return n}function Oe(e,t){var r,a,n,i,s,l,h,o,f,d,g,p,v=pt(t.margin,40/e.scaleFactor()),b=(r=$e(e,t.startY))!==null&&r!==void 0?r:v.top,y;t.showFoot===!0?y="everyPage":t.showFoot===!1?y="never":y=(a=t.showFoot)!==null&&a!==void 0?a:"everyPage";var w;t.showHead===!0?w="everyPage":t.showHead===!1?w="never":w=(n=t.showHead)!==null&&n!==void 0?n:"everyPage";var j=(i=t.useCss)!==null&&i!==void 0?i:!1,R=t.theme||(j?"plain":"striped"),D=!!t.horizontalPageBreak,$=(s=t.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:j,theme:R,startY:b,margin:v,pageBreak:(h=t.pageBreak)!==null&&h!==void 0?h:"auto",rowPageBreak:(o=t.rowPageBreak)!==null&&o!==void 0?o:"auto",tableWidth:(f=t.tableWidth)!==null&&f!==void 0?f:"auto",showHead:w,showFoot:y,tableLineWidth:(d=t.tableLineWidth)!==null&&d!==void 0?d:0,tableLineColor:(g=t.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:D,horizontalPageBreakRepeat:$,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function $e(e,t){var r=e.getLastAutoTable(),a=e.scaleFactor(),n=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var s=r.startPageNumber+r.pageNumber-1;i=s===n}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/a:null}function _e(e,t,r){var a=t.head||[],n=t.body||[],i=t.foot||[];if(t.html){var s=t.includeHiddenHtml;if(r){var l=ne(e,t.html,r,s,t.useCss)||{};a=l.head||a,n=l.body||a,i=l.foot||a}else console.error("Cannot parse html in non browser environment")}var h=t.columns||Ke(a,n,i);return{columns:h,head:a,body:n,foot:i}}function Ke(e,t,r){var a=e[0]||t[0]||r[0]||[],n=[];return Object.keys(a).filter(function(i){return i!=="_element"}).forEach(function(i){var s=1,l;Array.isArray(a)?l=a[parseInt(i)]:l=a[i],typeof l=="object"&&!Array.isArray(l)&&(s=(l==null?void 0:l.colSpan)||1);for(var h=0;h<s;h++){var o=void 0;Array.isArray(a)?o=n.length:o=i+(h>0?"_".concat(h):"");var f={dataKey:o};n.push(f)}}),n}var Pt=function(){function e(t,r,a){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=a,this.doc=t.getDocument()}return e}(),Ge=function(e){Zt(t,e);function t(r,a,n,i,s,l){var h=e.call(this,r,a,l)||this;return h.cell=n,h.row=i,h.column=s,h.section=i.section,h}return t}(Pt),qe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,a,n,i,s){for(var l=0,h=r;l<h.length;l++){var o=h[l],f=new Ge(t,this,a,n,i,s),d=o(f)===!1;if(a.text=Array.isArray(a.text)?a.text:[a.text],d)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var a=0,n=this.hooks.didDrawPage;a<n.length;a++){var i=n[a];i(new Pt(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var a=0,n=this.hooks.willDrawPage;a<n.length;a++){var i=n[a];i(new Pt(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(n,i){return n+i.wrappedWidth},0);return r}else{var a=this.settings.margin;return t-a.left-a.right}},e}(),oe=function(){function e(t,r,a,n,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof Vt&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=a,this.cells=n,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(a,n){var i;return Math.max(a,((i=r.cells[n.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(a){var n=r.cells[a.index];return n?n.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var a=this;return t.reduce(function(n,i){var s=a.cells[i.index];if(!s)return 0;var l=r.getLineHeight(s.styles.fontSize),h=s.padding("vertical"),o=h+l;return o>n?o:n},0)},e}(),se=function(){function e(t,r,a){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=a,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(n=t.content)!==null&&n!==void 0?n:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var s=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=s.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var a;if(this.styles.halign==="right")a=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var n=this.width-this.padding("horizontal");a=this.x+n/2+this.padding("left")}else a=this.x+this.padding("left");return{x:a,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var a=Array.isArray(this.text)?this.text.length:1,n=this.styles.fontSize/t*r,i=a*n+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=pt(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),Ue=function(){function e(t,r,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=a}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,a=0,n=t.allRows();a<n.length;a++){var i=n[a],s=i.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(r=Math.max(r,s.styles.cellWidth))}return r},e}();function Xe(e,t){Je(e,t);var r=[],a=0;t.columns.forEach(function(i){var s=i.getMaxCustomCellWidth(t);s?i.width=s:(i.width=i.wrappedWidth,r.push(i)),a+=i.width});var n=t.getWidth(e.pageSize().width)-a;n&&(n=Tt(r,n,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),n&&(n=Tt(r,n,function(i){return i.minWidth})),n=Math.abs(n),!t.settings.horizontalPageBreak&&n>.1/e.scaleFactor()&&(n=n<1?n:Math.round(n),console.warn("Of the table content, ".concat(n," units width could not fit page"))),Ze(t),Ve(t,e),Qe(t)}function Je(e,t){var r=e.scaleFactor(),a=t.settings.horizontalPageBreak,n=ae(e,t);t.allRows().forEach(function(i){for(var s=0,l=t.columns;s<l.length;s++){var h=l[s],o=i.cells[h.index];if(o){var f=t.hooks.didParseCell;t.callCellHooks(e,f,o,i,h,null);var d=o.padding("horizontal");o.contentWidth=gt(o.text,o.styles,e)+d;var g=gt(o.text.join(" ").split(/[^\S\u00A0]+/),o.styles,e);if(o.minReadableWidth=g+o.padding("horizontal"),typeof o.styles.cellWidth=="number")o.minWidth=o.styles.cellWidth,o.wrappedWidth=o.styles.cellWidth;else if(o.styles.cellWidth==="wrap"||a===!0)o.contentWidth>n?(o.minWidth=n,o.wrappedWidth=n):(o.minWidth=o.contentWidth,o.wrappedWidth=o.contentWidth);else{var p=10/r;o.minWidth=o.styles.minCellWidth||p,o.wrappedWidth=o.contentWidth,o.minWidth>o.wrappedWidth&&(o.wrappedWidth=o.minWidth)}}}}),t.allRows().forEach(function(i){for(var s=0,l=t.columns;s<l.length;s++){var h=l[s],o=i.cells[h.index];if(o&&o.colSpan===1)h.wrappedWidth=Math.max(h.wrappedWidth,o.wrappedWidth),h.minWidth=Math.max(h.minWidth,o.minWidth),h.minReadableWidth=Math.max(h.minReadableWidth,o.minReadableWidth);else{var f=t.styles.columnStyles[h.dataKey]||t.styles.columnStyles[h.index]||{},d=f.cellWidth||f.minCellWidth;d&&typeof d=="number"&&(h.minWidth=d,h.wrappedWidth=d)}o&&(o.colSpan>1&&!h.minWidth&&(h.minWidth=o.minWidth),o.colSpan>1&&!h.wrappedWidth&&(h.wrappedWidth=o.minWidth))}})}function Tt(e,t,r){for(var a=t,n=e.reduce(function(p,v){return p+v.wrappedWidth},0),i=0;i<e.length;i++){var s=e[i],l=s.wrappedWidth/n,h=a*l,o=s.width+h,f=r(s),d=o<f?f:o;t-=d-s.width,s.width=d}if(t=Math.round(t*1e10)/1e10,t){var g=e.filter(function(p){return t<0?p.width>r(p):!0});g.length&&(t=Tt(g,t,r))}return t}function Qe(e){for(var t={},r=1,a=e.allRows(),n=0;n<a.length;n++)for(var i=a[n],s=0,l=e.columns;s<l.length;s++){var h=l[s],o=t[h.index];if(r>1)r--,delete i.cells[h.index];else if(o)o.cell.height+=i.height,r=o.cell.colSpan,delete i.cells[h.index],o.left--,o.left<=1&&delete t[h.index];else{var f=i.cells[h.index];if(!f)continue;if(f.height=i.height,f.rowSpan>1){var d=a.length-n,g=f.rowSpan>d?d:f.rowSpan;t[h.index]={cell:f,left:g,row:i}}}}}function Ze(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var a=t[r],n=null,i=0,s=0,l=0;l<e.columns.length;l++){var h=e.columns[l];if(s-=1,s>1&&e.columns[l+1])i+=h.width,delete a.cells[h.index];else if(n){var o=n;delete a.cells[h.index],n=null,o.width=h.width+i}else{var o=a.cells[h.index];if(!o)continue;if(s=o.colSpan,i=0,o.colSpan>1){n=o,i+=h.width;continue}o.width=h.width+i}}}function Ve(e,t){for(var r={count:0,height:0},a=0,n=e.allRows();a<n.length;a++){for(var i=n[a],s=0,l=e.columns;s<l.length;s++){var h=l[s],o=i.cells[h.index];if(o){t.applyStyles(o.styles,!0);var f=o.width-o.padding("horizontal");if(o.styles.overflow==="linebreak")o.text=t.splitTextToSize(o.text,f+1/t.scaleFactor(),{fontSize:o.styles.fontSize});else if(o.styles.overflow==="ellipsize")o.text=_t(o.text,f,o.styles,t,"...");else if(o.styles.overflow==="hidden")o.text=_t(o.text,f,o.styles,t,"");else if(typeof o.styles.overflow=="function"){var d=o.styles.overflow(o.text,f);typeof d=="string"?o.text=[d]:o.text=d}o.contentHeight=o.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var g=o.contentHeight/o.rowSpan;o.rowSpan>1&&r.count*r.height<g*o.rowSpan?r={height:g,count:o.rowSpan}:r&&r.count>0&&r.height>g&&(g=r.height),g>i.height&&(i.height=g)}}r.count--}}function _t(e,t,r,a,n){return e.map(function(i){return ta(i,t,r,a,n)})}function ta(e,t,r,a,n){var i=1e4*a.scaleFactor();if(t=Math.ceil(t*i)/i,t>=gt(e,r,a))return e;for(;t<gt(e+n,r,a)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+n}function le(e,t){var r=new q(e),a=ea(t,r.scaleFactor()),n=new qe(t,a);return Xe(r,n),r.applyStyles(r.userStyles),n}function ea(e,t){var r=e.content,a=ra(r.columns);if(r.head.length===0){var n=Kt(a,"head");n&&r.head.push(n)}if(r.foot.length===0){var n=Kt(a,"foot");n&&r.foot.push(n)}var i=e.settings.theme,s=e.styles;return{columns:a,head:St("head",r.head,a,s,i,t),body:St("body",r.body,a,s,i,t),foot:St("foot",r.foot,a,s,i,t)}}function St(e,t,r,a,n,i){var s={},l=t.map(function(h,o){for(var f=0,d={},g=0,p=0,v=0,b=r;v<b.length;v++){var y=b[v];if(s[y.index]==null||s[y.index].left===0)if(p===0){var w=void 0;Array.isArray(h)?w=h[y.index-g-f]:w=h[y.dataKey];var j={};typeof w=="object"&&!Array.isArray(w)&&(j=(w==null?void 0:w.styles)||{});var R=na(e,y,o,n,a,i,j),D=new se(w,R,e);d[y.dataKey]=D,d[y.index]=D,p=D.colSpan-1,s[y.index]={left:D.rowSpan-1,times:p}}else p--,g++;else s[y.index].left--,p=s[y.index].times,f++}return new oe(h,o,e,d)});return l}function Kt(e,t){var r={};return e.forEach(function(a){if(a.raw!=null){var n=aa(t,a.raw);n!=null&&(r[a.dataKey]=n)}}),Object.keys(r).length>0?r:null}function aa(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function ra(e){return e.map(function(t,r){var a,n;return typeof t=="object"?n=(a=t.dataKey)!==null&&a!==void 0?a:r:n=r,new Ue(n,t,r)})}function na(e,t,r,a,n,i,s){var l=Fe(a),h;e==="head"?h=n.headStyles:e==="body"?h=n.bodyStyles:e==="foot"&&(h=n.footStyles);var o=M({},l.table,l[e],n.styles,h),f=n.columnStyles[t.dataKey]||n.columnStyles[t.index]||{},d=e==="body"?f:{},g=e==="body"&&r%2===0?M({},l.alternateRow,n.alternateRowStyles):{},p=He(i),v=M({},p,o,g,d);return M(v,s)}function ia(e,t,r){var a;r===void 0&&(r={});var n=ae(e,t),i=new Map,s=[],l=[],h=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?h=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(h=[t.settings.horizontalPageBreakRepeat]),h.forEach(function(g){var p=t.columns.find(function(v){return v.dataKey===g||v.index===g});p&&!i.has(p.index)&&(i.set(p.index,!0),s.push(p.index),l.push(t.columns[p.index]),n-=p.wrappedWidth)});for(var o=!0,f=(a=r==null?void 0:r.start)!==null&&a!==void 0?a:0;f<t.columns.length;){if(i.has(f)){f++;continue}var d=t.columns[f].wrappedWidth;if(o||n>=d)o=!1,s.push(f),l.push(t.columns[f]),n-=d;else break;f++}return{colIndexes:s,columns:l,lastIndex:f-1}}function oa(e,t){for(var r=[],a=0;a<t.columns.length;a++){var n=ia(e,t,{start:a});n.columns.length&&(r.push(n),a=n.lastIndex)}return r}function he(e,t){var r=t.settings,a=r.startY,n=r.margin,i={x:n.left,y:a},s=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=a+n.bottom+s;if(r.pageBreak==="avoid"){var h=t.body,o=h.reduce(function(g,p){return g+p.height},0);l+=o}var f=new q(e);(r.pageBreak==="always"||r.startY!=null&&l>f.pageSize().height)&&(de(f),i.y=n.top),t.callWillDrawPageHooks(f,i);var d=M({},i);t.startPageNumber=f.pageNumber(),r.horizontalPageBreak?sa(f,t,d,i):(f.applyStyles(f.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(g){return N(f,t,g,i,t.columns)}),f.applyStyles(f.userStyles),t.body.forEach(function(g,p){var v=p===t.body.length-1;ct(f,t,g,v,d,i,t.columns)}),f.applyStyles(f.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(g){return N(f,t,g,i,t.columns)})),te(f,t,d,i),t.callEndPageHooks(f,i),t.finalY=i.y,e.lastAutoTable=t,f.applyStyles(f.userStyles)}function sa(e,t,r,a){var n=oa(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")n.forEach(function(o,f){e.applyStyles(e.userStyles),f>0?lt(e,t,r,a,o.columns,!0):Gt(e,t,a,o.columns),la(e,t,r,a,o.columns),Ct(e,t,a,o.columns)});else for(var s=-1,l=n[0],h=function(){var o=s;if(l){e.applyStyles(e.userStyles);var f=l.columns;s>=0?lt(e,t,r,a,f,!0):Gt(e,t,a,f),o=qt(e,t,s+1,a,f),Ct(e,t,a,f)}var d=o-s;n.slice(1).forEach(function(g){e.applyStyles(e.userStyles),lt(e,t,r,a,g.columns,!0),qt(e,t,s+1,a,g.columns,d),Ct(e,t,a,g.columns)}),s=o};s<t.body.length-1;)h()}function Gt(e,t,r,a){var n=t.settings;e.applyStyles(e.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(i){return N(e,t,i,r,a)})}function la(e,t,r,a,n){e.applyStyles(e.userStyles),t.body.forEach(function(i,s){var l=s===t.body.length-1;ct(e,t,i,l,r,a,n)})}function qt(e,t,r,a,n,i){e.applyStyles(e.userStyles),i=i??t.body.length;var s=Math.min(r+i,t.body.length),l=-1;return t.body.slice(r,s).forEach(function(h,o){var f=r+o===t.body.length-1,d=fe(e,t,f,a);h.canEntireRowFit(d,n)&&(N(e,t,h,a,n),l=r+o)}),l}function Ct(e,t,r,a){var n=t.settings;e.applyStyles(e.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(i){return N(e,t,i,r,a)})}function ha(e,t,r){var a=r.getLineHeight(e.styles.fontSize),n=e.padding("vertical"),i=Math.floor((t-n)/a);return Math.max(0,i)}function fa(e,t,r,a){var n={};e.spansMultiplePages=!0,e.height=0;for(var i=0,s=0,l=r.columns;s<l.length;s++){var h=l[s],o=e.cells[h.index];if(o){Array.isArray(o.text)||(o.text=[o.text]);var f=new se(o.raw,o.styles,o.section);f=M(f,o),f.text=[];var d=ha(o,t,a);o.text.length>d&&(f.text=o.text.splice(d,o.text.length));var g=a.scaleFactor(),p=a.getLineHeightFactor();o.contentHeight=o.getContentHeight(g,p),o.contentHeight>=t&&(o.contentHeight=t,f.styles.minCellHeight-=t),o.contentHeight>e.height&&(e.height=o.contentHeight),f.contentHeight=f.getContentHeight(g,p),f.contentHeight>i&&(i=f.contentHeight),n[h.index]=f}}var v=new oe(e.raw,-1,e.section,n,!0);v.height=i;for(var b=0,y=r.columns;b<y.length;b++){var h=y[b],f=v.cells[h.index];f&&(f.height=v.height);var o=e.cells[h.index];o&&(o.height=e.height)}return v}function da(e,t,r,a){var n=e.pageSize().height,i=a.settings.margin,s=i.top+i.bottom,l=n-s;t.section==="body"&&(l-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var h=t.getMinimumRowHeight(a.columns,e),o=h<r;if(h>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!o)return!1;var f=t.hasRowSpan(a.columns),d=t.getMaxCellHeight(a.columns)>l;return d?(f&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(f||a.settings.rowPageBreak==="avoid")}function ct(e,t,r,a,n,i,s){var l=fe(e,t,a,i);if(r.canEntireRowFit(l,s))N(e,t,r,i,s);else if(da(e,r,l,t)){var h=fa(r,l,t,e);N(e,t,r,i,s),lt(e,t,n,i,s),ct(e,t,h,a,n,i,s)}else lt(e,t,n,i,s),ct(e,t,r,a,n,i,s)}function N(e,t,r,a,n){a.x=t.settings.margin.left;for(var i=0,s=n;i<s.length;i++){var l=s[i],h=r.cells[l.index];if(!h){a.x+=l.width;continue}e.applyStyles(h.styles),h.x=a.x,h.y=a.y;var o=t.callCellHooks(e,t.hooks.willDrawCell,h,r,l,a);if(o===!1){a.x+=l.width;continue}ua(e,h,a);var f=h.getTextPos();Qt(h.text,f.x,f.y,{halign:h.styles.halign,valign:h.styles.valign,maxWidth:Math.ceil(h.width-h.padding("left")-h.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,h,r,l,a),a.x+=l.width}a.y+=r.height}function ua(e,t,r){var a=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof a.lineWidth=="number"){var n=ee(a.lineWidth,a.fillColor);n&&e.rect(t.x,r.y,t.width,t.height,n)}else typeof a.lineWidth=="object"&&(a.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),ga(e,t,r,a.lineWidth))}function ga(e,t,r,a){var n,i,s,l;a.top&&(n=r.x,i=r.y,s=r.x+t.width,l=r.y,a.right&&(s+=.5*a.right),a.left&&(n-=.5*a.left),h(a.top,n,i,s,l)),a.bottom&&(n=r.x,i=r.y+t.height,s=r.x+t.width,l=r.y+t.height,a.right&&(s+=.5*a.right),a.left&&(n-=.5*a.left),h(a.bottom,n,i,s,l)),a.left&&(n=r.x,i=r.y,s=r.x,l=r.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(l+=.5*a.bottom),h(a.left,n,i,s,l)),a.right&&(n=r.x+t.width,i=r.y,s=r.x+t.width,l=r.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(l+=.5*a.bottom),h(a.right,n,i,s,l));function h(o,f,d,g,p){e.getDocument().setLineWidth(o),e.getDocument().line(f,d,g,p,"S")}}function fe(e,t,r,a){var n=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(n+=t.getFootHeight(t.columns)),e.pageSize().height-a.y-n}function lt(e,t,r,a,n,i){n===void 0&&(n=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return N(e,t,l,a,n)}),t.callEndPageHooks(e,a);var s=t.settings.margin;te(e,t,r,a),de(e),t.pageNumber++,a.x=s.left,a.y=s.top,r.y=s.top,t.callWillDrawPageHooks(e,a),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return N(e,t,l,a,n)}),e.applyStyles(e.userStyles))}function de(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function ca(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=t[0],n=ie(this,a),i=le(this,n);return he(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,a,n){Qt(t,r,a,n,this)},e.API.autoTableSetDefaults=function(t){return q.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){q.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var a;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=new q(this),i=ne(n,t,window,r,!1),s=i.head,l=i.body,h=((a=s[0])===null||a===void 0?void 0:a.map(function(o){return o.content}))||[];return{columns:h,rows:l,data:l}}}var wt;function G(e,t){var r=ie(e,t),a=le(e,r);he(e,a)}try{if(typeof window<"u"&&window){var Ut=window,Xt=Ut.jsPDF||((wt=Ut.jspdf)===null||wt===void 0?void 0:wt.jsPDF);Xt&&ca(Xt)}}catch(e){console.error("Could not apply autoTable plugin",e)}const pa=e=>{const t=new URLSearchParams;return Object.entries(e).forEach(([r,a])=>{a&&t.append(r,a)}),t.toString()},va=()=>{var Mt;const e=Jt(),t=C.useMemo(()=>{var c;return Re(((c=e==null?void 0:e.palette)==null?void 0:c.mode)||"light")},[(Mt=e==null?void 0:e.palette)==null?void 0:Mt.mode]),[r,a]=C.useState(0),[n,i]=C.useState("id"),[s,l]=C.useState("asc"),[h,o]=C.useState(0),[f,d]=C.useState(20),[g,p]=C.useState({classPopulations:[],studentToTeacherRatio:"1:0",feePaymentCompliance:0}),[v,b]=C.useState([]),[y,w]=C.useState([]),[j,R]=C.useState({monthlyTrends:[],classParticipation:[]}),[D,$]=C.useState({avgTeacherWorkload:0,examCompletionRate:0,studentToTeacherRatio:"1:0"}),[k,ht]=C.useState(null),[z,E]=C.useState(null),[m,vt]=C.useState([]),[mt,yt]=C.useState([]),[_,K]=C.useState(null),{loading:ft,data:F,error:U,callApi:X}=O(),{loading:dt,data:L,error:J,callApi:Q}=O(),{loading:P,data:B,error:Z,callApi:V}=O(),{loading:ut,data:tt,error:At,callApi:jt}=O(),{loading:ue,data:et,error:Dt,callApi:Rt}=O(),{loading:ge,data:at,error:kt,callApi:Wt}=O(),{loading:ce,data:rt,error:Ht,callApi:Ft}=O(),{loading:pe,data:I,error:Et,callApi:zt}=O();C.useEffect(()=>{(async()=>{try{await X(`${Y.ACADEMIC_YEARS}/minimal`),await Q(Y.CURRENT_ACADEMIC_TERM)}catch(x){K(x.message||"Failed to fetch academic years/term")}})()},[X,Q]),C.useEffect(()=>{k&&zt(`${Y.ACADEMIC_TERMS}?academicYearId=${k}`)},[k,zt]),C.useEffect(()=>{var c;if((F==null?void 0:F.status)==="success"&&((c=F.data)!=null&&c.length)){vt(F.data);const x=F.data.find(H=>H.isCurrent)||F.data[0];x!=null&&x._id&&!k&&ht(x._id)}},[F,k]),C.useEffect(()=>{var c,x;if((L==null?void 0:L.status)==="success"&&((c=L.data)!=null&&c._id)&&!z&&E(L.data._id),(I==null?void 0:I.status)==="success"&&((x=I.data)!=null&&x.length)){yt(I.data);const H=I.data.find(T=>T.isCurrent)||I.data[0];H!=null&&H._id&&!z&&E(H._id)}},[L,I,z]);const Lt=C.useCallback(async c=>{if(!k)return;const x=pa({academicYearId:k,academicTermId:z});try{switch(c){case 0:await V(`${Y.ANALYTICS}/overview?${x}`);break;case 1:await jt(`${Y.ANALYTICS}/class-performance?${x}`);break;case 2:await Rt(`${Y.ANALYTICS}/teacher-performance?${x}`);break;case 3:await Wt(`${Y.ANALYTICS}/attendance?${x}`);break;case 4:await Ft(`${Y.ANALYTICS}/other-kpis?${x}`);break;default:break}}catch(H){K(H.message||`Failed to fetch analytics data for tab ${c}`)}},[k,z,V,jt,Rt,Wt,Ft]);C.useEffect(()=>{(B==null?void 0:B.status)==="success"&&p(B.data),(tt==null?void 0:tt.status)==="success"&&b(tt.data),(et==null?void 0:et.status)==="success"&&w(et.data),(at==null?void 0:at.status)==="success"&&R(at.data),(rt==null?void 0:rt.status)==="success"&&$(rt.data)},[B,tt,et,at,rt]),C.useEffect(()=>{const c=[U,J,Z,At,Dt,kt,Ht,Et].filter(Boolean);c.length>0?K(c.join("; ")):K(null)},[U,J,Z,At,Dt,kt,Ht,Et]),C.useEffect(()=>{k&&Lt(r)},[r,k,z,Lt]);const ve=C.useMemo(()=>{var c;return((c=g.classPopulations)==null?void 0:c.map(x=>({id:x.className,label:x.className,value:x.studentCount||0})))||[]},[g.classPopulations]),me=C.useMemo(()=>v.map(c=>({class:c.class,Math:c.mathAvg||0,English:c.englishAvg||0})),[v]),ye=C.useMemo(()=>j.monthlyTrends.map(c=>({id:c.month,data:Object.entries(c.classes||{}).map(([x,H])=>({x:c.month,y:H||0}))})),[j.monthlyTrends]);return{tabIndex:r,setTabIndex:a,sortBy:n,setSortBy:i,sortDirection:s,setSortDirection:l,page:h,setPage:o,rowsPerPage:f,setRowsPerPage:d,overviewData:g,classPerformanceData:v,teacherPerformanceData:y,attendanceData:j,otherKPIs:D,classPopulationPieData:ve,subjectBarData:me,attendanceTrends:ye,academicYears:m,academicTerms:mt,academicYearId:k,academicTermId:z,handleAcademicYearChange:c=>{ht(c.target.value),E(null)},handleAcademicTermChange:c=>{E(c.target.value)},loading:ft||dt||P||ut||ue||ge||ce||pe,error:_,handleSortChange:c=>{l(n===c&&s==="asc"?"desc":"asc"),i(c)},handlePageChange:(c,x)=>{o(x)},handleRowsPerPageChange:c=>{d(parseInt(c.target.value,10)),o(0)},handleTabChange:(c,x)=>{a(x),o(0)},handleExportReport:()=>{var Nt;const c=new De,x=10,H=c.internal.pageSize.getWidth();let T=x;(()=>{c.setFontSize(16),c.setFont("helvetica","bold");const S=r===0?"School Analytics Overview Report":r===1?"Class Performance Report":r===2?"Teacher Performance Report":r===3?"Attendance Report":"Other KPIs Report";c.text(S,x,T),c.setFontSize(10),c.setFont("helvetica","normal"),c.text(`Generated on: ${new Date().toLocaleDateString()}`,H-x-50,T),T+=10})(),r===0?(G(c,{startY:T,head:[["Class Name","Student Count"]],body:((Nt=g.classPopulations)==null?void 0:Nt.map(S=>[S.className,S.studentCount]))||[],theme:"grid",styles:{fontSize:10}}),T=c.lastAutoTable.finalY+10,c.text(`Student-to-Teacher Ratio: ${g.studentToTeacherRatio}`,x,T),T+=10,c.text(`Fee Payment Compliance: ${g.feePaymentCompliance}%`,x,T)):r===1?G(c,{startY:T,head:[["S/N","Class","Avg Grade","Pass Rate","Math Avg","English Avg","Date"]],body:v.map(S=>[S.sn,S.class,S.avgGrade,S.passRate,S.mathAvg||"N/A",S.englishAvg||"N/A",S.date]),theme:"grid",styles:{fontSize:10}}):r===2?G(c,{startY:T,head:[["S/N","Name","Subject","Attendance Rate","Classes Taught","Date"]],body:y.map(S=>[S.sn,S.name,S.subject,S.attendanceRate,Array.isArray(S.classesTaught)?S.classesTaught.join(", "):S.classesTaught||"N/A",S.date]),theme:"grid",styles:{fontSize:10}}):r===3?(G(c,{startY:T,head:[["S/N","Class","Participation Rate","Date"]],body:j.classParticipation.map(S=>[S.sn,S.class,S.participationRate,S.date]),theme:"grid",styles:{fontSize:10}}),T=c.lastAutoTable.finalY+10,c.text("Monthly Attendance Trends",x,T),T+=10,j.monthlyTrends.forEach(S=>{G(c,{startY:T,head:[[`Month ${S.month}`,"Attendance Rate"]],body:Object.entries(S.classes||{}).map(([xe,Se])=>[xe,Se]),theme:"grid",styles:{fontSize:10}}),T=c.lastAutoTable.finalY+10})):r===4&&G(c,{startY:T,head:[["Metric","Value"]],body:[["Average Teacher Workload (Periods/Week)",D.avgTeacherWorkload||0],["Exam Completion Rate (%)",D.examCompletionRate||0],["Student-to-Teacher Ratio",D.studentToTeacherRatio||"1:0"]],theme:"grid",styles:{fontSize:10}}),c.save(`analytics_report_${new Date().toISOString()}.pdf`)},colors:t}},ma=()=>{var K,ft,F,U,X,dt,L,J,Q;Jt();const{tabIndex:e,handleTabChange:t,sortBy:r,sortDirection:a,page:n,rowsPerPage:i,overviewData:s,classPerformanceData:l,teacherPerformanceData:h,attendanceData:o,otherKPIs:f,classPopulationPieData:d,subjectBarData:g,attendanceTrends:p,academicYears:v,academicTerms:b,academicYearId:y,academicTermId:w,handleAcademicYearChange:j,handleAcademicTermChange:R,loading:D,error:$,handleSortChange:k,handlePageChange:ht,handleRowsPerPageChange:z,handleExportReport:E,colors:m}=va(),vt=()=>{switch(e){case 0:return[{id:"sn",label:"S/N",sortable:!0},{id:"className",label:"Class Name",sortable:!0},{id:"studentCount",label:"Student Count",sortable:!0}];case 1:return[{id:"sn",label:"S/N",sortable:!0},{id:"class",label:"Class",sortable:!0},{id:"avgGrade",label:"Average Grade",sortable:!0},{id:"passRate",label:"Pass Rate (%)",sortable:!0},{id:"mathAvg",label:"Math Avg",sortable:!0},{id:"englishAvg",label:"English Avg",sortable:!0},{id:"date",label:"Date",sortable:!0}];case 2:return[{id:"sn",label:"S/N",sortable:!0},{id:"name",label:"Name",sortable:!0},{id:"subject",label:"Subject",sortable:!0},{id:"attendanceRate",label:"Attendance Rate (%)",sortable:!0},{id:"classesTaught",label:"Classes Taught",sortable:!1},{id:"date",label:"Date",sortable:!0}];case 3:return[{id:"sn",label:"S/N",sortable:!0},{id:"class",label:"Class",sortable:!0},{id:"participationRate",label:"Participation Rate (%)",sortable:!0},{id:"date",label:"Date",sortable:!0}];case 4:return[{id:"metric",label:"Metric",sortable:!0},{id:"value",label:"Value",sortable:!0}];default:return[]}},mt=()=>{switch(e){case 0:return"Class Populations";case 1:return"Class Performance";case 2:return"Teacher Performance";case 3:return"Class Participation Rates";case 4:return"Key Performance Indicators";default:return""}},yt=()=>{switch(e){case 0:return s.classPopulations||[];case 1:return l;case 2:return h.map(P=>({...P,classesTaught:Array.isArray(P.classesTaught)?P.classesTaught.join(", "):P.classesTaught||"N/A"}));case 3:return o.classParticipation;case 4:return[{metric:"Average Teacher Workload (Periods/Week)",value:f.avgTeacherWorkload||0},{metric:"Exam Completion Rate (%)",value:f.examCompletionRate||0},{metric:"Student-to-Teacher Ratio",value:f.studentToTeacherRatio||"1:0"}];default:return[]}},_={columns:vt(),tableHeader:mt(),data:yt(),sortBy:r,sortDirection:a,onSortChange:k,page:n,rowsPerPage:i,onPageChange:ht,onRowsPerPageChange:z};return u.jsxs(A,{children:[u.jsx(Ce,{title:"SCHOOL ANALYTICS & REPORTING",subtitle:"Performance metrics for classes, teachers, and attendance"}),D&&u.jsx(A,{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",children:u.jsx(ke,{})}),$&&u.jsx(A,{m:"20px",children:u.jsx(We,{severity:"error",children:$})}),!D&&!$&&u.jsxs(u.Fragment,{children:[u.jsxs(A,{display:"flex",gap:2,mb:2,children:[u.jsxs(Bt,{sx:{minWidth:200},children:[u.jsx(It,{children:"Academic Year"}),u.jsx(Yt,{value:y||"",onChange:j,label:"Academic Year",children:v.map(P=>u.jsxs(Ot,{value:P._id,children:[P.name," ",P.isCurrent&&"(Current)"]},P._id))})]}),u.jsxs(Bt,{sx:{minWidth:200},children:[u.jsx(It,{children:"Academic Term"}),u.jsx(Yt,{value:w||"",onChange:R,label:"Academic Term",disabled:!y,children:b.map(P=>u.jsxs(Ot,{value:P._id,children:[P.name," ",P.isCurrent&&"(Current)"]},P._id))})]})]}),u.jsx(we,{value:e,onChange:t,"aria-label":"analytics dashboard tabs",sx:{backgroundColor:((K=m==null?void 0:m.primary)==null?void 0:K[400])||"#1F2A44","& .MuiTabs-indicator":{backgroundColor:((ft=m==null?void 0:m.blueAccent)==null?void 0:ft[700])||"#3da58a"}},children:["Overview","Class Performance","Teacher Performance","Attendance","Other KPIs"].map(P=>{var B,Z,V,ut;return u.jsx(be,{label:P,sx:{color:((B=m==null?void 0:m.grey)==null?void 0:B[100])||"#fff",textTransform:"none",fontWeight:"bold","&.Mui-selected":{color:((Z=m==null?void 0:m.grey)==null?void 0:Z[100])||"#fff",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:((V=m==null?void 0:m.blueAccent)==null?void 0:V[700])||"#3da58a"},boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)",backgroundColor:((ut=m==null?void 0:m.primary)==null?void 0:ut[400])||"#1F2A44"}},P)})}),u.jsxs(A,{m:"40px 0 0 0",height:"75vh",children:[e===0&&u.jsx(A,{children:u.jsx(it,{title:"School Overview",details:u.jsxs(A,{children:[u.jsx(W,{variant:"h6",children:"Student Population by Class"}),u.jsx(A,{height:"300px",mt:2,children:d.length>0?u.jsx(Pe,{data:d}):u.jsx(W,{children:"No population data available"})}),u.jsxs(W,{children:["Student-to-Teacher Ratio: ",s.studentToTeacherRatio||"1:0"]}),u.jsxs(W,{children:["Fee Payment Compliance: ",s.feePaymentCompliance||0,"%"]}),((F=s.classPopulations)==null?void 0:F.length)>0?u.jsx(nt,{..._}):u.jsx(W,{mt:2,children:"No class population data available"}),u.jsx(ot,{onClick:E,icon:u.jsx(st,{}),title:"Export Overview Report",sx:{mt:2}})]}),defaultExpanded:!0})}),e===1&&u.jsx(A,{children:u.jsx(it,{title:"Class Performance Insights",details:u.jsxs(A,{children:[u.jsx(A,{height:"300px",mb:2,children:g.length>0?u.jsx(Te,{data:g,keys:["Math","English"],indexBy:"class",margin:{top:50,right:130,bottom:50,left:60},padding:.3,colors:{scheme:"nivo"},animate:!0,motionConfig:"default",theme:{axis:{ticks:{text:{fill:((U=m==null?void 0:m.grey)==null?void 0:U[100])||"#fff"}},legend:{text:{fill:((X=m==null?void 0:m.grey)==null?void 0:X[100])||"#fff"}}},legends:{text:{fill:((dt=m==null?void 0:m.grey)==null?void 0:dt[100])||"#fff"}}},axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Class",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Average Score (%)",legendPosition:"middle",legendOffset:-40},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20}]}):u.jsx(W,{children:"No class performance data available"})}),l.length>0?u.jsx(nt,{..._}):u.jsx(W,{children:"No class performance data available"}),u.jsx(ot,{onClick:E,icon:u.jsx(st,{}),title:"Export Class Performance Report",sx:{mt:2}})]}),defaultExpanded:!0})}),e===2&&u.jsx(A,{children:u.jsx(it,{title:"Teacher Performance Insights",details:u.jsxs(A,{children:[h.length>0?u.jsx(nt,{..._}):u.jsx(W,{children:"No teacher performance data available"}),u.jsx(ot,{onClick:E,icon:u.jsx(st,{}),title:"Export Teacher Performance Report",sx:{mt:2}})]}),defaultExpanded:!0})}),e===3&&u.jsx(A,{children:u.jsx(it,{title:"Attendance Trends",details:u.jsxs(A,{children:[u.jsx(A,{height:"300px",mb:2,children:p.length>0?u.jsx(Ae,{data:p,animate:!0,motionConfig:"default",margin:{top:50,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},axisBottom:{tickSize:5,tickPadding:5,tickRotation:45,legend:"Month",legendOffset:36,legendPosition:"middle"},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Attendance Rate (%)",legendPosition:"middle",legendOffset:-40},colors:{scheme:"nivo"},theme:{axis:{ticks:{text:{fill:((L=m==null?void 0:m.grey)==null?void 0:L[100])||"#fff"}},legend:{text:{fill:((J=m==null?void 0:m.grey)==null?void 0:J[100])||"#fff"}}},legends:{text:{fill:((Q=m==null?void 0:m.grey)==null?void 0:Q[100])||"#fff"}}},legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemWidth:80,itemHeight:20}]}):u.jsx(W,{children:"No attendance trends available"})}),o.classParticipation.length>0?u.jsx(nt,{..._}):u.jsx(W,{children:"No class participation data available"}),u.jsx(ot,{onClick:E,icon:u.jsx(st,{}),title:"Export Attendance Report",sx:{mt:2}})]}),defaultExpanded:!0})}),e===4&&u.jsx(A,{children:u.jsx(it,{title:"Other KPIs",details:u.jsxs(A,{children:[u.jsxs(W,{children:["Average Teacher Workload: ",f.avgTeacherWorkload||0," periods/week"]}),u.jsxs(W,{children:["Exam Completion Rate: ",f.examCompletionRate||0,"%"]}),u.jsxs(W,{children:["Student-to-Teacher Ratio: ",f.studentToTeacherRatio||"1:0"]}),u.jsx(nt,{..._}),u.jsx(ot,{onClick:E,icon:u.jsx(st,{}),title:"Export KPI Report",sx:{mt:2}})]}),defaultExpanded:!0})})]})]})]})},er=je(ma);export{er as default};
