import{j as e,r as x}from"./index-BO-TmkzE.js";import{t as I}from"./modal-CG0C6vpP.js";import{H as K}from"./Header-DSApfQWn.js";import{a as H,b as m,T as O}from"./table-vaeRJyjp.js";import{P as L}from"./PieChart-BCW___u-.js";import{C as p}from"./accordion-M8ImoQcF.js";import{A as u}from"./actionButton-BApjawRI.js";import{X as z}from"./nivo-bar-C0299_5Q.js";import{p as X}from"./nivo-line.es-Bsgvn5zF.js";import{d as b}from"./Download-CuQHu5Lq.js";import{w as U}from"./dasboardPagesContainer-DENYBOMz.js";import{j as M,v as n,T as s}from"./TextField-CigEBK4R.js";import"./IconButton-DnpiNGo6.js";import"./index-BJVcWxQk.js";import"./confirmationModal-DjrrgVpa.js";import"./CircularProgress-oo0vmEJK.js";import"./MenuItem-Cm8_Zc8l.js";import"./index-nsUM-GnQ.js";import"./loadingButton-CiJH9dFC.js";import"./useApi-bPe3HYn1.js";import"./crystal-land-log-removebg-DVF-nlbN.js";import"./useSlot-DtaxXO1z.js";import"./useMediaQuery-CPLNVO1b.js";import"./nivo-pie-sakEcDZC.js";import"./isEqual-Dq3IIVC5.js";import"./_baseIsEqual-Be1XnXXv.js";import"./_baseForOwn-BE3diFH5.js";import"./_baseSlice-z0Zd1-Ev.js";const f=[{id:1,class:"Primary 1",avgGrade:85,passRate:95,mathAvg:88,englishAvg:82,attendanceRate:92,date:"2025-06-01"},{id:2,class:"Primary 2",avgGrade:80,passRate:90,mathAvg:85,englishAvg:78,attendanceRate:90,date:"2025-06-01"},{id:3,class:"JSS 1",avgGrade:75,passRate:85,mathAvg:80,englishAvg:70,attendanceRate:88,date:"2025-06-01"},{id:4,class:"SSS 1",avgGrade:70,passRate:80,mathAvg:75,englishAvg:65,attendanceRate:85,date:"2025-06-01"}],Y=[{id:1,name:"John Doe",subject:"Math",attendanceRate:98,rating:4.5,classesTaught:["Primary 1","JSS 1"],studentFeedback:"Excellent",date:"2025-06-01"},{id:2,name:"Jane Smith",subject:"English",attendanceRate:95,rating:4,classesTaught:["Primary 2","SSS 1"],studentFeedback:"Good",date:"2025-06-01"},{id:3,name:"Alice Brown",subject:"Science",attendanceRate:90,rating:3.8,classesTaught:["JSS 1","SSS 1"],studentFeedback:"Needs improvement",date:"2025-06-01"}],_=[{week:"2025-05-05","Primary 1":92,"Primary 2":90,"JSS 1":88,"SSS 1":85},{week:"2025-05-12","Primary 1":93,"Primary 2":91,"JSS 1":87,"SSS 1":86},{week:"2025-05-19","Primary 1":91,"Primary 2":89,"JSS 1":86,"SSS 1":84}],q={studentToTeacherRatio:20,facultyRetentionRate:85,techUsageClasses:90,facultyAdvancedCertifications:60},Q=()=>{const C=M(),a=I(C.palette.mode),[r,R]=x.useState(0),[j,P]=x.useState("id"),[S,v]=x.useState("asc"),[k,g]=x.useState(0),[y,w]=x.useState(20),T=t=>{v(j===t&&S==="asc"?"desc":"asc"),P(t)},D=(t,i)=>{g(i)},l=t=>{w(parseInt(t.target.value,10)),g(0)},E=(t,i)=>{R(i),g(0)},N=()=>{console.log("Exporting report for tab:",r)},A=[{id:"sn",label:"S/N",width:90},{id:"id",label:"ID",width:100},{id:"class",label:"Class",flex:1,renderCell:t=>e.jsx(s,{children:String(t.class||"N/A")})},{id:"avgGrade",label:"Avg Grade (%)",flex:1,renderCell:t=>e.jsx(s,{children:t.avgGrade||"N/A"})},{id:"passRate",label:"Pass Rate (%)",flex:1,renderCell:t=>e.jsx(s,{color:a.greenAccent[500],children:t.passRate||"N/A"})},{id:"mathAvg",label:"Math Avg (%)",flex:1,renderCell:t=>e.jsx(s,{children:t.mathAvg||"N/A"})},{id:"englishAvg",label:"English Avg (%)",flex:1,renderCell:t=>e.jsx(s,{children:t.englishAvg||"N/A"})},{id:"attendanceRate",label:"Attendance Rate (%)",flex:1,renderCell:t=>e.jsx(s,{color:a.blueAccent[500],children:t.attendanceRate||"N/A"})},{id:"date",label:"Date",flex:1}],c=[{id:"sn",label:"S/N",width:90},{id:"id",label:"ID",width:100},{id:"name",label:"Name",flex:1,renderCell:t=>e.jsx(s,{children:String(t.name||"N/A")})},{id:"subject",label:"Subject",flex:1,renderCell:t=>e.jsx(s,{children:String(t.subject||"N/A")})},{id:"attendanceRate",label:"Attendance Rate (%)",flex:1,renderCell:t=>e.jsx(s,{color:a.blueAccent[500],children:t.attendanceRate||"N/A"})},{id:"rating",label:"Rating (1-5)",flex:1,renderCell:t=>e.jsx(s,{color:a.greenAccent[500],children:t.rating||"N/A"})},{id:"classesTaught",label:"Classes Taught",flex:1,renderCell:t=>e.jsx(s,{children:t.classesTaught.join(", ")||"N/A"})},{id:"studentFeedback",label:"Feedback",flex:1,renderCell:t=>e.jsx(s,{children:String(t.studentFeedback||"N/A")})},{id:"date",label:"Date",flex:1}],h=f.map((t,i)=>({id:t.id,sn:i+1,class:t.class,avgGrade:t.avgGrade,passRate:t.passRate,mathAvg:t.mathAvg,englishAvg:t.englishAvg,attendanceRate:t.attendanceRate,date:t.date?new Date(t.date).toLocaleDateString():"N/A"})),o=Y.map((t,i)=>({id:t.id,sn:i+1,name:t.name,subject:t.subject,attendanceRate:t.attendanceRate,rating:t.rating,classesTaught:t.classesTaught,studentFeedback:t.studentFeedback,date:t.date?new Date(t.date).toLocaleDateString():"N/A"})),d=f.map(t=>({id:t.class,label:t.class,value:t.passRate,color:a.blueAccent[Math.floor(Math.random()*4)+1]})),B=f.map(t=>({class:t.class,Math:t.mathAvg,English:t.englishAvg})),F=()=>{switch(r){case 0:return{columns:[],data:[],header:"School Analytics Overview"};case 1:return{columns:A,data:h,header:"Class Performance"};case 2:return{columns:c,data:o,header:"Teacher Performance"};case 3:return{columns:A,data:h,header:"Class Attendance Rates"};case 4:return{columns:[],data:[],header:"Other Key Performance Indicators"};default:return{columns:[],data:[],header:"School Analytics Overview"}}},{columns:G,data:W,header:J}=F();return{tabIndex:r,handleTabChange:E,columns:G,data:W,header:J,sortBy:j,sortDirection:S,page:k,rowsPerPage:y,handleSortChange:T,handlePageChange:D,handleRowsPerPageChange:l,handleExportReport:N,passRatePieData:d,subjectBarData:B,attendanceTrends:_,otherKPIs:q}},V=()=>{const C=M(),a=I(C.palette.mode),{tabIndex:r,handleTabChange:R,columns:j,data:P,header:S,sortBy:v,sortDirection:k,page:g,rowsPerPage:y,handleSortChange:w,handlePageChange:T,handleRowsPerPageChange:D,handleExportReport:l,passRatePieData:E,subjectBarData:N,attendanceTrends:A,otherKPIs:c}=Q(),h={columns:j,tableHeader:S,data:P,sortBy:v,sortDirection:k,onSortChange:w,page:g,rowsPerPage:y,onPageChange:T,onRowsPerPageChange:D};return e.jsxs(n,{children:[e.jsx(K,{title:"SCHOOL ANALYTICS & REPORTING",subtitle:"Performance metrics for classes, teachers, and attendance"}),e.jsxs(H,{value:r,onChange:R,"aria-label":"analytics dashboard tabs",sx:{backgroundColor:a.primary[400],"& .MuiTabs-indicator":{backgroundColor:a.blueAccent[700]}},children:[e.jsx(m,{label:"Overview",sx:{color:"white !important",textTransform:"none",fontWeight:"bold","&.Mui-selected":{color:"white !important",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:a.blueAccent[700]},boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)",backgroundColor:a.primary[400]}}),e.jsx(m,{label:"Class Performance",sx:{color:"white !important",textTransform:"none",fontWeight:"bold","&.Mui-selected":{color:"white !important",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:a.blueAccent[700]},boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)",backgroundColor:a.primary[400]}}),e.jsx(m,{label:"Teacher Performance",sx:{color:"white !important",textTransform:"none",fontWeight:"bold","&.Mui-selected":{color:"white !important",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:a.blueAccent[700]},boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)",backgroundColor:a.primary[400]}}),e.jsx(m,{label:"Attendance",sx:{color:"white !important",textTransform:"none",fontWeight:"bold","&.Mui-selected":{color:"white !important",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:a.blueAccent[700]},boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)",backgroundColor:a.primary[400]}}),e.jsx(m,{label:"Other KPIs",sx:{color:"white !important",textTransform:"none",fontWeight:"bold","&.Mui-selected":{color:"white !important",boxShadow:"0px 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:a.blueAccent[700]},boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)",backgroundColor:a.primary[400]}})]}),e.jsxs(n,{m:"40px 0 0 0",height:"75vh",children:[r===0&&e.jsx(n,{children:e.jsx(p,{title:"School Overview",details:e.jsxs(n,{children:[e.jsx(s,{variant:"h6",children:"Key Metrics"}),e.jsx(n,{height:"300px",mt:2,children:e.jsx(L,{data:E})}),e.jsxs(s,{mt:2,children:["Average Attendance Rate: ",f.reduce((o,d)=>o+d.attendanceRate,0)/f.length,"%"]}),e.jsxs(s,{children:["Student-to-Teacher Ratio: ",c.studentToTeacherRatio,":1"]}),e.jsx(u,{onClick:l,icon:e.jsx(b,{}),title:"Export Overview Report",sx:{mt:2}})]}),defaultExpanded:!0})}),r===1&&e.jsx(n,{children:e.jsx(p,{title:"Class Performance Insights",details:e.jsxs(n,{children:[e.jsx(n,{height:"300px",mb:2,children:e.jsx(z,{data:N,keys:["Math","English"],indexBy:"class",margin:{top:50,right:130,bottom:50,left:60},padding:.3,colors:{scheme:"nivo"},animate:!0,motionConfig:"default",theme:{axis:{ticks:{text:{fill:a.grey[100]}},legend:{text:{fill:a.grey[100]}}},legends:{text:{fill:a.grey[100]}}},axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Class",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Average Score (%)",legendPosition:"middle",legendOffset:-40},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20}]})}),e.jsx(O,{...h}),e.jsx(u,{onClick:l,icon:e.jsx(b,{}),title:"Export Class Performance Report",sx:{mt:2}})]}),defaultExpanded:!0})}),r===2&&e.jsx(n,{children:e.jsx(p,{title:"Teacher Performance Insights",details:e.jsxs(n,{children:[e.jsx(O,{...h}),e.jsx(u,{onClick:l,icon:e.jsx(b,{}),title:"Export Teacher Performance Report",sx:{mt:2}})]}),defaultExpanded:!0})}),r===3&&e.jsx(n,{children:e.jsx(p,{title:"Attendance Trends",details:e.jsxs(n,{children:[e.jsx(n,{height:"300px",mb:2,children:e.jsx(X,{data:A.map(o=>({id:o.week,data:Object.keys(o).filter(d=>d!=="week").map(d=>({x:o.week,y:o[d]}))})),animate:!0,motionConfig:"default",margin:{top:50,right:110,bottom:50,left:60},xScale:{type:"point"},yScale:{type:"linear",min:"auto",max:"auto",stacked:!1,reverse:!1},axisBottom:{tickSize:5,tickPadding:5,tickRotation:45,legend:"Week",legendOffset:36,legendPosition:"middle"},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Attendance Rate (%)",legendOffset:-40,legendPosition:"middle"},colors:{scheme:"nivo"},theme:{axis:{ticks:{text:{fill:a.grey[100]}},legend:{text:{fill:a.grey[100]}}},legends:{text:{fill:a.grey[100]}}},legends:[{anchor:"bottom-right",direction:"column",justify:!1,translateX:100,translateY:0,itemsSpacing:0,itemWidth:80,itemHeight:20}]})}),e.jsx(O,{...h}),e.jsx(u,{onClick:l,icon:e.jsx(b,{}),title:"Export Attendance Report",sx:{mt:2}})]}),defaultExpanded:!0})}),r===4&&e.jsx(n,{children:e.jsx(p,{title:"Other KPIs",details:e.jsxs(n,{children:[e.jsxs(s,{children:["Student-to-Teacher Ratio: ",c.studentToTeacherRatio,":1"]}),e.jsxs(s,{children:["Faculty Retention Rate: ",c.facultyRetentionRate,"%"]}),e.jsxs(s,{children:["Classes Using Technology: ",c.techUsageClasses,"%"]}),e.jsxs(s,{children:["Faculty with Advanced Certifications: ",c.facultyAdvancedCertifications,"%"]}),e.jsx(u,{onClick:l,icon:e.jsx(b,{}),title:"Export KPI Report",sx:{mt:2}})]}),defaultExpanded:!0})})]})]})},ke=U(V);export{ke as default};
