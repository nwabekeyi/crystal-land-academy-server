import{r as d,a as I,j as r,f as v}from"./index-Dia3dXnv.js";import{H as U}from"./Header-BKDrWR6o.js";import{t as $}from"./modal-CRceNtXl.js";import{C as D}from"./accordion-DCS8W_7Y.js";import{w as L}from"./dasboardPagesContainer-FR1z_d3q.js";import{u as N}from"./useApi-CcDc2KeG.js";import{j as _,v as m,T as a}from"./TextField-CiACpH9R.js";import{C as k}from"./CircularProgress-Du6yAQTu.js";import"./index-HCkcCK1E.js";import"./MenuItem-9u3wVos-.js";import"./IconButton-BeQuUMyU.js";import"./index-B_m23NjE.js";import"./loadingButton-Dn6lZ4mI.js";import"./confirmationModal-CIDTnzxs.js";import"./crystal-land-log-removebg-DVF-nlbN.js";import"./useSlot-BVdpsmmF.js";const R=()=>{var b,j;const C=_(),c=$(C.palette.mode),{loading:A,error:x,callApi:u}=N(),[h,T]=d.useState([]),[n,E]=d.useState(""),{user:s}=I(e=>e.users),p=s==null?void 0:s.classLevelId;return(b=s==null?void 0:s.currentClassLevel)==null||b.className,(j=s==null?void 0:s.currentClassLevel)==null||j.subclass,d.useEffect(()=>{n||(async()=>{const t=await u(`${v.ACADEMIC_TERM}/current`,"GET");t&&t.status==="success"&&E(t.data._id)})()},[u,n]),d.useEffect(()=>{(async()=>{if(!n||!p)return;const t=[`academicTermId=${n}`,`classLevelId=${p}`],o=`${v.CURRICULUM}?${t.join("&")}`,i=await u(o,"GET");if(i&&i.status==="success"){const g=i.data.map(f=>{var y;return{subject:((y=f.subjectId)==null?void 0:y.name)||"Unknown Subject",courseDuration:f.courseDuration||"Unknown",topics:f.topics.map((l,w)=>({_id:l._id||`topic_${w}`,topic:l.topic||"Untitled Topic",description:l.description||"No description available",duration:l.duration||"Unknown",resources:l.resources||[]}))}});T(g)}})()},[u,n,p]),r.jsxs(m,{sx:{p:3},children:[r.jsx(U,{title:"Curriculum Overview",subtitle:"Explore the curriculum for your subjects"}),A?r.jsx(m,{sx:{display:"flex",justifyContent:"center",mt:4},children:r.jsx(k,{color:"primary"})}):x?r.jsx(a,{variant:"body1",color:c.redAccent[500],sx:{mt:2},children:x}):h.length>0?h.map((e,t)=>r.jsxs(m,{sx:{mb:4},children:[r.jsxs(a,{variant:"h2",sx:{color:c.blueAccent[200],mb:2,fontWeight:"bold"},children:[e.subject," (",e.courseDuration,")"]}),e.topics.length>0?e.topics.map((o,i)=>r.jsx(D,{title:`${i+1}. ${o.topic}`,details:r.jsxs(m,{children:[r.jsx(a,{variant:"body1",color:c.grey[100],sx:{mb:1},children:o.description||"No description available"}),r.jsxs(a,{variant:"body1",sx:{fontStyle:"italic",mb:1},children:["Duration: ",o.duration||"Unknown"]}),r.jsxs(a,{variant:"body1",sx:{color:c.blueAccent[200]},children:["Resources:"," ",Array.isArray(o.resources)?o.resources.join(", "):"No resources available"]})]}),defaultExpanded:!1},o._id||i)):r.jsxs(a,{variant:"body1",color:c.grey[100],children:["No topics available for ",e.subject,"."]})]},t)):r.jsx(a,{variant:"body1",color:c.grey[100],children:"No curriculum available for selected term and class."})]})},Y=L(R);export{Y as default};
